!function(){"use strict";function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function t(t){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?e(Object(o),!0).forEach((function(e){n(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r={REPORT_FLAG_SCRIPT:1,REPORT_FLAG_RESOURCE:2,REPORT_FLAG_XHR:4,REPORT_FLAG_PERFORMACE:8,MESSAGE_TYPE_SCRIPT:256,MESSAGE_TYPE_CONSOLE_LOG:257,MESSAGE_TYPE_CONSOLE_WARN:258,MESSAGE_TYPE_CONSOLE_ERROR:259,MESSAGE_TYPE_RESOURCE:512,MESSAGE_TYPE_RESOURCE_LOAD_ERROR:513,MESSAGE_TYPE_RESOURCE_CROSS_ORIGIN:514,MESSAGE_TYPE_RESOURCE_TIMING:515,MESSAGE_TYPE_XHR:768,MESSAGE_TYPE_XHR_ERROR:769,MESSAGE_TYPE_XHR_TIMEOUT:770,MESSAGE_TYPE_XHR_TIMING:771,MESSAGE_TYPE_XHR_CROSS_ORIGIN:772,MESSAGE_TYPE_PAGEVIEW:1024,MESSAGE_TYPE_PAGEVIEW_SHOW:1025,MESSAGE_TYPE_PAGEVIEW_HIDE:1026,MESSAGE_TYPE_PERFORMANCE:1280,MESSAGE_TYPE_PERFORMANCE_FPS:1281,VENDOR_LIST:[],TIME_DIFF_LIMIT:3e5},o=(t(t({},r),{},{DATA_SEND_INTERVAL_MS:5e3,END_POINT:"https://collecter.frontjs.com/",CDN_PATH:"https://static.frontjs.com/dist/current/frontjs.web.min.js",VERSION:"1.1.1",VENDOR_LIST:["www.google-analytics.com","www.googletagmanager.com","doubleclick.net","retcode.alicdn.com","arms-retcode.aliyuncs.com","log-global.aliyuncs.com","hm.baidu.com","zz.bdstatic.com","getclicky.com","growingio.com"]}),t(t({},r),{},{DATA_SEND_INTERVAL_MS:5e3,END_POINT:"https://collecter.frontjs.com/",CDN_PATH:"frontjs.mp.min.js",VERSION:"1.1.1"}),t(t({},r),{},{DATA_SEND_INTERVAL_MS:1e3,END_POINT:"https://collecter.frontjs.com/",CDN_PATH:"frontjs.cocos.min.js",VERSION:"1.1.0"}));function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(){return(new Date).getTime()}function s(e){var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n=(e||u()).toString(16);for(n="0"+n;n.length<16;)n="f"+n;for(;n.length<32;)n+=t[Math.floor(16*Math.random())];return n}function f(e,t){if(t)for(var n=function(n){var r=e.match(t[n][0]);if(r)return{v:t[n][1].replace(/\$(\d+)/g,(function(){return r[arguments[1]]||"$"+arguments[1]}))}},r=0;r<t.length;r++){var o=n(r);if("object"===c(o))return o.v}return e}function d(e,t,n){var r=Object.create({}),o=Object.getOwnPropertyDescriptors(e),a=function(a){var l=o[a];a===t?(n.value&&l.get&&(n.get=n.value,delete n.value),l=i(i({},l),n)):("function"==typeof l.get&&(l=i(i({},l),{},{get:function(){return e[a]}})),"function"==typeof l.set&&(l=i(i({},l),{},{set:function(t){return e[a]=t}}))),Object.defineProperty(r,a,l)};for(var l in o)a(l);return r}var g={isLocalResourse:function(e){return"string"==typeof e&&(!![".","/"].includes(e[0])||0===e.indexOf("disable-commonjs://")||e.indexOf("://localhost")>=0||e.indexOf("://127.0.0.1")>=0||e.indexOf("://::1")>=0||!e.match(/^[a-z0-9-]+:\/\//i))},getUserAgent:function(){return window.CC_NATIVERENDERER?null:window.navigator&&window.navigator.userAgent},getViewPortSize:function(e){return{w:window.innerWidth,h:window.innerHeight,r:window.devicePixelRatio,t:window.CC_NATIVERENDERER?"NATIVE":window.cc.game.renderType===window.cc.game.RENDER_TYPE_WEBGL?"WEBGL":"CANVAS",f:e.global.renderProfiler?1e3/e.global.renderProfiler.getAverage().cycle:null}},getClientID:function(){return window.localStorage?(window.localStorage.getItem("frontjs:client:id")||window.localStorage.setItem("frontjs:client:id",s()),window.localStorage.getItem("frontjs:client:id")):s()},getSessionID:function(e){return e.global.SESSID||(e.global.SESSID=s()),e.global.SESSID},getResourceTimingData:function(e,t){var n,r,o=window.performance&&window.performance.getEntriesByType&&window.performance.getEntriesByType("resource");if(!o)return{};for(var a=o.length-1;a>=t.global.RT_PTR;a--)if(e.length&&o[a].name.length&&o[a].name.substring(o[a].name.length-e.length)===e)return n=o[a],r=void 0,(r={}).dns=n.domainLookupEnd-n.domainLookupStart,r.connect=n.connectEnd-n.connectStart,r.request=n.responseStart-n.requestStart,r.response=n.responseEnd-n.responseStart,r.dns>=0&&r.connect>=0&&r.request>=0&&r.response>=0?r:null;return{}},renderProfiler:function(){var e=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},t=60,n={updateEnd:Array(t).fill(null),renderStart:Array(t).fill(null),renderEnd:Array(t).fill(null),cycle:Array(t).fill(null)},r=-1,o=e(),a=!1;function i(){o=e(),r=0,n={updateEnd:Array(t).fill(null),renderStart:Array(t).fill(null),renderEnd:Array(t).fill(null),cycle:Array(t).fill(null)}}function l(e){for(var n=0,r=0,o=0;o<t;o++)"number"==typeof e[o]&&(n+=e[o],r++);return r?n/r:0}return{disable:function(){a=!1,i()},enable:function(){a=!0,i()},getStatus:function(){return a},reset:i,round:function(){a&&(n.cycle[r]=e()-o,o=e(),r=r<59?r+1:0)},mark:function(t){n[t]&&a&&(n[t][r]=e()-o)},getLatest:function(){var e=0===r?59:r-1;return{updateEnd:n.updateEnd[e],renderStart:n.renderStart[e],renderEnd:n.renderEnd[e],cycle:n.cycle[e]}},getAverage:function(){return{updateEnd:l(n.updateEnd),renderStart:l(n.renderStart),renderEnd:l(n.renderEnd),cycle:l(n.cycle)}}}},getPerformanceTimingData:function(){var e={};return e.dns=window.performance.timing.domainLookupEnd-window.performance.timing.domainLookupStart,e.connect=window.performance.timing.connectEnd-window.performance.timing.connectStart,e.request=window.performance.timing.responseStart-window.performance.timing.requestStart,e.response=window.performance.timing.responseEnd-window.performance.timing.responseStart,e.dom=window.performance.timing.domInteractive-window.performance.timing.domLoading,e.domContent=window.performance.timing.domComplete-window.performance.timing.domInteractive,e.load=window.performance.timing.domComplete-window.performance.timing.domainLookupStart,e.dns=e.dns<0?null:e.dns,e.connect=e.connect<0?null:e.connect,e.request=e.request<0?null:e.request,e.response=e.response<0?null:e.response,e.dom=e.dom<0?null:e.dom,e.domContent=e.domContent<0?null:e.domContent,e.load=e.load<0?null:e.load,e}};function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e){if("string"==typeof e&&e.match(/^\/(.*)\/(i|g|m|u|y)*$/))try{return new Function("return "+e)()}catch(e){}return null}function _(e){var t=[];if(e&&e.length){for(var n=0;n<e.length;n++)if(null===e[n])t.push("null");else if(void 0===e[n])t.push("undefined");else if(e[n]instanceof Array&&"string"==typeof e[n].toString())t.push("["+e[n].toString()+"]");else if("object"===E(e[n])){var r=[];for(var o in e[n]){var a="";if(a+=o+": ",null===e[n][o])a+="null";else if(void 0===e[n][o])a+="undefined";else switch(E(e[n][o])){case"object":e[n][o]instanceof Array&&"string"==typeof e[n][o].toString()?a+="["+e[n][o].toString()+"]":"function"==typeof e[n][o].valueOf&&"string"==typeof e[n][o].valueOf()?a+=e[n][o].valueOf():"function"==typeof e[n][o].toString&&"string"==typeof e[n][o].toString()?a+=e[n][o].toString():a+="[object]";break;case"function":a+="[function]";break;default:a+=e[n][o].toString()}r.push(a)}t.push("{"+r.join(", ")+"}")}else"function"==typeof e[n].valueOf&&"string"==typeof e[n].valueOf()?t.push(e[n].valueOf()):"function"==typeof e[n].toString&&"string"==typeof e[n].toString()?t.push(e[n].toString()):t.push("[object]");return t.join(", ")}return"[object]"}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var y={token:function(e){return e&&e.match(/^\w{32}$/)?0:1},behaviour:function(e){return e<=(r.REPORT_FLAG_SCRIPT|r.REPORT_FLAG_RESOURCE|r.REPORT_FLAG_XHR|r.REPORT_FLAG_PERFORMACE)?0:1},stringOrRegExpList:function(e){e=e||[];for(var t=0;t<e.length;t++)if("string"==typeof e[t]);else if(!e[t].test)return"Value: "+e[t];return 0},routeList:function(e){e=e||[];for(var t=0;t<e.length;t++)if("string"!=typeof e[t][0]||"string"!=typeof e[t][1])return"Pair: "+e[t].join(",");return 0},stringValueObject:function(e){for(var t in e=e||{})if("object"===m(e[t])||"function"==typeof e[t]||"string"!=typeof t)return t;return 0}},S=function(e,t){t=t||"";var n={1001:"Invalid token",1002:"Invalid behaviour settings",1003:"Invalid origin settings",1004:"Invalid exclude settings",1005:"Invalid user data",1006:"Invalid history API type",1007:"Invalid route mapping settings",4e3:"Bad configuration! Fail to start!",4001:"FrontJS is already defined, Fail to start!",4002:"FrontJS start in unsupport paltform, Fail to start!"};n[e]&&console.warn(["Error(frontjs):",n[e],"(CODE"+e+")","See https://www.frontjs.com/doc/view/errcode/#"+encodeURIComponent(t)].join(" "))},b=[],v={stack:b,push:function(e){return b.push(e)},current:function(){return b[b.length-1]||""},referer:function(){return b[b.length-2]||""}};function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){return function(){var n=new e;return n._tracker_open=n.open,n.tracker={_time_init:0,_time_open:0,_time_send:0,_time_load:0,_time_done:0,_request_method:"",_request_url:"",_status:""},n.addEventListener("error",(function(){return t({type:"error",target:n})})),n.addEventListener("timeout",(function(){return t({type:"timeout",target:n})})),n.addEventListener("readystatechange",(function(){return t({type:"readystatechange",target:n})})),n.open=function(e,t,r,o,a){return n.tracker._request_method=e,n.tracker._request_url=t,n.tracker._time_open=u(),n._tracker_open(e,t,!1!==r,o,a)},n}}function T(e,t){return function(n,r){var o=new e(n,r);return o.addEventListener("load",t),o.addEventListener("error",t),o._additional_name="Image API",o}}function A(e,t){return function(){var n=[].slice.call(arguments);if(!n.length)return!0;var r=e.apply(window.document,n);return"string"==typeof arguments[0]&&(["img","script","link"].includes(arguments[0].toLowerCase())?r.addEventListener("load",t):["audio","video"].includes(arguments[0].toLowerCase())&&r.addEventListener("canplaythrough",t),r.addEventListener("error",t),r._additional_name="document.createElement API"),r}}function O(e,t,n,r,o){var a={type:t,data:n};if(a.currentURL=e.global.history.current(),a.refererURL=e.global.history.referer(),a.currentRoute=f(a.currentURL,e.routeMapping),a.refererRoute=f(a.refererURL,e.routeMapping),a.viewPort=e.global.env.getViewPortSize(e),a.userAgent=e.global.env.getUserAgent(e),a.clientID=e.global.env.getClientID(e),a.sessionID=e.global.env.getSessionID(e),n.message===e.global.const.MESSAGE_TYPE_PAGEVIEW?a.messageID=e.global.PVID:a.messageID=s(o),a.token=e.token,a.version=e.global.const.VERSION,a.userData=e.userData,e.device&&(a.deviceData=e.device),r)for(var i in a.data.detail=a.data.detail||{},r)a.data.detail[i]=r[i];return a}function w(e,t,n,r,o,a,i){var l,c;return l=a=a&&a.stack?a.stack.toString():"",c=new RegExp("((?!\n).)*"+i.replace(/(\.|\\|\/|\||\+|\$|\^)/g,"\\$1")+".*\n","g"),{message:e,detail:{err:t,file:n,line:r,column:o,trace:a=l.replace(c,"")}}}function I(e,t,n,r){return{message:e,detail:{requestURL:t,responseData:n,timing:r}}}function h(e,t,n,r){return{message:e,detail:{tagname:t,resourceURL:n,timing:r}}}function D(e,t){return{message:e,detail:t}}function M(e,t){if("string"==typeof e&&t){e=e||"";for(var n=0;n<t.length;n++)if(""!==t[n]&&e.match(t[n]))return!0}return!1}window.FrontJS=function(e,t){if(e.FrontJS&&e.FrontJS.V)return S(4001),e.FrontJS;var n=function(e){var t={},n=!0;if(y.token(e.token)?(S(1001),n&=!1):t.token=e.token.toString(),y.behaviour(e.behaviour)?(S(1002),n&=!1):(t.behaviour=parseInt(e.behaviour),t.behaviour||(t.behaviour=o.REPORT_FLAG_SCRIPT|o.REPORT_FLAG_RESOURCE|o.REPORT_FLAG_XHR|o.REPORT_FLAG_PERFORMACE)),y.stringOrRegExpList(e.exclude)){var r=y.stringOrRegExpList(e.exclude);S(1004,r),n&=!1}else t.exclude=function(e){e=e||[];for(var t=[],n=0;n<e.length;n++)"string"==typeof e[n]&&(p(e[n])?t.push(p(e[n])):t.push(e[n]));return t}(e.exclude),t.exclude.push(o.CDN_PATH),t.exclude.push(o.END_POINT);if(y.stringValueObject(e.userData)){var a=y.KVArrayChecker(e.userData);S(1005,a),n&=!1}else t.userData=function(e){var t={};for(var n in e)t[n]=e[n];return t}(e.userData);return e.FPSThreshold&&(t.FPSThreshold=parseInt(e.FPSThreshold)),t.captureConsoleLog=!!e.captureConsoleLog,!!n&&t}(t);if(!n)return S(4e3),!1;n.global={},n.global.SESSID=null,n.global.PVID=null,n.global.PVTS=null,n.global.RT_PTR=0,n.global.const=o,n.global.env=g,n.global.renderProfiler=g.renderProfiler(),n.global.history=v;var r=function(e){return function(t){if(!t.message)return!0;var n=w(e.global.const.MESSAGE_TYPE_SCRIPT,t.message,t.filename,t.lineno,t.colno,t.error,e.global.const.CDN_PATH);!M(t.filename,e.exclude)&&e.behaviour&e.global.const.REPORT_FLAG_SCRIPT&&e.global.sender(O(e,e.global.const.MESSAGE_TYPE_SCRIPT,n),!1)}}(n),a=function(e){return function(t){if(!t||!t.target)return!0;var n=t.target._additional_name?t.target.tagName+" ("+t.target._additional_name+")":t.target.tagName,r=t.target.src||t.target.href;if(t.target._additional_name&&t.currentTarget&&9===t.currentTarget.nodeType)return!0;if(r&&r.length&&0===r.indexOf("data:")&&(r=r.slice(0,40)+"..."),!r||M(r,e.exclude)||!(e.behaviour&e.global.const.REPORT_FLAG_RESOURCE))return!0;if("load"===t.type){var o=e.global.env.getResourceTimingData(r,e);if(e.global.env.isLocalResourse(r))return!0;if(o){var a=h(e.global.const.MESSAGE_TYPE_RESOURCE_TIMING,n,r,t.cost);e.global.sender(O(e,e.global.const.MESSAGE_TYPE_RESOURCE,a,o,t.time||null),!1)}}else if("error"===t.type){var i=h(e.global.const.MESSAGE_TYPE_RESOURCE_LOAD_ERROR,n,r,t.cost);e.global.sender(O(e,e.global.const.MESSAGE_TYPE_RESOURCE,i,null,t.time||null),!1)}}}(n),i=function(e){return function(t){var n=t.target;if(M(n.tracker._request_url,e.exclude)||!(e.behaviour&e.global.const.REPORT_FLAG_XHR))return!0;if("readystatechange"===t.type){var r=["_time_init","_time_open","_time_send","_time_load","_time_done"];if(r[n.readyState]&&(n.tracker[r[n.readyState]]=u()),4===n.readyState){n.tracker._status=n.status;var o=function(e){if(e._time_open&&e._time_load&&e._time_send&&e._time_done){var t=e._time_send-e._time_open,n=e._time_load-e._time_send,r=e._time_done-e._time_open;return{send:t=t<0?null:t,load:n=n<0?null:n,total:r=r<0?null:r}}if(e._time_open&&e._time_done){var o=e._time_done-e._time_open,a=0,i=e._time_done-e._time_open;return{send:o=o<0?null:o,load:a=a<0?null:a,total:i=i<0?null:i}}return{send:0,load:0,total:0}}(n.tracker),a=e.global.env.getResourceTimingData(n.tracker._request_url,e);if(o.total||n.tracker._status){var i=null;if(n.tracker._status>=200&&n.tracker._status<300){if(e.global.env.isLocalResourse(n.tracker._request_url))return!0;i=I(e.global.const.MESSAGE_TYPE_XHR_TIMING,n.tracker._request_url,{status:n.tracker._status},o)}else i=I(e.global.const.MESSAGE_TYPE_XHR_ERROR,n.tracker._request_url,{status:n.tracker._status},o);e.global.sender(O(e,e.global.const.MESSAGE_TYPE_XHR,i,a),!1)}}}else if("error"===t.type){n.tracker._status=n.status;var l=I(e.global.const.MESSAGE_TYPE_XHR_ERROR,n.tracker._request_url,{status:n.tracker._status},{});e.global.sender(O(e,e.global.const.MESSAGE_TYPE_XHR,l),!1)}else if("timeout"===t.type){n.tracker._status=n.status;var c=I(e.global.const.MESSAGE_TYPE_XHR_TIMEOUT,n.tracker._request_url,{status:n.tracker._status},{});e.global.sender(O(e,e.global.const.MESSAGE_TYPE_XHR,c),!1)}}}(n),l=function(e){return function(t){var n=null;if("console.log"===t.type&&e.captureConsoleLog)n=e.global.const.MESSAGE_TYPE_CONSOLE_LOG,t.type+=" API";else if("console.warn"===t.type)n=e.global.const.MESSAGE_TYPE_CONSOLE_WARN,t.type+=" API";else{if("console.error"!==t.type)return!0;n=e.global.const.MESSAGE_TYPE_CONSOLE_ERROR,t.type+=" API"}var r=w(n,t.error.message,t.type,t.error.lineno,t.error.colno,t.error,e.global.const.CDN_PATH);e.behaviour&e.global.const.REPORT_FLAG_SCRIPT&&e.global.sender(O(e,e.global.const.MESSAGE_TYPE_SCRIPT,r),!1)}}(n),c=function(e){return function(t){var n=e.global.PVTS,r=(e.global.PVID,{view:0});if("unload"===t.type){r.view=u()-n;var o=D(e.global.const.MESSAGE_TYPE_PAGEVIEW,r);e.global.sender(O(e,e.global.const.MESSAGE_TYPE_PAGEVIEW,o),!0)}if("load"===t.type){t.initial||(e.global.history.push(t.data),e.global.PVTS=u(),e.global.PVID=s(e.global.PVTS));var a=D(e.global.const.MESSAGE_TYPE_PAGEVIEW,r);e.global.sender(O(e,e.global.const.MESSAGE_TYPE_PAGEVIEW,a),!1),e.API.dispatchEvent({type:"enterpage",url:e.global.history.current(),referer:e.global.history.referer(),route:f(e.global.history.current(),e.routeMapping),refererRoute:f(e.global.history.referer(),e.routeMapping)})}}}(n),E=function(e){return function(t){if("profile"===t.type&&t.data.cycle){var n=1e3/t.data.cycle,r={code:t.data.renderStart-t.data.updateEnd,render:t.data.renderEnd-t.data.renderStart,fps:n};if(n&&n<e.FPSThreshold){var o=function(e,t){return{message:e,detail:t}}(e.global.const.MESSAGE_TYPE_PERFORMANCE_FPS,r);e.global.sender(O(e,e.global.const.MESSAGE_TYPE_PERFORMANCE,o),!1)}}}}(n);if(n.handler={errorHandler:r,resourceEventHandler:a,xhrEventHandler:i,consoleEventHandler:l,historyEventHandler:c,renderEventHandler:E},n.global.PVTS=window.performance&&window.performance.timing&&window.performance.timing.navigationStart||u(),n.global.PVID=s(n.global.PVTS),n.global.history.push("<initial scene>"),n.device={osType:e.cc.sys.os,osversion:e.cc.sys.osVersion,appname:e.cc.sys.browserType,appversion:e.cc.sys.browserVersion,deviceID:n.global.env.getClientID(n)},n.global.TIME_DIFF=null,!n.global.TIME_DIFF){var m=new e.XMLHttpRequest;m.open("GET",n.global.const.END_POINT,!0),m.addEventListener("load",(function(e){if(m.responseText&&"string"==typeof m.responseText){var t=m.responseText.split(" ");if(2===t.length)return n.global.TIME_DIFF=1e3*t[1]+Math.floor(1e3*t[0])-u(),!0}return n.global.TIME_DIFF=0,!1})),m.addEventListener("abort",(function(e){return n.global.TIME_DIFF=0,!1})),m.addEventListener("error",(function(e){return n.global.TIME_DIFF=0,!1})),m.addEventListener("timeout",(function(e){return n.global.TIME_DIFF=0,!1})),m.send(null)}var b,L,G,F,C,N,j=e.XMLHttpRequest;if(e.XMLHttpRequest&&(Object.getOwnPropertyDescriptor(e,"XMLHttpRequest")&&!Object.getOwnPropertyDescriptor(e,"XMLHttpRequest").configurable?e=d(e,"XMLHttpRequest",{value:P(j,i)}):e.XMLHttpRequest=P(j,i)),n.global.sender=function(e,t){var n=[],r=null;function o(){r=setTimeout((function(){a(null,!0),clearTimeout(r),o()}),e.global.const.DATA_SEND_INTERVAL_MS)}function a(r,a){if(r&&n.push(r),a&&n.length&&"number"==typeof e.global.TIME_DIFF){Math.abs(e.global.TIME_DIFF)>e.global.const.TIME_DIFF_LIMIT&&n.forEach((function(t){var n,r,o;t.messageID=(n=t.messageID,r=e.global.TIME_DIFF,o=n.substring(16),s(function(e){var t=e.slice(0,-16).match(/^f*0([0-9a-f]+)$/i);return t&&t[1]?parseInt(t[1],16):0}(n)+r).slice(0,-16)+o)}));var i=new t;i.open("POST",e.global.const.END_POINT,!0),i.timeout=3e3,i.send(JSON.stringify(n)),n=[],o()}}return o(),a}(n,j),e.console&&(b=e.console,L=l,G=b.log,F=b.warn,C=b.error,(N=b).log=function(){var e=[].slice.call(arguments);return!e.length||!(1!==arguments.length||"string"!=typeof arguments[0]||!arguments[0].match(/\[.*\]\[.*\]\[.*\]/))||(L({type:"console.log",error:new Error(_(e).substr(0,1e3))}),void G.apply(b,e))},N.warn=function(){var e=[].slice.call(arguments);if(!e.length)return!0;L({type:"console.warn",error:new Error(_(e).substr(0,1e3))}),F.apply(b,e)},N.error=function(){var e=[].slice.call(arguments);if(!e.length)return!0;1===e.length&&"object"===R(e[0])&&e[0].message&&e[0].stack?L({type:"console.error",error:e[0]}):L({type:"console.error",error:new Error(_(e).substr(0,1e3))}),C.apply(b,e)}),e.cc&&(function(e,t){var n=e.loadScene,r=e.end,o=e;o.loadScene=function(){var r=[].slice.call(arguments);if(!r.length)return!0;t({type:"unload"}),t({type:"load",data:r[0]}),n.apply(e,r)},o.end=function(){var n=[].slice.call(arguments);t({type:"unload"}),r.apply(e,n)}}(e.cc.director,c),function(e,t){e.loadScene;var n=e.end;e.end=function(){var r=[].slice.call(arguments);t({type:"unload"}),n.apply(e,r)}}(e.cc.game,c)),e.Image&&(Object.getOwnPropertyDescriptor(e,"Image")&&!Object.getOwnPropertyDescriptor(e,"Image").configurable?e=d(e,"Image",{value:T(e.Image,a)}):e.Image=T(e.Image,a)),e.document&&"createElement"in e.document)if(Object.getOwnPropertyDescriptor(e,"document")&&!Object.getOwnPropertyDescriptor(e,"document").configurable){var k=e;e=d(k,"document",{get:function(){var e=k.document;return d(e,"createElement",{value:A(e.createElement,a)})}})}else e.document.createElement=A(e.document.createElement,a);function V(){"visible"===window.document.visibilityState?n.global.renderProfiler.enable():"hidden"===window.document.visibilityState&&n.global.renderProfiler.disable()}return e.cc.assetManager&&function(e,t){var n=e.loadAny,r=e.preloadAny,o=e.loadRemote,a=e.loadScript,i=e.loadBundle,l=e;function c(e,t){return function(){0===e.start&&(e.start=u()),t.apply(this,[].slice.call(arguments))}}function s(e,t,n){return function(){0===e.start&&(e.start=e.init),e.done=u();var r={send:0,load:e.done-e.start,total:e.done-e.start};n(arguments[0]?{type:"error",target:{tagName:e.target,src:e.url},cost:r}:{type:"load",target:{tagName:e.target,src:e.url},cost:r}),t.apply(this,[].slice.call(arguments))}}function f(e,n){if(2===e.length&&"function"==typeof e[1]){var r=e[1];e[1]=null,e[2]=c(n,(function(){})),e[3]=s(n,r,t)}else if(3===e.length&&"function"==typeof e[1]&&"function"==typeof e[2]){var o=e[1],a=e[2];e[1]=null,e[2]=c(n,o),e[3]=s(n,a,t)}else if(3===e.length&&"function"==typeof e[2]){var i=e[2];e[2]=c(n,(function(){})),e[3]=s(n,i,t)}else if(4===e.length&&"function"==typeof e[2]&&"function"==typeof e[3]){var l=e[2],u=e[3];e[2]=c(n,l),e[3]=s(n,u,t)}}function d(e,n){2===e.length&&"function"==typeof e[1]?e[1]=s(n,e[1],t):3===e.length&&"function"==typeof e[2]&&(e[2]=s(n,e[2],t))}l.loadAny=function(){var t=[].slice.call(arguments),r={url:arguments[0].url,target:"AssetManager.loadAny API",init:u(),start:0,done:0};return r.url&&f(t,r),n.apply(e,t)},l.preloadAny=function(){var t=[].slice.call(arguments),n={url:arguments[0].url,target:"AssetManager.preloadAny API",init:u(),start:0,done:0};return n.url&&f(t,n),r.apply(e,t)},l.loadRemote=function(){var t=[].slice.call(arguments),n={url:arguments[0],target:"AssetManager.loadRemote API",init:u(),start:0,done:0};return n.url&&d(t,n),o.apply(e,t)},l.loadScript=function(){var t=[].slice.call(arguments),n={url:arguments[0],target:"AssetManager.loadScript API",init:u(),start:0,done:0};return n.url&&d(t,n),a.apply(e,t)},l.loadBundle=function(){var t=[].slice.call(arguments),n={url:arguments[0],target:"AssetManager.loadBundle API",init:u(),start:0,done:0};return n.url&&d(t,n),i.apply(e,t)}}(e.cc.assetManager,a),setInterval((function(){E({type:"profile",data:n.global.renderProfiler.getAverage()})}),1e3),e.cc.director.on(e.cc.Director.EVENT_BEFORE_UPDATE,(function(){n.global.renderProfiler.round()})),e.cc.director.on(e.cc.Director.EVENT_AFTER_UPDATE,(function(){n.global.renderProfiler.mark("updateEnd")})),e.cc.director.on(e.cc.Director.EVENT_BEFORE_DRAW,(function(){n.global.renderProfiler.mark("renderStart")})),e.cc.director.on(e.cc.Director.EVENT_AFTER_DRAW,(function(){n.global.renderProfiler.mark("renderEnd")})),window.addEventListener&&(window.addEventListener("error",r),"visibilityState"in window.document&&(V(),window.document.addEventListener("visibilitychange",V),window.addEventListener("pagehide",V))),n.API=function(e){var t=[];function n(t){return t.message||(t=new Error(t)),t.error=t,t.filename=t.filename?t.filename:"",t.filename+=" via FrontJS try - catch API",t.lineno=t.lineno?t.lineno:0,t.colno=t.colno?t.colno:0,e.handler.errorHandler(t),null}return{try:function(){var e=arguments[0],t=arguments[1];try{return e.apply(t,[].slice.call(arguments,2))}catch(e){return n(e)}},catch:n,addEventListener:function(e,n){t[e]=t[e]?t[e]:[];for(var r=0;r<t[e].length;r++)if(n===t[e])return n;return t[e].push(n),n},removeEventListener:function(e,n){t[e]=t[e]?t[e]:[];for(var r=[],o=0;o<t[e].length;o++)n!==t[e][o]&&r.push(t[e][o]);return t[e]=r,n},dispatchEvent:function(e){var n=e.type;if("string"==typeof n){t[n]=t[n]?t[n]:[];for(var r=0;r<t[n].length;r++)"function"==typeof t[n][r]&&setTimeout(function(r){return function(){t[n][r](e)}}(r),0)}},composedTry:function(e,t){return function(){try{return e.apply(t,[].slice.call(arguments))}catch(e){return n(e)}}},addUserData:function(t,n){return"string"==typeof n||"number"==typeof n||"boolean"==typeof n||null===n?(e.userData[t]=n,!0):(S(1005,t),!1)},removeUserData:function(t){return delete e.userData[t],!0}}}(n),c({type:"load",initial:!0}),{C:{SCRIPT:n.global.const.REPORT_FLAG_SCRIPT,RESOURCE:n.global.const.REPORT_FLAG_RESOURCE,XHR:n.global.const.REPORT_FLAG_XHR,PERFOMACE:n.global.const.REPORT_FLAG_PERFORMACE},V:n.global.const.VERSION,try:n.API.try,catch:n.API.catch,addEventListener:n.API.addEventListener,removeEventListener:n.API.removeEventListener,composedTry:n.API.composedTry,addUserData:n.API.addUserData,removeUserData:n.API.removeUserData}}(window,window.frontjsConfig)}();
//# sourceMappingURL=frontjs.cocos.min.js.map