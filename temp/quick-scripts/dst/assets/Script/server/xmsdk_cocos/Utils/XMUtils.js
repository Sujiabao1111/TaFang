
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/server/xmsdk_cocos/Utils/XMUtils.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'aefdbYQwGVCtacMs1FcXGLw', 'XMUtils');
// Script/server/xmsdk_cocos/Utils/XMUtils.ts

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.XMUtils = void 0;
var XMUtils;
(function (XMUtils) {
    /**在两个范围内取值 min ≤ r ≤ max */
    function RandomNumBoth(Min, Max) {
        var Range = Max - Min;
        var Rand = Math.random();
        var num = Min + Math.round(Rand * Range); //四舍五入         
        return num;
    }
    XMUtils.RandomNumBoth = RandomNumBoth;
    /**判断是否是同一天，将传入的timer与当前的时间进行对比
     * timer 是秒
    */
    function IsToday(timer) {
        var oldTimer = timer * 1000; //将秒转换为毫秒
        if (new Date(oldTimer).toDateString() === new Date().toDateString()) {
            return true;
        }
        else {
            return false;
        }
    }
    XMUtils.IsToday = IsToday;
    /**深度拷贝 */
    function deepCopy(p, c) {
        var c = c || {};
        for (var i in p) {
            if (typeof p[i] === 'object') {
                c[i] = (p[i].constructor === Array) ? [] : {};
                this.deepCopy(p[i], c[i]);
            }
            else {
                c[i] = p[i];
            }
        }
        return c;
    }
    XMUtils.deepCopy = deepCopy;
    /**是否记录过channe字段 */
    function HasChannel() {
        var key = "channel";
        if (cc.sys.localStorage.getItem(key)) {
            return true;
        }
        else {
            return false;
        }
    }
    XMUtils.HasChannel = HasChannel;
    /**
     *
     * @param arr 数组
     * @param isDesc 升序降序 true:升序 false:降序
     * @param  key  键名
     */
    function SortFunction(arr, isDesc, key) {
        if (isDesc === void 0) { isDesc = true; }
        var sort = null;
        var temp = [];
        if (key) {
            sort = function (a, b) {
                if (a[key] > b[key]) {
                    return isDesc ? 1 : -1;
                }
                else if (a[key] < b[key]) {
                    return isDesc ? -1 : 1;
                }
                else if (a[key] == b[key]) {
                    return 0;
                }
            };
        }
        else {
            sort = function (a, b) {
                if (a > b) {
                    return isDesc ? 1 : -1;
                }
                else if (a < b) {
                    return isDesc ? -1 : 1;
                }
                else if (a == b) {
                    return 0;
                }
            };
        }
        temp = arr.sort(sort);
        return temp;
    }
    XMUtils.SortFunction = SortFunction;
    /**
     * 返回数组中最大数的索引
     */
    function returnIndexLarge(arr) {
        var length = arr ? arr.length : 0;
        var index = 0;
        var max = arr ? arr[0] : 0;
        for (var i = 1; i < length; i++) {
            if (arr[i] > max) {
                max = arr[i];
                index = i;
            }
        }
        return index;
    }
    XMUtils.returnIndexLarge = returnIndexLarge;
    function CheckNameLenght(name) {
        if (name && name.length > 0) {
            if (name.length > 7) {
                return name.substring(0, 7) + "..";
            }
            else {
                return name;
            }
        }
        else {
            return "";
        }
    }
    XMUtils.CheckNameLenght = CheckNameLenght;
    //获取url encode过的数据
    function getUrlDecodeParam(param_name) {
        param_name = param_name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
        var urlReg = new RegExp("[\\?&]" + param_name + "=([^&#]*)");
        var result = urlReg.exec(window.location.search);
        if (result) {
            return decodeURI(result[1].replace(/\+/g, " "));
        }
        return null;
    }
    XMUtils.getUrlDecodeParam = getUrlDecodeParam;
    // 浮点加法
    function numberAdd(arg1, arg2) {
        var r1, r2, m, c;
        try {
            r1 = arg1.toString().split('.')[1].length;
        }
        catch (e) {
            r1 = 0;
        }
        try {
            r2 = arg2.toString().split('.')[1].length;
        }
        catch (e) {
            r2 = 0;
        }
        c = Math.abs(r1 - r2);
        m = Math.pow(10, Math.max(r1, r2));
        if (c > 0) {
            var cm = Math.pow(10, c);
            if (r1 > r2) {
                arg1 = Number(arg1.toString().replace('.', ''));
                arg2 = Number(arg2.toString().replace('.', '')) * cm;
            }
            else {
                arg1 = Number(arg1.toString().replace('.', '')) * cm;
                arg2 = Number(arg2.toString().replace('.', ''));
            }
        }
        else {
            arg1 = Number(arg1.toString().replace('.', ''));
            arg2 = Number(arg2.toString().replace('.', ''));
        }
        return (arg1 + arg2) / m;
    }
    XMUtils.numberAdd = numberAdd;
    // 浮点减法
    function numberSub(a, b) {
        return XMUtils.numberAdd(a, -b);
    }
    XMUtils.numberSub = numberSub;
    //浮点乘法
    function numberMul(a, b) {
        var A = a.toString(), B = b.toString(), r, p, ap = A.indexOf('.'), bp = B.indexOf('.');
        if (ap < 0 && bp < 0) {
            r = a * b;
        }
        else {
            ap = ap === -1 ? A.length + 1 : ap;
            bp = bp === -1 ? B.length + 1 : bp;
            p = Math.pow(10, Math.max(A.length - ap - 1, B.length - bp - 1));
            A = A.indexOf(".") > -1 ? parseInt(A.replace('.', '')) : A * p;
            B = B.indexOf(".") > -1 ? parseInt(B.replace('.', '')) : B * p;
            r = (A * B) / (p * p);
        }
        return r;
    }
    XMUtils.numberMul = numberMul;
    //浮点除法
    function numberDiv(a, b) {
        var A = a.toString(), B = b.toString(), r, p, ap = A.indexOf('.'), bp = B.indexOf('.');
        if (ap < 0 && bp < 0) {
            r = a / b;
        }
        else {
            ap = ap === -1 ? A.length + 1 : ap;
            bp = bp === -1 ? B.length + 1 : bp;
            p = Math.pow(10, Math.max(A.length - ap - 1, B.length - bp - 1));
            A = A.indexOf(".") > -1 ? parseInt(A.replace('.', '')) : A * p;
            B = B.indexOf(".") > -1 ? parseInt(B.replace('.', '')) : B * p;
            r = A / B;
        }
        return r;
    }
    XMUtils.numberDiv = numberDiv;
})(XMUtils = exports.XMUtils || (exports.XMUtils = {}));

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcU2NyaXB0XFxzZXJ2ZXJcXHhtc2RrX2NvY29zXFxVdGlsc1xcWE1VdGlscy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFjLE9BQU8sQ0FvTXBCO0FBcE1ELFdBQWMsT0FBTztJQUVqQiw0QkFBNEI7SUFDNUIsU0FBZ0IsYUFBYSxDQUFDLEdBQUcsRUFBRSxHQUFHO1FBQ2xDLElBQUksS0FBSyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUM7UUFDdEIsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ3pCLElBQUksR0FBRyxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLGVBQWU7UUFDekQsT0FBTyxHQUFHLENBQUM7SUFDZixDQUFDO0lBTGUscUJBQWEsZ0JBSzVCLENBQUE7SUFFRDs7TUFFRTtJQUNGLFNBQWdCLE9BQU8sQ0FBQyxLQUFLO1FBQ3pCLElBQUksUUFBUSxHQUFHLEtBQUssR0FBRyxJQUFJLENBQUMsQ0FBTyxTQUFTO1FBQzVDLElBQUksSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsWUFBWSxFQUFFLEtBQUssSUFBSSxJQUFJLEVBQUUsQ0FBQyxZQUFZLEVBQUUsRUFBRTtZQUNqRSxPQUFPLElBQUksQ0FBQztTQUNmO2FBQU07WUFDSCxPQUFPLEtBQUssQ0FBQztTQUNoQjtJQUNMLENBQUM7SUFQZSxlQUFPLFVBT3RCLENBQUE7SUFFRCxVQUFVO0lBQ1YsU0FBZ0IsUUFBUSxDQUFDLENBQUMsRUFBRSxDQUFDO1FBQ3pCLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDaEIsS0FBSyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUU7WUFDYixJQUFJLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLFFBQVEsRUFBRTtnQkFDMUIsQ0FBQyxDQUFDLENBQUMs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RyxDQUFDLENBQUM7WUFDL0QsQ0FBQyxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQy9ELENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1NBQ2I7UUFDRCxPQUFPLENBQUMsQ0FBQTtJQUNaLENBQUM7SUFsQmUsaUJBQVMsWUFrQnhCLENBQUE7QUFDTCxDQUFDLEVBcE1hLE9BQU8sR0FBUCxlQUFPLEtBQVAsZUFBTyxRQW9NcEIiLCJmaWxlIjoiIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgbW9kdWxlIFhNVXRpbHMge1xuXG4gICAgLyoq5Zyo5Lik5Liq6IyD5Zu05YaF5Y+W5YC8IG1pbiDiiaQgciDiiaQgbWF4ICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIFJhbmRvbU51bUJvdGgoTWluLCBNYXgpIHtcbiAgICAgICAgdmFyIFJhbmdlID0gTWF4IC0gTWluO1xuICAgICAgICB2YXIgUmFuZCA9IE1hdGgucmFuZG9tKCk7XG4gICAgICAgIHZhciBudW0gPSBNaW4gKyBNYXRoLnJvdW5kKFJhbmQgKiBSYW5nZSk7IC8v5Zub6IiN5LqU5YWlICAgICAgICAgXG4gICAgICAgIHJldHVybiBudW07XG4gICAgfVxuXG4gICAgLyoq5Yik5pat5piv5ZCm5piv5ZCM5LiA5aSp77yM5bCG5Lyg5YWl55qEdGltZXLkuI7lvZPliY3nmoTml7bpl7Tov5vooYzlr7nmr5QgXG4gICAgICogdGltZXIg5piv56eSXG4gICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gSXNUb2RheSh0aW1lcikge1xuICAgICAgICBsZXQgb2xkVGltZXIgPSB0aW1lciAqIDEwMDA7ICAgICAgIC8v5bCG56eS6L2s5o2i5Li65q+r56eSXG4gICAgICAgIGlmIChuZXcgRGF0ZShvbGRUaW1lcikudG9EYXRlU3RyaW5nKCkgPT09IG5ldyBEYXRlKCkudG9EYXRlU3RyaW5nKCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoq5rex5bqm5ou36LSdICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGRlZXBDb3B5KHAsIGMpIHtcbiAgICAgICAgdmFyIGMgPSBjIHx8IHt9O1xuICAgICAgICBmb3IgKHZhciBpIGluIHApIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcFtpXSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICBjW2ldID0gKHBbaV0uY29uc3RydWN0b3IgPT09IEFycmF5KSA/IFtdIDoge307XG4gICAgICAgICAgICAgICAgdGhpcy5kZWVwQ29weShwW2ldLCBjW2ldKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY1tpXSA9IHBbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGM7XG4gICAgfVxuXG4gICAgLyoq5piv5ZCm6K6w5b2V6L+HY2hhbm5l5a2X5q61ICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIEhhc0NoYW5uZWwoKSB7XG4gICAgICAgIGxldCBrZXkgPSBcImNoYW5uZWxcIjtcbiAgICAgICAgaWYgKGNjLnN5cy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSBhcnIg5pWw57uEXG4gICAgICogQHBhcmFtIGlzRGVzYyDljYfluo/pmY3luo8gdHJ1ZTrljYfluo8gZmFsc2U66ZmN5bqPXG4gICAgICogQHBhcmFtICBrZXkgIOmUruWQjVxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBTb3J0RnVuY3Rpb24oYXJyLCBpc0Rlc2MgPSB0cnVlLCBrZXk/KSB7XG4gICAgICAgIGxldCBzb3J0ID0gbnVsbDtcbiAgICAgICAgbGV0IHRlbXAgPSBbXTtcbiAgICAgICAgaWYgKGtleSkge1xuICAgICAgICAgICAgc29ydCA9IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFba2V5XSA+IGJba2V5XSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNEZXNjID8gMSA6IC0xO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYVtrZXldIDwgYltrZXldKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpc0Rlc2MgPyAtMSA6IDE7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhW2tleV0gPT0gYltrZXldKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNvcnQgPSBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgICAgIGlmIChhID4gYikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNEZXNjID8gMSA6IC0xO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYSA8IGIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzRGVzYyA/IC0xIDogMTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGEgPT0gYikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGVtcCA9IGFyci5zb3J0KHNvcnQpO1xuICAgICAgICByZXR1cm4gdGVtcDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDov5Tlm57mlbDnu4TkuK3mnIDlpKfmlbDnmoTntKLlvJVcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gcmV0dXJuSW5kZXhMYXJnZShhcnIpIHtcbiAgICAgICAgbGV0IGxlbmd0aCA9IGFyciA/IGFyci5sZW5ndGggOiAwO1xuICAgICAgICBsZXQgaW5kZXggPSAwO1xuICAgICAgICBsZXQgbWF4ID0gYXJyID8gYXJyWzBdIDogMDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGFycltpXSA+IG1heCkge1xuICAgICAgICAgICAgICAgIG1heCA9IGFycltpXTtcbiAgICAgICAgICAgICAgICBpbmRleCA9IGk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBDaGVja05hbWVMZW5naHQobmFtZSkge1xuICAgICAgICBpZiAobmFtZSAmJiBuYW1lLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGlmIChuYW1lLmxlbmd0aCA+IDcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmFtZS5zdWJzdHJpbmcoMCwgNykgKyBcIi4uXCI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBuYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvL+iOt+WPlnVybCBlbmNvZGXov4fnmoTmlbDmja5cbiAgICBleHBvcnQgZnVuY3Rpb24gZ2V0VXJsRGVjb2RlUGFyYW0ocGFyYW1fbmFtZSkge1xuICAgICAgICBwYXJhbV9uYW1lID0gcGFyYW1fbmFtZS5yZXBsYWNlKC9bXFxbXS8sIFwiXFxcXFxcW1wiKS5yZXBsYWNlKC9bXFxdXS8sIFwiXFxcXFxcXVwiKTtcbiAgICAgICAgY29uc3QgdXJsUmVnID0gbmV3IFJlZ0V4cChcIltcXFxcPyZdXCIgKyBwYXJhbV9uYW1lICsgXCI9KFteJiNdKilcIik7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHVybFJlZy5leGVjKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO1xuICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICByZXR1cm4gZGVjb2RlVVJJKHJlc3VsdFsxXS5yZXBsYWNlKC9cXCsvZywgXCIgXCIpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvLyDmta7ngrnliqDms5VcbiAgICBleHBvcnQgZnVuY3Rpb24gbnVtYmVyQWRkKGFyZzEsIGFyZzIpIHtcbiAgICAgICAgbGV0IHIxLCByMiwgbSwgYztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHIxID0gYXJnMS50b1N0cmluZygpLnNwbGl0KCcuJylbMV0ubGVuZ3RoO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICByMSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHIyID0gYXJnMi50b1N0cmluZygpLnNwbGl0KCcuJylbMV0ubGVuZ3RoO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICByMiA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgYyA9IE1hdGguYWJzKHIxIC0gcjIpO1xuICAgICAgICBtID0gTWF0aC5wb3coMTAsIE1hdGgubWF4KHIxLCByMikpO1xuICAgICAgICBpZiAoYyA+IDApIHtcbiAgICAgICAgICAgIGxldCBjbSA9IE1hdGgucG93KDEwLCBjKTtcbiAgICAgICAgICAgIGlmIChyMSA+IHIyKSB7XG4gICAgICAgICAgICAgICAgYXJnMSA9IE51bWJlcihhcmcxLnRvU3RyaW5nKCkucmVwbGFjZSgnLicsICcnKSk7XG4gICAgICAgICAgICAgICAgYXJnMiA9IE51bWJlcihhcmcyLnRvU3RyaW5nKCkucmVwbGFjZSgnLicsICcnKSkgKiBjbTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYXJnMSA9IE51bWJlcihhcmcxLnRvU3RyaW5nKCkucmVwbGFjZSgnLicsICcnKSkgKiBjbTtcbiAgICAgICAgICAgICAgICBhcmcyID0gTnVtYmVyKGFyZzIudG9TdHJpbmcoKS5yZXBsYWNlKCcuJywgJycpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFyZzEgPSBOdW1iZXIoYXJnMS50b1N0cmluZygpLnJlcGxhY2UoJy4nLCAnJykpO1xuICAgICAgICAgICAgYXJnMiA9IE51bWJlcihhcmcyLnRvU3RyaW5nKCkucmVwbGFjZSgnLicsICcnKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChhcmcxICsgYXJnMikgLyBtO1xuICAgIH1cblxuICAgIC8vIOa1rueCueWHj+azlVxuICAgIGV4cG9ydCBmdW5jdGlvbiBudW1iZXJTdWIoYSwgYikge1xuICAgICAgICByZXR1cm4gWE1VdGlscy5udW1iZXJBZGQoYSwgLWIpXG4gICAgfVxuXG4gICAgLy/mta7ngrnkuZjms5VcbiAgICBleHBvcnQgZnVuY3Rpb24gbnVtYmVyTXVsKGEsIGIpIHtcbiAgICAgICAgdmFyIEEgPSBhLnRvU3RyaW5nKCksXG4gICAgICAgICAgICBCID0gYi50b1N0cmluZygpLFxuICAgICAgICAgICAgcixcbiAgICAgICAgICAgIHAsXG4gICAgICAgICAgICBhcCA9IEEuaW5kZXhPZignLicpLFxuICAgICAgICAgICAgYnAgPSBCLmluZGV4T2YoJy4nKTtcbiAgICAgICAgaWYgKGFwIDwgMCAmJiBicCA8IDApIHtcbiAgICAgICAgICAgIHIgPSBhICogYjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFwID0gYXAgPT09IC0xID8gQS5sZW5ndGggKyAxIDogYXBcbiAgICAgICAgICAgIGJwID0gYnAgPT09IC0xID8gQi5sZW5ndGggKyAxIDogYnBcbiAgICAgICAgICAgIHAgPSBNYXRoLnBvdygxMCwgTWF0aC5tYXgoQS5sZW5ndGggLSBhcCAtIDEsIEIubGVuZ3RoIC0gYnAgLSAxKSk7XG4gICAgICAgICAgICBBID0gQS5pbmRleE9mKFwiLlwiKSA+IC0xID8gcGFyc2VJbnQoQS5yZXBsYWNlKCcuJywgJycpKSA6IEEgKiBwO1xuICAgICAgICAgICAgQiA9IEIuaW5kZXhPZihcIi5cIikgPiAtMSA/IHBhcnNlSW50KEIucmVwbGFjZSgnLicsICcnKSkgOiBCICogcDtcbiAgICAgICAgICAgIHIgPSAoQSAqIEIpIC8gKHAgKiBwKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gclxuICAgIH1cblxuICAgIC8v5rWu54K56Zmk5rOVXG4gICAgZXhwb3J0IGZ1bmN0aW9uIG51bWJlckRpdihhLCBiKSB7XG4gICAgICAgIHZhciBBID0gYS50b1N0cmluZygpLFxuICAgICAgICAgICAgQiA9IGIudG9TdHJpbmcoKSxcbiAgICAgICAgICAgIHIsXG4gICAgICAgICAgICBwLFxuICAgICAgICAgICAgYXAgPSBBLmluZGV4T2YoJy4nKSxcbiAgICAgICAgICAgIGJwID0gQi5pbmRleE9mKCcuJyk7XG4gICAgICAgIGlmIChhcCA8IDAgJiYgYnAgPCAwKSB7XG4gICAgICAgICAgICByID0gYSAvIGI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhcCA9IGFwID09PSAtMSA/IEEubGVuZ3RoICsgMSA6IGFwXG4gICAgICAgICAgICBicCA9IGJwID09PSAtMSA/IEIubGVuZ3RoICsgMSA6IGJwXG4gICAgICAgICAgICBwID0gTWF0aC5wb3coMTAsIE1hdGgubWF4KEEubGVuZ3RoIC0gYXAgLSAxLCBCLmxlbmd0aCAtIGJwIC0gMSkpO1xuICAgICAgICAgICAgQSA9IEEuaW5kZXhPZihcIi5cIikgPiAtMSA/IHBhcnNlSW50KEEucmVwbGFjZSgnLicsICcnKSkgOiBBICogcDtcbiAgICAgICAgICAgIEIgPSBCLmluZGV4T2YoXCIuXCIpID4gLTEgPyBwYXJzZUludChCLnJlcGxhY2UoJy4nLCAnJykpIDogQiAqIHA7XG4gICAgICAgICAgICByID0gQSAvIEI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJcbiAgICB9XG59XG5cbiJdfQ==