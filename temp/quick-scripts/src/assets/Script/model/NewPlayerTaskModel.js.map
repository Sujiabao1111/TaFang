{"version":3,"sources":["assets\\Script\\model\\NewPlayerTaskModel.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { AssistCtr } from \"../Assist/AssistCtr\";\r\nimport NameTs from \"../common/NameTs\";\r\nimport pageTs from \"../common/pageTs\";\r\nimport PageManage from \"../PageManage\";\r\nimport { withdrawTaskItemVoMap } from \"../pop/gameNewPlayerTask\";\r\nimport { UrlConst } from \"../server/UrlConst\";\r\nimport XMSDK from \"../server/xmsdk_cocos/XMSDK\";\r\nimport TrackMgr from \"../TrackMgr/TrackMgr\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class NewPlayerTaskModel extends cc.Component {\r\n\r\n    @property(cc.Label)\r\n    lable_title: cc.Label = null;\r\n\r\n    @property(cc.RichText)\r\n    lable_progress: cc.RichText = null;\r\n\r\n    @property(cc.Label)\r\n    lable_addProgress: cc.Label = null;\r\n\r\n    @property(cc.Node)\r\n    btn_Node: cc.Node = null;\r\n\r\n    @property(cc.SpriteFrame)\r\n    btnSprArray: Array<cc.SpriteFrame> = [];\r\n\r\n    myData: withdrawTaskItemVoMap = null;\r\n\r\n\r\n    start() {\r\n\r\n    }\r\n\r\n    initData(data: withdrawTaskItemVoMap) {\r\n        if (data) {\r\n            let self = this;\r\n            self.lable_title.string = data.taskTitle;\r\n            self.lable_progress.string = `<color=#D26C41>完成度:</c><color=#669E00>${data.userTaskValue}</c>/<color=#D26C41>${data.taskValue}</c>`;\r\n            self.lable_addProgress.string = `+${data.progress}`;\r\n            self.btn_Node.getComponent(cc.Sprite).spriteFrame = this.btnSprArray[data.buttonType];\r\n\r\n            let tempColor = new cc.Color();\r\n            if (data.buttonType == 1) {               //按钮类型: 1-进行中, 2-待领取, 3-已领取\r\n                self.node.getChildByName(`lable_btn`).getComponent(cc.Label).string = `前往`;\r\n                self.node.getChildByName(`lable_btn`).getComponent(cc.LabelOutline).color = tempColor.fromHEX(\"#D25400\");\r\n            }\r\n            else if (data.buttonType == 2) {\r\n                self.node.getChildByName(`lable_btn`).getComponent(cc.Label).string = `领取`;\r\n                self.node.getChildByName(`lable_btn`).getComponent(cc.LabelOutline).color = tempColor.fromHEX(\"#4F7A00\");\r\n            }\r\n            else if (data.buttonType == 3) {\r\n                self.node.getChildByName(`lable_btn`).getComponent(cc.Label).string = `已领取`;\r\n                self.node.getChildByName(`lable_btn`).getComponent(cc.LabelOutline).color = tempColor.fromHEX(\"#757575\");\r\n            }\r\n            self.myData = data;\r\n        }\r\n    }\r\n\r\n    clickBtn() {\r\n        let data = this.myData;\r\n        if(data){\r\n            TrackMgr.newcomer_mission({\r\n                activity_state: `任务项按钮点击`,\r\n                days: `第${this.myData.day}天`,\r\n                task_type: this.myData.taskTitle,\r\n                button_hcdg: this.node.getChildByName(`lable_btn`).getComponent(cc.Label).string\r\n            })\r\n    \r\n    \r\n            if (data.buttonType == 1) {               //按钮类型: 1-进行中, 2-前往, 3-待领取, 4-已领取\r\n                if (data.type == 3) {\r\n                    cc.game.emit(NameTs.Game_Pop_Open, pageTs.pageName.GameTask);\r\n                }\r\n                PageManage.singleton.closePage(pageTs.pageName.GameNewPlayerTask);\r\n            }\r\n            else if (data.buttonType == 2) {\r\n                XMSDK.getdataStr({\r\n                    url: UrlConst.newPlayerTaskGet,\r\n                    data: {\r\n                        taskId: this.myData.id\r\n                    },\r\n                    onSuccess: res => {\r\n                        if (res.code === 0) {\r\n                            if(!this.isValid){\r\n                                return;\r\n                            }\r\n\r\n                            if(this.myData){\r\n                                AssistCtr.showToastTip(\"领取成功\");\r\n                                cc.game.emit(NameTs.Game_NewPlayerTaskGet, {\r\n                                    target: this.btn_Node\r\n                                });\r\n        \r\n                                TrackMgr.newcomer_mission({\r\n                                    activity_state: `任务领取成功`,\r\n                                    days: this.myData.day + \"\",\r\n                                    task_type: this.myData.taskTitle,\r\n                                })\r\n                            }\r\n                        }\r\n                        else {\r\n                            if (res) {\r\n                                AssistCtr.showToastTip(res.message);\r\n                            }\r\n                        }\r\n                    },\r\n                    onFail: err => {\r\n    \r\n                    }\r\n                }\r\n                )\r\n            }\r\n            else if (data.buttonType == 3) {\r\n                AssistCtr.showToastTip(\"已领取\");\r\n            }\r\n        }        \r\n    }\r\n}\r\n"]}