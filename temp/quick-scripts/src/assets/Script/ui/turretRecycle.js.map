{"version":3,"sources":["assets\\Script\\ui\\turretRecycle.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,yCAAoC;AACpC,2CAAsC;AACtC,qCAAgC;AAE1B,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAA2C,iCAAM;IAAjD;QAAA,qEAuEC;QApEG,gBAAU,GAAa,IAAI,CAAC;QAG5B,aAAO,GAAgB,IAAI,CAAC;QAE5B,OAAO;QACC,aAAO,GAAW,KAAK,CAAC;QAExB,WAAK,GAAU,IAAI,CAAC;;IA4DhC,CAAC;IAtDG,8BAAM,GAAN;QAAA,iBAuBC;QApBG,IAAI;QACJ,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,gBAAM,CAAC,kBAAkB,EAAC,UAAC,GAAG;YACrC,KAAI,CAAC,OAAO,GAAG,IAAI,CAAC;YACpB,KAAI,CAAC,UAAU,GAAG,cAAI,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,GAAC,GAAG,CAAC,IAAI,CAAC,CAAC;YACzD,IAAG,KAAI,CAAC,KAAK,KAAK,GAAG,CAAC,KAAK,EAAC;gBACxB,KAAI,CAAC,KAAK,GAAG,GAAG,CAAC,KAAK,CAAC;gBACvB,KAAI,CAAC,QAAQ,EAAE,CAAC;aACnB;QACL,CAAC,EAAC,IAAI,CAAC,CAAC;QAER,IAAI;QACJ,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,gBAAM,CAAC,mBAAmB,EAAC,UAAC,GAAG;YACtC,KAAI,CAAC,OAAO,GAAG,KAAK,CAAC;YACrB,KAAI,CAAC,UAAU,GAAG,IAAI,CAAC;YACvB,KAAI,CAAC,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,OAAO,CAAC,KAAK,EAAC,CAAC,CAAC,CAAC;QAE9C,CAAC,EAAC,IAAI,CAAC,CAAC;IAIZ,CAAC;IAED,8BAAM,GAAN;QACI,IAAG,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,UAAU,EAAC;YAC/B,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,WAAW,EAAE,CAAC,CAAC;SACxD;IACL,CAAC;IAED;;OAEG;IACH,gCAAQ,GAAR;QAGI,MAAM;QACN,IAAI,CAAC,UAAU,GAAG,cAAI,CAAC,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAEjD,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAE5C,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,EAAC,KAAK,CAAC,CAAC;IACvC,CAAC;IACD;;OAEG;IACH,iCAAS,GAAT,UAAU,KAAiB,EAAC,IAAW;QAEnC,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,eAAe,GAAC,IAAI,CAAC,UAAU,CAAC,gBAAgB,GAAC,GAAG,GAAC,IAAI,GAAC,GAAG,GAAC,IAAI,CAAC,UAAU,CAAC,SAAS,EAAC,EAAE,CAAC,YAAY,EAAE,UAAC,KAAK,EAAE,EAAkB;YACjJ,KAAK,CAAC,YAAY,GAAG,EAAE,CAAC;QAC5B,CAAC,CAAC,CAAC;IAEP,CAAC;IAnED;QADC,QAAQ,CAAC,EAAC,WAAW,EAAC,IAAI,EAAC,IAAI,EAAC,EAAE,CAAC,KAAK,EAAC,CAAC;qDACf;IAG5B;QADC,QAAQ,CAAC,EAAC,IAAI,EAAC,EAAE,CAAC,QAAQ,EAAC,WAAW,EAAC,GAAG,EAAC,CAAC;kDACjB;IANX,aAAa;QADjC,OAAO;OACa,aAAa,CAuEjC;IAAD,oBAAC;CAvED,AAuEC,CAvE0C,gBAAM,GAuEhD;kBAvEoB,aAAa","file":"","sourceRoot":"/","sourcesContent":["import baseTs from \"../base/baseTs\";\nimport NameTs from \"../common/NameTs\";\nimport util from \"../util/util\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class turretRecycle extends baseTs {\n\n    @property({displayName:\"等级\",type:cc.Label})\n    levelLabel: cc.Label = null;\n    \n    @property({type:sp.Skeleton,displayName:\"炮\"})\n    paoBody: sp.Skeleton = null;\n\n    //是否在接触\n    private isTouch:boolean = false;\n\n    private level:number = null;\n\n    private targetNode:cc.Node ;\n\n    private turretData:any;\n\n    onLoad () {\n\n\n        //拿起\n        cc.game.on(NameTs.Game_Turret_PickUp,(res)=>{\n            this.isTouch = true;\n            this.targetNode = util.GlobalMap.get(\"turret_\"+res.host);\n            if(this.level !== res.level){\n                this.level = res.level;\n                this.setLevel();\n            }\n        },this);\n\n        //放下\n        cc.game.on(NameTs.Game_Turret_PutDown,(res)=>{\n            this.isTouch = false;\n            this.targetNode = null;\n            this.node.setPosition(cc.winSize.width,0);\n\n        },this);\n\n        \n\n    }\n\n    update(){\n        if(this.isTouch && this.targetNode){\n            this.node.setPosition(this.targetNode.getPosition());\n        }\n    }\n\n    /**\n     * 更新炮塔\n     */\n    setLevel(){\n        \n        \n        //炮塔属性\n        this.turretData = util.GetTurretData(this.level);\n\n        this.levelLabel.string = String(this.level);\n        \n        this.loadSpine(this.paoBody,\"pao\");\n    }\n    /**\n     * 加载图片\n     */\n    loadSpine(spine:sp.Skeleton,name:string){\n\n        cc.resources.load(\"spine/turret/\"+this.turretData.DynamicResources+\"/\"+name+\"/\"+this.turretData.spineName,sp.SkeletonData, (error, sp:sp.SkeletonData) => {\n            spine.skeletonData = sp;\n        });\n\n    }\n}\n"]}