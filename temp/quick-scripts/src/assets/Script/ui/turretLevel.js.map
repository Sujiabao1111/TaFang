{"version":3,"sources":["assets\\Script\\ui\\turretLevel.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import baseTs from \"../base/baseTs\";\nimport NameTs from \"../common/NameTs\";\nimport pageTs from \"../common/pageTs\";\nimport { UrlConst } from \"../server/UrlConst\";\nimport util from \"../util/util\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class turretLevel extends baseTs {\n\n    @property({displayName:\"等级\",type:cc.Label})\n    levelLabel: cc.Label = null;\n    \n    @property({displayName:\"renminb\",type:cc.Label})\n    rbmLabel: cc.Label = null;\n    \n    @property({displayName:\"光\",type:cc.Node})\n    lightNode: cc.Node = null;\n    \n    // @property({type:sp.Skeleton,displayName:\"炮\"})\n    // paoBody: sp.Skeleton = null;\n\n    @property({type:cc.ProgressBar,displayName:\"进度\"})\n    rmbProgress: cc.ProgressBar = null;\n\n\n    private level:number = null;\n\n    private turretData:any;\n\n    private data = [\n        // {\n        //     amount:0.1,\n        //     level:10,\n        // },\n        // {\n        //     amount:0.3,\n        //     level:20,\n        // },\n    ];\n\n    //当前进行\n    private nowNo:number = 0;\n    onLoad () {\n\n       \n\n        cc.tween(this.rbmLabel.node.getParent()).repeatForever(\n            cc.tween().to(.3,{angle:10}).to(.2,{angle:0})\n        ).start();\n\n        cc.tween(this.lightNode).by(1,{angle:-360}).repeatForever().start();\n    }\n\n    update(){\n        \n    }\n\n    /**\n     * 更新炮塔\n     */\n    setLevel(){\n        //炮塔属性\n        if(this.data.length==0){\n            this.node.active = false;\n            return\n        }\n        this.turretData = util.GetTurretData(this.data[this.nowNo].level);\n        //this.rbmLabel.string = this.data[this.nowNo].amount+\"元\";\n        this.levelLabel.string = \"Lv\"+this.data[this.nowNo].level;\n        this.rmbProgress.progress  = util.userData.turretLevel/this.data[this.nowNo].level;\n        \n        // this.loadSpine(this.paoBody,\"pao\");\n\n        this.setState();\n    }\n    /**\n     * 设置状态\n     */\n    setState(){\n        \n        console.log(this.rmbProgress.progress>=1,'this.rmbProgress.progress>=1')\n        this.lightNode.active = this.rmbProgress.progress>=1;\n\n        this.lightNode.stopAllActions();\n        \n        if(this.lightNode.active){\n            cc.tween(this.lightNode).by(1,{angle:-360}).repeatForever().start();\n        }\n    }\n\n    /**\n     * 加载图片\n     */\n    loadSpine(spine:sp.Skeleton,name:string){\n\n        cc.resources.load(\"spine/turret/\"+this.turretData.DynamicResources+\"/\"+name+\"/\"+this.turretData.spineName,sp.SkeletonData, (error, sp:sp.SkeletonData) => {\n            spine.skeletonData = sp;\n        });\n\n    }\n}\n"]}