{"version":3,"sources":["assets\\Script\\ui\\savingPotBtn.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { AssistCtr } from \"../Assist/AssistCtr\";\nimport baseTs from \"../base/baseTs\";\nimport NameTs from \"../common/NameTs\";\nimport pageTs from \"../common/pageTs\";\nimport { UrlConst } from \"../server/UrlConst\";\nimport soundController from \"../soundController\";\nimport tool from \"../util/tool\";\nimport util from \"../util/util\";\n//电子邮件puhalskijsemen@gmail.com\n//源码网站 开vpn全局模式打开 http://web3incubators.com/\n//电报https://t.me/gamecode999\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class savingPotBtn extends baseTs {\n\n    @property({type:cc.Label,displayName:\"时间\"})\n    private timeLabel:cc.Label = null;\n    \n    @property({type:cc.Node,displayName:\"角标\"})\n    private getPoint:cc.Node = null;\n\n    @property({type:dragonBones.ArmatureDisplay,displayName:\"龙骨\"})\n    private dragon:dragonBones.ArmatureDisplay = null;//龙骨\n\n    private isUnlock:boolean = false;//是否解锁\n\n    private btn:cc.Button = null;\n\n    onLoad () {\n\n        this.btn = this.node.getComponent(cc.Button);\n\n        // this.dragon = this.node.getComponent(dragonBones.ArmatureDisplay);\n\n        cc.game.on(NameTs.Game_SavingPost_Icon,()=>{\n            if(!this.isUnlock)return;\n            util.savingPotLock = true;\n            this.setSate();\n        },this);\n\n        cc.game.on(NameTs.Game_SavingPost_Lock,()=>{\n            if(this.isUnlock)return;\n            this.LockFn();\n        },this);\n\n        util.getdataStr({\n            url:UrlConst.wallet_main2,\n            success:(data)=>{\n                console.log(data,'data=========');\n                if(data&&data.cashOutMap&&data.cashOutMap[1]){\n                    for(let i = 0;i<data.cashOutMap[1].length;i++){\n                        if((data.cashOutMap[1][i].type==1&&AssistCtr.isATest())||(data.cashOutMap[1][i].type==9&&!AssistCtr.isATest())){\n                            this.isUnlock = data.cashOutMap[1][i].hasWithdraw==1;\n                            break;\n                        }\n                    }\n                }\n                if(!this.isUnlock){\n                    this.btn.enabled = false;\n                    this.node.opacity = 0;\n                }else{\n                    this.LockFn();\n                }\n                console.log(\"是否解锁了该功能：\"+(this.isUnlock?\"是\":\"不是\"));\n            },\n            fail:()=>{\n                this.btn.enabled = false;\n                this.node.opacity = 0;\n                console.log(\"请求失败\");\n            }\n        })\n\n    }\n\n\n    /**解锁功能 */\n    LockFn(){\n        console.log(\"解锁该功能！\");\n        // util.savingPotLock = true;\n        this.btn.enabled = true;\n        this.node.opacity = 255;\n        util.post({\n            url:UrlConst.savingPotIndex,\n            success:(data)=>{\n                if(this.isUnlock){\n                    util.savingPotLock = data.status==0;\n                }\n                this.setSate(Number(data&&data.status)||0);\n            },\n            fail:()=>{\n                this.btn.enabled = false;\n                this.node.opacity = 0;\n                console.log(\"获取失败,暂时关闭\")\n            }\n        });\n    }\n\n    start () {\n\n\n    }\n\n    /**\n     * 设置状态\n     * @param num 0不能拿1能拿\n     */\n    setSate(num:number = 0){\n        if(this.timeLabel){\n            this.timeLabel.node.active = num==0;\n            if(this.timeLabel.node.active){\n                this.unscheduleAllCallbacks();\n                this.timeLabel.string = tool.formatData(5);\n                this.schedule(()=>{\n                    this.timeLabel.string = tool.formatData(5);\n                    if(tool.formatData(5)==\"00:00:00\"){\n                        this.setSate(1);\n                    }\n                },1);\n            }\n            \n        }\n        \n        this.dragon&&this.dragon.playAnimation(num==1?\"kelingqu\":\"normal\",-1);\n\n        console.log(num,'num============')\n\n        this.getPoint.active = num==1;\n\n        if(num==1){\n            this.getPoint.stopAllActions();\n            cc.tween(this.getPoint).repeatForever(\n                cc.tween().to(.3,{angle:10}).to(.2,{angle:0})\n            ).start();\n        }\n        \n        \n    }\n\n    /**\n     * 展现\n     */\n    showPot(){\n        soundController.singleton.clickAudio();\n        this.showPage(pageTs.pageName.GameSavingPot);\n    }\n\n    // update (dt) {}\n}\n"]}