{"version":3,"sources":["assets\\Script\\ui\\taskProgress.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import baseTs from \"../base/baseTs\";\nimport NameTs from \"../common/NameTs\";\nimport pageTs from \"../common/pageTs\";\nimport TrackMgr from \"../TrackMgr/TrackMgr\";\nimport util from \"../util/util\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class taskProgress extends baseTs {\n\n    \n    @property(cc.ProgressBar)\n    taskProgress:cc.ProgressBar = null; //任务进度条\n\n    @property(cc.Label)\n    tasklabel1:cc.Label = null; //任务标题\n\n    @property(cc.Label)\n    tasklabel2:cc.Label = null; //任务标题\n    \n    @property(cc.Node)\n    hongbao:cc.Node = null; //红包\n\n\n    private initData:any;\n\n    private taskType:number = null;//任务类型\n\n    onLoad () {\n\n        cc.game.on(NameTs.Game_Task_Progress, ()=>{\n            this.setState();\n        });\n\n        cc.game.on(NameTs.Game_Task_updata, ()=>{\n            this.setState();\n        });\n\n\n    }\n\n    /**\n     * 展现任务\n     */\n    showGameTask(){\n        this.showPage(pageTs.pageName.GameTask);\n\n        if(this.initData){\n            TrackMgr.taskbar_click({\n                activity_state: this.initData.taskTitle,\n                task_progress: this.taskProgress.progress>=1?\"已完成\":((this.initData.taskType==2?util.userData.localCompoundTime:this.initData.userTaskValue)+\"/\"+this.initData.taskValue),\n                task_type: this.taskType==0?\"日常任务\":\"成就任务\",   \n            });\n    \n            TrackMgr.AppClick({\n                app_page_title: \"首页\",\n                app_ck_module: \"任务进度入口\",\n                app_exposure_type: \"icon\",\n            });\n        }\n    }\n\n    start () {\n        \n        this.setState();\n        \n        \n\n    }\n\n    /**设置状态 */\n\n    setState(){\n\n\n        // this.taskProgress.progress = \n        util.getFistTask((res,taskType)=>{\n\n            this.taskProgress.node.getParent().active = res!==null;\n            this.taskType = taskType;\n            if(res){\n\n                this.initData = res;\n\n                this.taskProgress.progress = (res.taskType==2?util.userData.localCompoundTime:res.userTaskValue)/res.taskValue;\n\n                this.tasklabel1.string = res.taskTitle+\"(\";\n\n                this.tasklabel2.string = this.taskProgress.progress>=1?\"已完成\":((res.taskType==2?util.userData.localCompoundTime:res.userTaskValue)+\"/\"+res.taskValue);\n                \n                this.hongbao.stopAllActions();\n                this.hongbao.x = 162;\n                if(this.taskProgress.progress>=1){\n                    cc.tween(this.hongbao).repeatForever(\n                        cc.tween().by(.1,{x:5}).by(.2,{x:-10}).by(.1,{x:5}).delay(.3)\n                    ).start();\n                }\n                \n            }\n\n        });\n\n    }\n\n    // update (dt) {}\n}\n"]}