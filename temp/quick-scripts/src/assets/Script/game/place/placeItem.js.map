{"version":3,"sources":["assets\\Script\\game\\place\\placeItem.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { AssistCtr } from \"../../Assist/AssistCtr\";\nimport NameTs from \"../../common/NameTs\";\nimport tool from \"../../util/tool\";\nimport util from \"../../util/util\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class placeItem extends cc.Component {\n\n    @property({type:cc.Sprite,displayName:\"背景\"})\n    private bg:cc.Sprite = null;\n    \n    @property({type:[cc.SpriteFrame],displayName:\"背景图\"})\n    private bgSpriteFrame:cc.SpriteFrame[] = [];\n\n    @property({type:cc.Node,displayName:\"锁\"})\n    private lock:cc.Node = null;\n\n    @property({type:cc.Node,displayName:\"相同等级的\"})\n    private sameNode:cc.Node = null;\n\n    @property(dragonBones.ArmatureDisplay)\n    private turretBox:dragonBones.ArmatureDisplay = null;\n\n    //初始化数据\n    private initData:any;\n\n    //状态\n    private state:number = 0;\n   \n    onLoad () {\n\n        //拿起\n        cc.game.on(NameTs.Game_Same_Place_PickUp,(res)=>{\n            if(res.id == this.initData.id){\n                this.sameNode.active = true;\n            }\n\n        },this);\n\n        //放下\n        cc.game.on(NameTs.Game_Same_Place_PutDown,(res)=>{\n\n            if(res.id == this.initData.id){\n                this.sameNode.active = false;\n            }\n\n        },this);\n\n        cc.game.on(NameTs.Game_Unlock_Place,(res)=>{\n            \n            if(this.initData.id==res){\n                this.state = 1;\n                this.setState();\n            }\n\n        },this);\n        \n        cc.game.on(NameTs.Show_Empty_Box, ()=>{\n            if(this.initData.id == util.userData.emptyBoxNo){\n                this.turretBox.node.active = true;\n                this.turretBox.playAnimation(\"dropbox\", 0);\n            }            \n            else{\n                this.turretBox.node.active = false;\n            }\n        })\n    }\n\n    start () {\n\n    }\n\n    /**初始化 */\n    init(data){\n        this.initData = data;\n        let placeData = tool.GetArrData(\"no\",this.initData.id,util.userData.pool);\n\t\t//console.log(\" placeData :   \" + placeData)\n        this.state = placeData.state;\n        // this.setState();\n    }\n\n    /**状态修改背景 */\n    setState(){\n        if(this.bg){\n            this.bg.spriteFrame = this.bgSpriteFrame[this.state==1?0:1];\n        }        \n\n        if(this.lock){\n            this.lock.active = this.state==0;\n        }        \n    }\n    \n    /**\n     * 点击\n     */\n    clickBtn(){\n        // if(this.state==0){\n        //     AssistCtr.showToastTip(\"地块待解锁!\");\n        //     return;\n        // }\n        if(this.turretBox.node.active){                        \n            this.turretBox.playAnimation(\"dropbox_open\", 1);\n            this.scheduleOnce(()=>{            \n                cc.game.emit(NameTs.Click_Empty_Box, this.initData.id);\n            }, 0.5)    \n            \n            this.scheduleOnce(()=>{            \n                util.userData.emptyBoxNo = -1;\n                this.turretBox.node.active = false;\n            }, 1)             \n        }\n    }\n\n    // update (dt) {}\n}\n"]}