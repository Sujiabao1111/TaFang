{"version":3,"sources":["assets\\Script\\game\\tuJian\\tuJianItem.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { AssistCtr } from \"../../Assist/AssistCtr\";\r\nimport baseTs from \"../../base/baseTs\";\r\nimport NameTs from \"../../common/NameTs\";\r\nimport TrackMgr from \"../../TrackMgr/TrackMgr\";\r\nimport util from \"../../util/util\";\r\n\r\n// export interface signData {\r\n//     list: Array<signItemData>   //每日签到奖励列表\r\n//     signDays: number\t        //签到天数\r\n//     todayChecked: boolean,\t    //今日已签到\r\n//     userPeriod: number,\t        //用户期数\r\n// }\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class tuJianItem extends baseTs {\r\n\r\n    @property({ type: cc.Sprite, displayName: \"图鉴icon\" })\r\n    image_icon: cc.Sprite = null;\r\n\r\n    @property({ type: cc.Sprite, displayName: \"图鉴icon2\" })\r\n    image_icon2: cc.Sprite = null;\r\n\r\n    @property({ type: cc.Sprite, displayName: \"图鉴框\" })\r\n    image_frame: cc.Sprite = null;\r\n\r\n    @property(cc.SpriteFrame)\r\n    frameSprArray: Array<cc.SpriteFrame> = [];\r\n\r\n    @property(cc.Node)\r\n    haveNode: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    noHaveNode: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    turret: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    monster: cc.Node = null;\r\n\r\n    @property(cc.Label)\r\n    lable_lv:cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    lable_name:cc.Label = null;    \r\n\r\n    private initData: any;\r\n\r\n    start() {\r\n\r\n    }\r\n\r\n    onLoad() {\r\n\r\n    }\r\n\r\n    init(data) {\r\n        if (data && data.data) {\r\n            this.initData = data.data;\r\n            this.node.zIndex = data.id;\r\n            this.updateData();\r\n        }\r\n        else {\r\n            this.node.destroy();\r\n        }\r\n    }\r\n\r\n    updateData() {\r\n        let data = this.initData;\r\n        if (data.walkCd) {        //怪兽\r\n            this.haveNode.active = true;\r\n            this.noHaveNode.active = false;\r\n\r\n            this.loadImage(Number(data.sprite), 2, (res)=>{                    \r\n                if(this.image_icon) this.image_icon.spriteFrame = res;\r\n            }, ()=>{if(this.node) this.node.destroy();})\r\n            this.image_icon2.node.active = false;\r\n        }\r\n        else {                   //炮塔\r\n            let curLv = util.userData.turretLevel;\r\n            if (curLv >= parseInt(this.initData.level)) {\r\n                this.haveNode.active = true;\r\n                this.noHaveNode.active = false;\r\n\r\n                this.loadAny(data.body, cc.SpriteFrame, (res)=>{                    \r\n                    if(this.image_icon) this.image_icon.spriteFrame = res;\r\n                }, ()=>{if(this.node) this.node.destroy();})\r\n    \r\n                //this.image_icon2.node.active = false;\r\n                this.loadAny(data.foot, cc.SpriteFrame, (res)=>{                    \r\n                    if(this.image_icon2) this.image_icon2.spriteFrame = res;\r\n                }, ()=>{\r\n                    if(this.node) this.image_icon2.spriteFrame = null;\r\n                })\r\n\r\n                this.image_icon2.node.x = Number(data.TujianItemX);\r\n                this.image_icon2.node.y = Number(data.TujianItemY);\r\n    \r\n                // if(AssistCtr.checkTuJian(data.level)){\r\n                //     this.image_icon2.node.x = 0; \r\n                //     this.image_icon2.node.y = 0;\r\n                //     if(data.level == 5){\r\n                //         this.image_icon2.node.y = -2;\r\n                //     }\r\n                //     else if(data.level == 9){\r\n                //         this.image_icon2.node.x = -1;\r\n                //         this.image_icon2.node.y = -3;\r\n                //     }  \r\n                //     else if(data.level == 17){                        \r\n                //         this.image_icon2.node.y = -3;\r\n                //     }       \r\n                //     else if(data.level == 30){\r\n                //         this.image_icon2.node.x = 2;\r\n                //         this.image_icon2.node.y = 1;\r\n                //     } \r\n                //     else if(data.level == 29){                        \r\n                //         this.image_icon2.node.y = -4;\r\n                //     }   \r\n                //     else if(data.level == 38){                        \r\n                //         this.image_icon2.node.y = -17;\r\n                //     }                         \r\n                // }\r\n                // else{\r\n                //     this.image_icon2.node.y = -26;\r\n                // }\r\n            }\r\n            else {\r\n                this.haveNode.active = false;\r\n\r\n                this.noHaveNode.active = true;\r\n                this.turret.active = true;\r\n                this.monster.active = false;\r\n\r\n            }\r\n        }                \r\n        this.lable_lv.string = `Lv${data.level}`;        \r\n        this.lable_name.string = `${data.name}`;\r\n    }\r\n\r\n    /**\r\n     * 点击\r\n     */\r\n    click() {\r\n        if (this.haveNode.active) {\r\n            TrackMgr.AppClick({\r\n                app_page_title: \"图鉴\",\r\n                app_ck_module: \"炮王进度\",\r\n                app_exposure_type: \"Icon\",\r\n            });\r\n            \r\n            cc.game.emit(NameTs.Game_TuJian_UpData, {\r\n                target: this,\r\n                data: this.initData\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 设置点击状态\r\n     */\r\n    setCliCkState(state) {\r\n        if (this.haveNode.active) {\r\n            let tempColor = new cc.Color();\r\n            if(state){\r\n                this.lable_lv.node.color = tempColor.fromHEX(\"#FEE6B7\");\r\n                this.lable_name.node.color = tempColor.fromHEX(\"#FEE6B7\");\r\n            }\r\n            else{\r\n                this.lable_lv.node.color = tempColor.fromHEX(\"#BB420E\");\r\n                this.lable_name.node.color = tempColor.fromHEX(\"#BB420E\");\r\n            }\r\n\r\n            this.image_frame.spriteFrame = state ? this.frameSprArray[1] : this.frameSprArray[0];\r\n        }\r\n    }\r\n}\r\n"]}