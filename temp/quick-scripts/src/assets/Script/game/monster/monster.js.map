{"version":3,"sources":["assets\\Script\\game\\monster\\monster.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import NameTs from \"../../common/NameTs\";\nimport tool from \"../../util/tool\";\nimport util from \"../../util/util\";\nimport monsterFactory from \"../monsterFactory\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class monster extends monsterFactory {\n    \n    // @property({type:cc.ProgressBar,displayName:\"血条\"})\n    // hp: cc.ProgressBar = null;\n\n    // @property({type:cc.Node,displayName:\"冰冻\"})\n    // FrozenNode: cc.Node = null;\n    \n    @property({type:dragonBones.ArmatureDisplay,displayName:\"怪兽图片\"})\n    monsterSpine:dragonBones.ArmatureDisplay = null;\n    \n    // @property({type:cc.Node,displayName:\"影子\"})\n    // shadowNode: cc.Node = null;\n    \n    initData;//初始化数据\n\n    start () {\n\n\n        \n    }\n        \n\n\n    /**\n     * 攻击\n     */\n    attackFn(){\n\n        \n\n    }\n\n    init(data){\n        this.initData = data.data;\n\n        this.monsterSpine.node.opacity = 255;\n        let randomNum:number  = tool.GetRandom(1,16);\n        if(randomNum==4||randomNum==9||randomNum==14){\n            randomNum += 1;\n        }\n        let level:number = this.initData.level>16?randomNum:this.initData.level;\n        this.colorLevel = level;\n\n        this.monsterData = util.GetMonsterData(this.colorLevel);\n        this.walkNo = 0;\n        this.walkArr = tool.deepClone(data.walk);\n        //初始位置\n        this.initPos= cc.Vec2.clone(util.GetMapPos(this.walkArr[this.walkNo].y,this.walkArr[this.walkNo].x));\n        this.node.setPosition(this.initPos);\n        this.setName();\n        this.monsterSpine.node.scale = 0;\n        //默认变小\n        this.id = data.id;\n        //设置血量\n        this.monsterHp = Number(this.initData.hp);\n        /**储存怪物的node */\n        this.monsetrName = util.userData.customs.big+\"-\"+util.userData.customs.small+\"_Monster_\"+this.id;\n        util.MonsterMap.set(this.monsetrName,this.node);\n        /**初始化冰冻效果 */\n        this.isFrozen = false;\n        // this.FrozenNode.active = false;\n        this.closeFrozen();\n        /**初始化护罩效果 */\n        this.isShield = false;\n        // this.shadowNode.active = false;\n        this.startAni();\n        this.monsterSpine = this.monsterSpine;\n\n        cc.game.on(NameTs.Game_Monster_Bruise+this.monsetrName,(res)=>{\n            this.monsterBruise(res.num,res.crit);\n        },this);\n    }\n\n    /**\n     * 设置名字\n     */\n    setName(){\n        // this.loadSprite((res)=>{\n        //     this.monsterPicNode.spriteFrame = res;\n        // });\n\n        this.loadSpine();\n\n    }\n\n    \n\n    /**\n     * 出厂动画\n     */\n    startAni(){\n\n        //停止提前的动画\n        this.node.stopAllActions();\n        this.monsterSpine.node.y = Number(this.monsterData.y);\n        cc.tween(this.monsterSpine.node).delay(this.id).to(.3,{scale:Number(this.monsterData.scale)}).call(()=>{\n            cc.game.emit(NameTs.Game_Monster_Hp_Creater,{id:this.id});\n            this.walk();\n            // this.shadowNode.active = true;\n            cc.game.emit(NameTs.Game_Monster_Shadow_Creater,{id:this.id});\n        }).start();\n\n    }\n\n\n    /**\n     * 死亡动画\n     */\n    dieAni(call){        \n        this.node.stopAllActions();\n        cc.tween(this.monsterSpine.node).to(.3,{scale:0}).call(()=>{call()}).start();\n    }\n    \n\n    // /**\n    //  * 设置血条\n    //  * @param num 血条\n    //  */\n    // setHp(num:number){\n    //     this.hp.node.opacity = 255;\n    //     this.hp.progress = num;\n\n    // }\n    /**\n     * 开启冰冻\n     */\n    openFrozen(){\n        // this.FrozenNode.active = true;\n        this.monsterSpine.node.color = cc.color(11,190,255,255);\n        this.monsterSpine.node.opacity = 178;\n    }\n\n    /**\n     * 关闭冰冻\n     */\n    closeFrozen(){\n        // this.FrozenNode.active = false;\n        \n        this.monsterSpine.node.color = cc.color(255,255,255,255);\n        this.monsterSpine.node.opacity = 255;\n    }\n\n    //  /**暂停走 */\n    //  stopWalk(){\n    //     this.monsterSprite.node.pauseAllActions();\n    // }\n\n    // /**继续走 */\n    // resumeWalk(){\n    //     this.monsterSprite.node.resumeAllActions();\n    // }\n\n    // update (dt) {}\n}\n"]}