{"version":3,"sources":["assets\\Script\\game\\game.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { AssistCtr } from \"../Assist/AssistCtr\";\nimport baseTs from \"../base/baseTs\";\nimport { AdPosition } from \"../common/AdPosition\";\nimport { gamePass, gameState, propState, propType } from \"../common/faceTs\";\nimport NameTs from \"../common/NameTs\";\nimport pageTs from \"../common/pageTs\";\nimport RedController from \"../controlelr/RedController\";\nimport userData from \"../data/userData\";\nimport { GameEffect } from \"../effect/GameEffect\";\nimport { UrlConst } from \"../server/UrlConst\";\nimport AdController from \"../server/xmsdk_cocos/AD/AdController\";\nimport XMSDK from \"../server/xmsdk_cocos/XMSDK\";\nimport soundController from \"../soundController\";\nimport TrackMgr from \"../TrackMgr/TrackMgr\";\nimport util from \"../util/util\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class game extends baseTs {\n\n\n    // @property(cc.Label)\n    // customsLabel: cc.Label = null; //关卡label\n\n    @property(dragonBones.ArmatureDisplay)\n    crystal: dragonBones.ArmatureDisplay = null;   //水晶\n\n    @property(cc.Node)\n    ske_hudun: cc.Node = null;   //护盾\n\n    @property(cc.Sprite)\n    image_bg: cc.Sprite = null;  //背景图\n\n    @property(cc.SpriteFrame)\n    image_bgArray: Array<cc.SpriteFrame> = [];  //背景图集\n\n    private onceOpenGame = true;    //是否第一次开始游戏\n\n    onLoad() {\n\n\n        util.offlineTurretProduct();\n\n        cc.game.on(NameTs.Game_End, (res) => {\n            switch (res) {\n                case gamePass.success:\n                    this.showPass();\n                    this.checkBgImage();\n                    break;\n                case gamePass.fail:\n                    // this.showEnd();\n\n                    this.crystal.playAnimation(\"paota_boom\", 1);\n\n                    this.scheduleOnce(() => {\n                        this.crystal.playAnimation(\"paota_piaofu\", -1);\n                        cc.game.emit(NameTs.Game_Again);\n                        util.showEmptyBox();   //送一个空降宝箱\n                    }, 1);\n\n                    TrackMgr.AppGamedate({\n                        is_challenge_suc: false,\n                        game_level_hcdg: \"第\" + util.userData.customs.big + \"关\",\n                        level_hcdg: \"第\" + util.userData.customs.small + \"波\",\n                        game_time: util.gameTime.toFixed(1) + \"s\",\n                        use_tool: String(util.gamePropNum),\n                    });\n                    break;\n            }\n        }, this);\n\n        cc.game.on(NameTs.Game_Start, () => {\n            if (!this.onceOpenGame) {    //不是第一次开始游戏才送\n                util.showEmptyBox();   //送一个空降宝箱\n            }\n            this.onceOpenGame = false;\n\n            if (util.userData.customs.big == 2 && util.userData.customs.small == 2) {\n                if (!util.isOkSign) {\n                    this.showSign();\n                }\n            }\n\n            // if (util.userData.customs.small == util.mapConfig.length) {\n            //     if (!util.adPreObj[AdPosition.GamePssView]) {\n            //         util.preloadAd(AdPosition.GamePssView, true);\n            //     }\n            // }\n            // util.levelState = gameState.start;\n            //更新关卡title\n            cc.game.emit(NameTs.Game_View_CustomsUpdata);\n            //加载关卡怪兽\n            cc.game.emit(NameTs.Game_Load_Monster);\n            for (let i = 0; i < util.userData.prop.length; i++) {\n                if (i == propType.auto - 1) continue;\n                util.userData.prop[i].time = null;\n                util.userData.prop[i].use = propState.end;\n                if (util.userData.prop[i].type == 3) {\n                    this.closeShield();\n                }\n            }\n            util.Opening_times_level++;\n            TrackMgr.level_open({\n                number_of_levels: \"第\" + util.userData.customs.big + \"关\",\n                level: \"第\" + util.userData.customs.small + \"波\",\n                Opening_times: util.Opening_times_level,\n            });\n            XMSDK.trackUserProperties({\n                level_num: util.userData.customs.big + \"-\" + util.userData.customs.small,\n            });\n        }, this);\n\n\n        //监听弹窗\n        cc.game.on(NameTs.Game_Pop_Open, res => {\n            let name = res.name ? res.name : res;\n            switch (name) {\n                case pageTs.pageName.GameSet:\n                    this.showSet();\n                    break;\n                case pageTs.pageName.GameProp:\n                    this.showProp();\n                    break;\n                case pageTs.pageName.GameSign:\n                    this.showSign(res.data);\n                    break;\n                case pageTs.pageName.GameSignReward:\n                    this.showSignReward(res.data);\n                    break;\n                case pageTs.pageName.GameWallet:\n                    this.showWallet();\n                    break;\n                case pageTs.pageName.GameWalletRecord:\n                    this.showWalletRecord();\n                    break;\n                case pageTs.pageName.GameNetworkLost:\n                    this.showNetworkLost(res.data);\n                    break;\n                case pageTs.pageName.GameTuJian:\n                    this.showTuJian();\n                    break;\n                case pageTs.pageName.GameEarnings:\n                    this.showEarnings();\n                    break;\n                case pageTs.pageName.GameTask:\n                    this.showTask();\n                    break;\n                case pageTs.pageName.GameDetention:\n                    this.showDetention();\n                    break;\n                case pageTs.pageName.GameAdLoading:\n                    this.showAdLoading();\n                    break;\n                case pageTs.pageName.GameUpgrade:\n                    let nowTime:number = new Date().getTime();\n                    let time = Math.floor((nowTime - util.userData.unlocking_time)/1000);\n                    console.log(time,'time')\n                    TrackMgr.turret_unlock({\n                        unlock_turret_level : util.userData.turretLevel,\n                        unlocking_time:time+\"s\",\n                        synthesis_times:util.userData.synthesis_times,\n                        level:\"第\"+util.userData.customs.big+\"-\"+util.userData.customs.small+\"关\"\n            \n                    });\n                    util.userData.unlocking_time = nowTime;\n                    util.userData.synthesis_times = 0;\n                    console.log(util.userData.noviceGuide,'util.userData.noviceGuide')\n\n                    if(util.userData.turretLevel==5){\n                        //等级5级时候主动弹出\n                        this.showPage(pageTs.pageName.GameGoldWheel);\n                    }\n\n                    if(util.checkTestB(NameTs.new_hand_test)&&util.userData.noviceGuide==3){\n                        cc.game.emit(NameTs.Game_Novice_Open,4);\n                        util.sendTurretData();\n                    }else{\n                        if(util.checkTestB(NameTs.lock_turret_test)&&(util.userData.turretLevel>2&&util.userData.turretLevel<8)){\n                            console.log(\"B用户3-7级，不触发弹窗\")\n                            util.sendTurretData();\n                        }else{\n                            this.showUpgrade();\n                        }\n                    }\n                    break;\n                case pageTs.pageName.GameToolGet:\n                    this.showToolGet(res.data);\n                    break;\n                case pageTs.pageName.GameOnLinePrize:\n                    this.showOnLinePrize(res.data);\n                    break;\n                case pageTs.pageName.GameNewPlayerTask:\n                    this.showNewPlayerTask();\n                    break;\n                case pageTs.pageName.GameKingPao:\n                    this.showKingPao();\n                    break;\n                case pageTs.pageName.GameKingPaoProgress:\n                    this.showKingPaoProgress(res.data);\n                    break;\n                case pageTs.pageName.GameOnPrizeGetReward:\n                    this.showOnPrizeGetRewared(res.data);\n                    break;\n                case pageTs.pageName.GameRandomRedPrize:\n                    this.showRandomRedPrize(res.data);\n                    break;\n                case pageTs.pageName.GameTurretRandomRed:\n                    this.showTurretRandomRed();\n                    break;\n            }\n\n        }, this);\n\n        // XMSDK.post({\n        //     url: UrlConst.sign_main,\n        //     onSuccess: res => {\n        //         cc.error(\"请求成功\", res)\n        //         if (res.code === 0 && res.data) {\n\n        //         }\n        //         else {\n\n        //         }\n        //     },\n        //     onFail: err => {\n\n        //     }\n        // }\n        // )        \n\n        // this.showPage(pageTs.pageName.GameOffline);\n\n        // cc.game.emit(NameTs.Game_Pop_Open, {\n        //     name: pageTs.pageName.GameOnLinePrize,\n        //     data: {\n        //         point: 300\n        //     }\n        // });\n\n\n        cc.game.on(NameTs.Game_Tool_Use, (type) => {\n            if (type == propType.cls) {                         //清屏        \n                soundController.singleton.playMusic(NameTs.ToolMusicCls);\n                GameEffect.playToolCls();\n            } else if (type == propType.auto) {                  //自动合成\n\n            }\n            else if (type == propType.shock) {                  //电击\n                soundController.singleton.playMusic(NameTs.ToolMusicShock);\n                GameEffect.playToolShock();\n            }\n            else if (type == propType.shield) {                 //护盾\n                soundController.singleton.playMusic(NameTs.ToolMusicShield);\n                this.openShield();\n            }\n            else if (type == propType.frozen) {                 //冰冻\n            GameEffect.playToolFrozen();\n            }\n        }, this);\n\n        cc.game.on(NameTs.Close_Shield, () => {\n\n            this.closeShield();\n\n        }, this);\n\n        console.log(util.userData.noviceGuide, 'util.userData.noviceGuide')\n        if (util.userData.noviceGuide !== -1 && util.userData.turretLevel < 2) {\n            util.userData.noviceGuide = 1;\n            if(util.checkTestB(NameTs.new_hand_test)){\n                this.showPage(pageTs.pageName.GameGuide);\n            }else{\n                this.showPage(pageTs.pageName.GameGuide2);\n            }\n            util.sendTurretData();\n //fix bug\n\n            XMSDK.getdataStr({\n                url: UrlConst.sign_main,\n                onSuccess: res => {\n                    if (res.code === 0 && res.data) {\n                        if (res && res.data) {\n                            util.isOkSign = res.data.todayChecked;\n                        }\n                    }\n                },\n                onFail: err => {\n\n                }\n            }\n            )\n        } else {\n            if (util.userData.newUser) {\n                if (util.userData.offlineIncome&&util.userData.offlineIncome.reward>0) {\n                    this.showPage(pageTs.pageName.GameOffline);\n                } else {\n                    // this.showPage(pageTs.pageName.GameStart);\n                    this.FistGameStart(1);\n                }\n\t\t\t\t //fix bug\n\t\t\t\t \n                XMSDK.getdataStr({\n                    url: UrlConst.sign_main,\n                    onSuccess: res => {\n                        if (res.code === 0 && res.data) {\n                            if (res && res.data) {\n                                util.isOkSign = res.data.todayChecked;\n\n                            }\n                        }\n                    },\n                    onFail: err => {\n\n                    }\n                }\n                )\n            }\n            else {\n\t\t\t\t //fix bug\n\t\t\t\t \n                XMSDK.getdataStr({\n                    url: UrlConst.sign_main,\n                    onSuccess: res => {\n                        if (res.code === 0 && res.data) {\n                            console.log(res.data, 'res.data')\n                            if (res.data && !res.data.todayChecked) {\n                                res.data[`callBack`] = () => {\n                                    // this.showPage(pageTs.pageName.GameStart);\n                                    this.FistGameStart(2);\n                                }\n                                this.showPage(pageTs.pageName.GameSign, res.data);\n                            }\n                            else {\n                                if (util.userData.offlineIncome&&util.userData.offlineIncome.reward>0) {\n                                    this.showPage(pageTs.pageName.GameOffline);\n                                }\n                                else {\n                                    res.data[`callBack`] = () => {\n                                        // this.showPage(pageTs.pageName.GameStart);\n                                        this.FistGameStart(3);\n                                    }\n                                    this.showPage(pageTs.pageName.GameSign, res.data);\n                                }\n                            }\n\n                            if (res && res.data) {\n                                util.isOkSign = res.data.todayChecked;\n\n                                //预加载离线\n                                // if (!util.adPreObj[AdPosition.Offline]) {\n                                //     util.preloadAd(AdPosition.Offline);\n                                // }\n                                // if (!util.adPreObj[AdPosition.OfflineView]) {\n                                //     util.preloadAd(AdPosition.OfflineView, true);\n                                // }\n\n                            }\n                        }\n                        else {\n                            // this.showPage(pageTs.pageName.GameStart);\n                            this.FistGameStart(4);\n                        }\n                    },\n                    onFail: err => {\n\n                    }\n                }\n                )\n            }\n        }\n        this.openOnlineTime();\n        this.openOnLinePrizeTimer();\n        this.checkBgImage();       \n\n        cc.game.on(cc.game.EVENT_HIDE, () => {\n            console.log(\"cocos游戏进入后台时触发的事件。\")\n            //退出时间\n            util.setStorage(util.localDiary.offlineTime,new Date().getTime());\n            XMSDK.trackUserProperties({\n                synthesis_times_hcdg: util.userData.synthesis_All,\n            });\n            util.userData.synthesis_All = 0;             \n\n            util.setStorage(util.localDiary.onlineTime, util.onlineTimeNum);\n            util.setStorage(util.localDiary.randomRedTimeNum, util.randomRedTimeNum);\n        }, this);\n\n        cc.game.on(cc.game.EVENT_SHOW, () => {\n            console.log(\"cocos游戏进入前台运行时触发的事件。\")            \n            util.offlineTurretProduct();      \n        }, this);\n\n\n        TrackMgr.AppViewScreen({\n            app_page_title: \"首页\"\n        });\n\n        if (!util.userData.unlocking_time) {\n            util.userData.unlocking_time = new Date().getTime();\n            util.setStorage(util.localDiary.unlocking_time, util.userData.unlocking_time)\n        }      \n    }\n            \n    openOnlineTime(){\n        if(!util.chekcToday()){            \n            util.setStorage(util.localDiary.onlineTime, 0);            \n        }\n        let onTime = util.getStorage(util.localDiary.onlineTime)\n        if(onTime == null){            \n            util.setStorage(util.localDiary.onlineTime, 0);\n        } \n\n        util.onlineTimeNum = onTime;\n        this.schedule(()=>{\n            util.onlineTimeNum++;             \n            RedController.checkMainSignRed();\n        }, 1)\n    }\n\n    checkBgImage() {\n        //替换背景图片\n        let bgImageData = AssistCtr.checkLvBg(util.userData.customs.big);\n        let bgIndex = bgImageData.mapId - 1;\n\n        if(this.image_bg && this.image_bgArray){\n            if (this.image_bgArray[bgIndex]) {\n                this.image_bg.spriteFrame = this.image_bgArray[bgIndex];\n            }\n            else {\n                this.image_bg.spriteFrame = this.image_bgArray[0];\n            }\n        }\n        // let tempColor = new cc.Color();\n        // this.customsLabel.node.color = tempColor.fromHEX(bgImageData.color);\n    }\n\n\n    start() {\n        cc.game.emit(NameTs.Close_LoadPage)\n    }\n\n    private onLinePrizeTimer;           //在线奖励倒计时器\n    private onLinePrizeTimeNum = 0;     //在线奖励倒计时时间\n    /**\n     * 打开在线奖励\n     */\n    openOnLinePrizeTimer() {\n        if (!this.onLinePrizeTimer) {\n            this.onLinePrizeTimer = setInterval(() => {\n                if (util.levelState != gameState.stop) {\n                    this.onLinePrizeTimeNum++;\n                    if (this.onLinePrizeTimeNum > util.online_time) {        //在线打怪半个小时后自动弹窗在线奖励弹窗\n                        this.closeOnLinePrizeTimer();\n                         //fix bug\n\t\t\t\t\t\t \n\t\t\t\t\t\tXMSDK.getdataStr({\n                            url: UrlConst.getOnLinePrize,\n                            onSuccess: res => {\n                                if (res.code == 0 && res.data) {\n                                    let data = res.data;\n                                    if (data.point) {\n                                        cc.game.emit(NameTs.Game_Pop_Open, {\n                                            name: pageTs.pageName.GameOnLinePrize,\n                                            data: {\n                                                point: data.point\n                                            }\n                                        });\n                                        this.onLinePrizeTimeNum = 0;\n                                    }\n                                    else if (Math.floor(Number(data.leftTime) / 1000) < util.online_time) {\n                                        this.onLinePrizeTimeNum = Math.floor(Number(data.leftTime) / 1000);\n                                    }\n                                    this.openOnLinePrizeTimer();\n                                }\n                                else {\n                                    AssistCtr.showToastTip(res.message);\n                                }\n                            },\n                            onFail: err => {\n\n                            }\n                        })\n                    }\n                }\n            }, 1000)\n        }\n    }\n\n    /**\n     * 关闭在线奖励\n     */\n    closeOnLinePrizeTimer() {\n        if (this.onLinePrizeTimer != null) {\n            clearInterval(this.onLinePrizeTimer);\n            this.onLinePrizeTimer = null;\n        }\n    }\n\n\n    /**\n     * 开启护盾\n     */\n    openShield() {\n        this.ske_hudun.getComponent(dragonBones.ArmatureDisplay).playAnimation(\"hudun\", 1)\n        this.ske_hudun.active = true;\n    }\n\n    /**\n     * 关闭护盾\n     */\n    closeShield() {\n        this.ske_hudun.active = false;\n    }\n\n\n    /**\n     * 结束游戏\n     */\n    showEnd() {\n        TrackMgr.AppBuyProductDialog_hcdg({\n            dialog_name_hcdg: \"通关失败\"\n        })\n\n        this.showPage(pageTs.pageName.GameEnd);\n\n    }\n\n    /**\n     * 通关成功\n     */\n\n    showPass() {\n        TrackMgr.AppBuyProductDialog_hcdg({\n            dialog_name_hcdg: \"通关成功\"\n        })\n\n\n        util.Opening_times_level = 0;\n        // this.showPage(pageTs.pageName.GamePass);\n        this.showPage(pageTs.pageName.GamePassReward2);\n\n        // XMSDK.post({\n        //     url: UrlConst.gameLevelCompleted,\n        //     data:{\n        //         // level:\n        //     },\n        //     onSuccess: res => {\n        //         console.log(\"请求成功gameLevelIndex\", res)\n        //         if (res.code === 0 && res.data) {\n\n        //         }\n        //         else {\n\n        //         }\n        //     },\n        //     onFail: err => {\n\n        //     }\n        // });\n\n    }\n\n    /**\n     * 设置\n     */\n\n    showSet() {\n\n        this.showPage(pageTs.pageName.GameSet);\n\n    }\n\n    /**\n     * 道具\n     */\n\n    showProp() {\n\n        this.showPage(pageTs.pageName.GameProp);\n\n    }\n\n\n    /**\n     * 签到\n     */\n    showSign(data = null) {\n\t\t //fix bug\n\t\t \n        XMSDK.getdataStr({\n            url: UrlConst.sign_main,\n            onSuccess: res => {\n                if (res.code === 0 && res.data) {\n                    this.showPage(pageTs.pageName.GameSign, res.data);\n                }\n                else {\n\n                }\n            },\n            onFail: err => {\n\n            }\n        }\n        )\n    }\n\n    /**     \n     * 签到奖励\n     */\n    showSignReward(data = null) {\n        this.showPage(pageTs.pageName.GameSignReward, data);\n    }\n\n\n\n    /**\n    * 提现\n     */\n    showWallet() {\n        util.sendTurretData(() => {\n             //fix bug\n\t\t\t \n\t\t\tXMSDK.getdataStr({\n                url: UrlConst.wallet_main2,\n                onSuccess: res => {\n                    if (res.code === 0 && res.data) {\n                        this.showPage(pageTs.pageName.GameWallet, res.data);\n                    }\n                    else {\n\n                    }\n                },\n                onFail: err => {\n\n                }\n            }\n            )\n        });\n\n    }\n\n    /**\n     * 提现记录页\n     */\n    showWalletRecord() {\n        this.showPage(pageTs.pageName.GameWalletRecord);\n    }\n\n    /**\n     * 请求失败框\n     */\n    showNetworkLost(data) {\n        this.showPage(pageTs.pageName.GameNetworkLost, data);\n    }\n\n    /**\n     * 图鉴\n     */\n    showTuJian() {\n        this.showPage(pageTs.pageName.GameTuJian);\n    }\n    /**\n     * 收益翻倍\n     */\n    showEarnings() {\n        this.showPage(pageTs.pageName.GameEarnings);\n    }\n\n    /**\n     * 任务\n     */\n    showTask() {\n\n        util.getdataStr({\n            url: UrlConst.task_day_main,\n            success: (res) => {\n                this.showPage(pageTs.pageName.GameTask,res);     \n            }\n        });\n    }\n\n\n    /**\n     * 挽留\n     */\n    showDetention() {\n        this.showPage(pageTs.pageName.GameDetention);\n    }\n\n    /**\n     * 视频加载loading\n     */\n    showAdLoading() {\n        this.showPage(pageTs.pageName.GameAdLoading);\n    }\n    /**\n     * 升级\n     */\n    showUpgrade() {\n        this.showPage(pageTs.pageName.GameUpgrade);\n    }\n\n    /**\n     * 道具获取弹窗\n     */\n    showToolGet(data) {\n        this.showPage(pageTs.pageName.GameToolGet, data);\n    }\n\n    /**\n    * 开启在线奖励倒计时\n    */\n    showOnLinePrize(data) {\n        this.showPage(pageTs.pageName.GameOnLinePrize, data);\n    }\n\n    /**\n     * 开启新手任务\n     */\n    showNewPlayerTask() {\n       //fix bug\n\t    XMSDK.getdataStr({\n            url: UrlConst.newPlayerTaskData,\n            onSuccess: res => {\n\t\t\t\tconsole.log(\"99999999999999999### showNewPlayerTask ： \"+res.data )\n                if (res.code === 0 && res.data) {\n                    this.showPage(pageTs.pageName.GameNewPlayerTask, res.data);\n                }\n                else {\n\n                }\n            },\n            onFail: err => {\n\n            }\n        }\n        )\n\t\t\n\t\t\n\t\t\n    }\n\n    /**\n     * 炮王任务\n     */\n    showKingPao() {\n\t\t //fix bug\n\t\t \n        XMSDK.getdataStr({\n            url: UrlConst.kingPaoTaskData,\n            onSuccess: res => {\n                if (res.code === 0 && res.data) {\n                    this.showPage(pageTs.pageName.GameKingPao, res.data);\n                }\n                else {\n                    if (res) {\n                        AssistCtr.showToastTip(res.message);\n                    }\n                }\n            },\n            onFail: err => {\n\n            }\n        })\n    }\n\n    /**\n     * 炮王任务进度\n     */\n    showKingPaoProgress(clickData) {\n        if (clickData) {\n            TrackMgr.artillery_bonus({\n                activity_state: `点击「炮王进度」任务`,\n                button_hcdg: `加10%按钮`,\n                task_progress: `${clickData.progress}`,\n                Page_source: clickData.clickTarget ? \"图鉴\" : \"百万分红\"\n            })\n        }\n\t\t\n\t\t //fix bug\n\t\t\n        XMSDK.getdataStr({\n            url: UrlConst.kingPaoProgress,\n            onSuccess: res => {\n                if (res.code === 0) {\n                    if (res.data && res.data.status == 1 && res.data.sign) {\n                        AssistCtr.showToastTip(`今日打卡成功!明日再来哦~`);\n                    }\n                    else if (res.data && res.data.status == 2 && util.isOkSign) {\n                        AssistCtr.showToastTip(`今日已签到!明日再来哦~`);\n                    }\n                    else {\n                        this.showPage(pageTs.pageName.GameKingPaoProgress, res.data);\n                    }\n                }\n                else {\n                    if (res) {\n                        AssistCtr.showToastTip(res.message);\n                    }\n                }\n            },\n            onFail: err => {\n\n            }\n        })\n    }\n\n    /**\n     * 签到处在线奖励红包\n     */\n    showOnPrizeGetRewared(data) {\n        if (data && data.prizeRedData) {\n            this.showPage(pageTs.pageName.GameOnPrizeGetReward, data.prizeRedData);\n        }\n    }\n\n    /**\n     * 打开随机红包\n     */\n    showRandomRedPrize(data) {\n        this.showPage(pageTs.pageName.GameRandomRedPrize,data);\n    }\n\n    /**\n     * 打开合成炮塔随机红包\n     */\n    showTurretRandomRed(){\n        this.showPage(pageTs.pageName.GameTurretRandomRed);\n    }\n\n\n    /**\n     * 第一次开始游戏\n     */\n\n    FistGameStart(e){\n        this.scheduleOnce(()=>{\n            cc.game.emit(NameTs.Game_Start);\n        },.3);\n    }\n}\n"]}