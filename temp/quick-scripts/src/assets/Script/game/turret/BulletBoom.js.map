{"version":3,"sources":["assets\\Script\\game\\turret\\BulletBoom.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAEA,8CAAyC;AACzC,wCAAmC;AAE7B,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAAwC,8BAAY;IAApD;QAAA,qEA+DC;QA3DW,WAAK,GAAgB,IAAI,CAAC;;IA2DtC,CAAC;IAvDG,0BAAK,GAAL;IAEA,CAAC;IAED,SAAS;IACT,yBAAI,GAAJ,UAAK,IAAI;QAAT,iBA0BC;QAtBG,IAAI,CAAC,UAAU,GAAG,cAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAEhD,IAAI,WAAW,GAAU,cAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,GAAC,GAAG,GAAC,cAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,KAAK,GAAC,WAAW,GAAC,IAAI,CAAC,EAAE,CAAC;QACvG,IAAI,UAAU,GAAW,cAAI,CAAC,UAAU,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;QAE1D,IAAG,CAAC,UAAU,EAAC;YACX,IAAI,CAAC,WAAW,EAAE,CAAC;YACnB,OAAM;SACT;QAED,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,WAAW,EAAE,CAAC,CAAC;QAChD,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAG1B,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;QAE7C,0BAA0B;QAC1B,0BAA0B;QAC1B,QAAQ;QACR,IAAI,CAAC,KAAK,CAAC,mBAAmB,CAAC;YAC3B,KAAI,CAAC,WAAW,EAAE,CAAC;QACvB,CAAC,CAAC,CAAC;IACP,CAAC;IAED;;;OAGG;IACH,8BAAS,GAAT,UAAU,IAAW;QAArB,iBAUC;QATG,IAAI,IAAI,GAAU,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC;QACvC,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,eAAe,GAAC,IAAI,GAAC,QAAQ,GAAC,IAAI,EAAC,EAAE,CAAC,YAAY,EAAE,UAAC,KAAK,EAAE,EAAkB;YAC5F,IAAG,KAAK,EAAC;gBACL,OAAO;aACV;YACD,KAAI,CAAC,KAAK,CAAC,YAAY,GAAG,EAAE,CAAC;YAC7B,KAAI,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,EAAC,WAAW,EAAC,KAAK,CAAC,CAAC;QACjD,CAAC,CAAC,CAAC;IAEP,CAAC;IAED,UAAU;IACV,gCAAW,GAAX;QACI,MAAM;QACN,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,gBAAM,CAAC,uBAAuB,EAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC3D,CAAC;IAzDD;QADC,QAAQ,CAAC,EAAC,IAAI,EAAC,EAAE,CAAC,QAAQ,EAAE,WAAW,EAAC,IAAI,EAAC,CAAC;6CACb;IAJjB,UAAU;QAD9B,OAAO;OACa,UAAU,CA+D9B;IAAD,iBAAC;CA/DD,AA+DC,CA/DuC,EAAE,CAAC,SAAS,GA+DnD;kBA/DoB,UAAU","file":"","sourceRoot":"/","sourcesContent":["import baseTs from \"../../base/baseTs\";\nimport { bulletInfo, gameState } from \"../../common/faceTs\";\nimport NameTs from \"../../common/NameTs\";\nimport util from \"../../util/util\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class BulletBoom extends cc.Component {\n\n\n    @property({type:sp.Skeleton ,displayName:\"爆炸\"})\n    private spine:sp.Skeleton  = null;\n\n    //子弹数据\n    private bulletData:any;\n    start () {\n\n    }\n\n    /**初始化 */\n    init(data){\n\n        \n        \n        this.bulletData = util.GetBulletData(data.type);\n        \n        let monsetrName:string = util.userData.customs.big+\"-\"+util.userData.customs.small+\"_Monster_\"+data.id;\n        let targetNode:cc.Node = util.MonsterMap.get(monsetrName);\n\n        if(!targetNode){\n            this.destroyBoom();\n            return\n        }\n\n        this.node.setPosition(targetNode.getPosition());\n        this.loadSpine(data.type);\n       \n\n        this.node.y += Number(this.bulletData.boomY);\n\n        // this.scheduleOnce(()=>{\n        //     this.destroyBoom();\n        // },5);\n        this.spine.setCompleteListener(()=>{\n            this.destroyBoom();\n        });\n    }\n\n    /**\n     * 加载龙骨\n     * @param type 类型\n     */\n    loadSpine(type:number){\n        let name:string = this.bulletData.boom;\n        cc.resources.load(\"spine/turret/\"+type+\"/boom/\"+name,sp.SkeletonData, (error, sp:sp.SkeletonData) => {\n            if(error){                                \n                return;\n            }\n            this.spine.skeletonData = sp;\n            this.spine.setAnimation(0,\"animation\",false);\n        });\n\n    }\n\n    /**回收自己 */\n    destroyBoom(){\n        //回收自己\n        cc.game.emit(NameTs.Game_Bullet_Boom_Killed,this.node);\n    }\n\n}\n"]}