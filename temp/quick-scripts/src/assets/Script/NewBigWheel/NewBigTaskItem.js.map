{"version":3,"sources":["assets\\Script\\NewBigWheel\\NewBigTaskItem.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { AssistCtr } from \"../Assist/AssistCtr\";\nimport { AdPosition } from \"../common/AdPosition\";\nimport Ajax from \"../server/ServerMgr/Ajax\";\nimport { UrlConst } from \"../server/UrlConst\";\nimport AdController from \"../server/xmsdk_cocos/AD/AdController\";\nimport XMSDK from \"../server/xmsdk_cocos/XMSDK\";\nimport soundController from \"../soundController\";\nimport TrackMgr from \"../TrackMgr/TrackMgr\";\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class NewBigTaskItem extends cc.Component {\n\n    @property(cc.Node)\n    private controller: cc.Node = null;\n\n    controllerJs: any = null\n    curNum: any = null\n    allNum: any = null\n    taskItemData\n    isClickItem\n    onLoad() {\n        this.controllerJs = this.controller.getComponent(\"NewBigWheelController\");\n    }\n\n    start() {\n\n    }\n\n    setVideoTast(curNum, allNum) {\n        let self = this;\n        self.node.getChildByName(\"btn_taskClick\").active = false;\n        self.node.getChildByName(\"btn_taskGo\").active = false;\n        self.node.getChildByName(\"btn_taskGray\").active = false;\n        self.node.getChildByName(\"New Node\").getChildByName(\"lable_taskCount\").getComponent(cc.RichText).string = `<color=#AA520D>（</c><color=#F5663F>${curNum}</color><color=#AA520D>/${allNum}）</c>`;\n        if (curNum < allNum) {\n            self.node.getChildByName(\"btn_taskGo\").active = true;\n        }\n        else {\n            self.node.getChildByName(\"btn_taskGray\").active = true;\n        }\n        this.curNum = curNum;\n        this.allNum = allNum;\n    }\n\n    clickVideoTask() {\n        let self = this;\n        if (this.curNum >= this.allNum) {\n            XMSDK.toast(\"今日已领取，请明日再来\");\n            return;\n        }\n\n        this.controllerJs.moveChouPos();\n        AdController.loadAd(AdPosition.WheelGetRestTimes, () => {\n            //广告观看完毕，关闭后\n            setTimeout(() => {\n                cc.director.emit(\"NewBigWheelPrize_againChou\", { isNewBigTaskItem: true });\n            }, 10);\n        }, () => {\n            AssistCtr.showToastTip(\"加载视频失败，请稍后！\");\n        })\n    }\n\n    setTaskItem(taskItemData) {\n        let self = this;\n\n        self.node.getChildByName(\"New Node\").getChildByName(\"lable_taskTitle\").getComponent(cc.Label).string = taskItemData.taskTitle;\n        self.node.getChildByName(\"btn_taskClick\").active = false;\n        self.node.getChildByName(\"btn_taskGo\").active = false;\n        self.node.getChildByName(\"btn_taskGray\").active = false;\n\n        if (taskItemData.buttonType == 2) {\n            self.node.getChildByName(\"btn_taskGo\").active = true;\n        }\n        else if (taskItemData.buttonType == 3) {\n            self.node.getChildByName(\"btn_taskClick\").active = true;\n        }\n        else if (taskItemData.buttonType == 4) {\n            self.node.getChildByName(\"btn_taskGray\").active = true;\n        }\n\n        self.node.getChildByName(\"New Node\").getChildByName(\"lable_taskCount\").getComponent(cc.RichText).string = `<color=#AA520D>（</c><color=#F5663F>${taskItemData.userTaskValue}</color><color=#AA520D>/${taskItemData.taskValue}）</c>`;\n        self.taskItemData = taskItemData;\n    }\n\n    clickItem() {\n        let self = this;\n        if (self.isClickItem) {\n            return;\n        }\n        self.isClickItem = true;\n        setTimeout(() => {\n            self.isClickItem = false;\n        }, 1000);\n\n        // Global.audioUtils.playClick();\n        soundController.singleton.clickAudio();\n\n        let type = self.taskItemData.taskType;\n\n        if (self.taskItemData.buttonType == 3) {\n            TrackMgr.lotto_phone_click({\n                activity_button_click: \"领取抽奖机会\",\n                activity_state:self.taskItemData.taskTitle,\n            })\n            let taskId = self.taskItemData.id;\n            XMSDK.post({\n                url: UrlConst.newBigWheel_taskCheckIn,\n                data: {\n                    id: taskId\n                },\n                onSuccess: res => {\n                    if(!this.isValid){\n                        return;\n                    }\n\n                    if (res.code === 0) {\n                        this.controllerJs.updateWinData();\n                        XMSDK.toast(\"抽奖次数+1\");\n                        this.controllerJs.moveChouPos();\n                    }\n                    else {\n                        XMSDK.toast(res.message || '网络出错~', 2.5, 1);\n                    }\n                },\n                onFail: res => {\n                    XMSDK.toast('网络出错~', 2.5, 1);\n                }\n            })\n            return;\n        }\n        else if (self.taskItemData.buttonType == 4) {\n            XMSDK.toast(\"今日已领取，请明日再来\");\n            return;\n        } else if (self.taskItemData.buttonType == 2) {\n            this.controllerJs.closePage()\n        }\n    }\n}\n"]}