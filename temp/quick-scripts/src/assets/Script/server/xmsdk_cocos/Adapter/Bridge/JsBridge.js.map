{"version":3,"sources":["assets\\Script\\server\\xmsdk_cocos\\Adapter\\Bridge\\JsBridge.js"],"names":["getJsBridge","call","method","args","cb","ret","window","dscb","cbName","JSON","stringify","_dswk","prompt","_dsbridge","console","log","callBrowser","register","name","fun","_dsf","Object","assign","page","title","url","param","encodeURIComponent","object","parse","html","getParameterByName","location","href","replace","regex","RegExp","results","exec","decodeURIComponent","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["function getJsBridge() {\n    return {\n        call: function (method, args, cb) {\n            var ret = '';\n            if (typeof args == 'function') {\n                cb = args;\n                args = {};\n            }\n            if (typeof cb == 'function') {\n                window.dscb = window.dscb || 0;\n                var cbName = 'dscb' + window.dscb++;\n                window[cbName] = cb;\n                args['_dscbstub'] = cbName;\n            }\n            args = JSON.stringify(args || {})\n\n            if (window._dswk) {\n                ret = prompt(window._dswk + method, args);\n            } else {\n                if (typeof _dsbridge == 'function') {\n                    ret = _dsbridge(method, args);\n                } else if (window._dsbridge) {\n                    ret = _dsbridge.call(method, args);\n                } else {\n                    console.log('找不到_dsbridge');\n                    callBrowser(method, args);\n                }\n            }\n            return ret;\n        },\n        register: function (name, fun) {\n            window._dsf = window._dsf || {};\n            if (typeof name == \"object\") {\n                Object.assign(window._dsf, name)\n            } else {\n                window._dsf[name] = fun;\n            }\n        },\n        page: function (title, url) {\n            this.call('launch', {\n                param: 'vipgift://com.xmiles.vipgift/web/CommonWebViewActivity?withHead=true&title=' + title + '&htmlUrl=' + encodeURIComponent(url)\n            });\n        }\n    }\n};\n\nfunction callBrowser(method, args) {\n    if (method == 'launch') {\n        const object = JSON.parse(args);\n        const param = object.param;\n        const html = getParameterByName(param, 'htmlUrl');\n        location.href = html;\n    }\n};\n\nfunction getParameterByName(url, name) {\n    name = name.replace(/[\\[]/, \"\\\\\\[\").replace(/[\\]]/, \"\\\\\\]\");\n    var regex = new RegExp(\"[\\\\?&]\" + name + \"=([^&#]*)\"),\n        results = regex.exec(url);\n    return results == null ? \"\" : decodeURIComponent(results[1]);\n};\n\nmodule.exports = getJsBridge();"]}