{"version":3,"sources":["assets\\Script\\server\\xmsdk_cocos\\Adapter\\PreviewPlatform.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import IPlatform from \"./Base/IPlatform\";\nimport { RSA } from './rsa'\nimport CommonSettingType from \"./Type/CommonSettingType\";\nimport AdConfigType from \"./Type/AdConfigType\";\nimport LaunchSdkPageType from \"./Type/LaunchSdkPageType\";\nimport { LoadAdViewConfigType, ShowAdViewConfigType } from \"./Type/AdViewConfig\";\nimport { VideoAdStatus } from \"./Type/AdStatus\";\nimport { AppInfo } from \"../Config/AppInfo\";\nimport mock from \"../mock1\";\nimport PxTransUtils from \"../Utils/PxTransUtils\";\n\n/**\n * 写死的一个假的adHeader\n */\nconst ADHEADER: object = { \"prdId\": \"18800\", \"deviceId\": \"1234567890\", \"version\": \"1.9.1\", \"sysVersion\": \"9\", \"phoneType\": \"OnePlus\", \"activityChannel\": \"1\", \"currentChannel\": \"1\", \"startFrom\": \"index\", \"appVersion\": \"v1.0.0\", \"appVersionCode\": \"23\", \"versionCode\": \"91\", \"platform\": \"android\", \"service\": \"xkX2Ab1P3KuI214V\", \"signature\": \"52dde4320c06f616da2ad9558e506ad2\", \"timestamp\": 1584628717084 };\nlet PHEAD: any = null;\nif (AppInfo.isLocal) {\n    PHEAD = mock.PHEAD;\n}\n/**\n * cocos直接点击那个预览按钮，在浏览器打开\n */\nexport default class PreviewPlatform implements IPlatform {\n    getNavigationBarHeight(): string {\n        return \"\"\n    }\n    getScreenWidth(): string {\n        return \"\"\n    }\n    getScreenHeight(): string {\n        return \"\"\n    }\n    showPrivacyPolicy() {\n\n    }\n    showUserProtocol() {\n\n    }\n    openWebUrl() {\n\n    }\n    authWechat() {\n\n    }\n    requestAlipayAuth() {\n\n    }\n\n    /**\n     * 与SDK交互通信\n     * @param funcName 方法名\n     * @param params 参数\n     * @param callback 回调\n     */\n    call(funcName: string, params?: any, callback?: Function) {\n        console.log('模拟调用' + funcName);\n    }\n\n    getAdheadString(): string {\n        return JSON.stringify(ADHEADER);\n    }\n\n    getPheadString(): string {\n        return JSON.stringify(PHEAD);\n    }\n    toNewIdiomAnswer() { }\n    openCalendarPermit() {\n        console.error(\"调用客户端方法，打开日历权限弹窗\")\n    }\n    checkCalendarPermit() {\n        console.error(\"调用客户端方法，获取日历权限状态\")\n    }\n    setCalendarPrompt(fuc) {\n        console.error(\"调用客户端方法，开启或关闭日历\" + fuc)\n    }\n    toScratchCard() { }\n    enableOnResumeOnPause(args: CommonSettingType) {\n    }\n\n    enableUploadAdSdkStatistic(args: CommonSettingType) {\n    }\n\n    hideAdView(adConfig: AdConfigType) {\n    }\n\n    launchSceneSdkPage(launchParams: LaunchSdkPageType) {\n        cc.log('模拟了通用跳转');\n    }\n\n    loadAdSdk(adConfig: AdConfigType) {\n        adConfig.status = VideoAdStatus.LOAD_SUCCESS;\n        window[\"sdkAdListener\"] && window[\"sdkAdListener\"](adConfig);\n    }\n\n    loadAdView(adConfig: LoadAdViewConfigType, callback?: Function) {\n    }\n\n    showAd(adConfig: AdConfigType) {\n        adConfig.status = VideoAdStatus.ON_SHOW;\n        window[\"sdkAdListener\"] && window[\"sdkAdListener\"](adConfig);\n\n        setTimeout(() => {\n            adConfig.status = VideoAdStatus.ON_CLOSE;\n            window[\"sdkAdListener\"] && window[\"sdkAdListener\"](adConfig);\n\n            adConfig.status = VideoAdStatus.ON_REWARD_FINISH;\n            window[\"sdkAdListener\"] && window[\"sdkAdListener\"](adConfig);\n        }, 1000)\n    }\n\n    showAdView(adConfig: ShowAdViewConfigType) {\n    }\n\n    signRequestBody(args: string, callback: Function) {\n        //之前ssl生成的公钥，复制的时候要小心不要有空格\n        var pubKey = '-----BEGIN PUBLIC KEY-----MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAxx8PSMcw9ENErZG8quNJ3NaUgBzCuMZZFDTSCdQ9Z/C6ts0v4SGqAgzyF1BFdvEhiIikUMdkcVlhWO+Hvm6Kp+CC91R1S8oQ8GKX5EhbbN2z+NQE+gUc4r0OwAgm0cPLS65kH15rVUszZTnsBn48j+JrbkPCJHozdQuASQwLBhKAOch/gFdA0agMESo75a4tnvqn8u4INfeT2HQhVF5EEkqUGi1TOBHTpuqRZrNojkv0mUMrghuOJ9IniAb2LR8TpL7lHNHex8s0Mms4EZEHYnpuINqvZIqXfCOWeP+u5SuUIxPGXpCAA+OSrCju6Pi8Ng43xvxzH5uS5TeihkuVjQIDAQAB-----END PUBLIC KEY-----';\n        let pub = RSA.KEYUTIL.getKey(pubKey);\n        let enc = RSA.KJUR.crypto.Cipher.encryptLong2(args, pub);\n        callback(enc);\n    }\n\n    getNetworkState(callback: Function) {\n        callback(\"WIFI\");\n    }\n\n    isDebug(): boolean {\n        return true;\n    }\n\n    //todo 要改\n    isTestServer(): boolean {\n        return true;\n    }\n    updateHealthValue() {\n\n    }\n    retryToken() {\n\n    }\n\n    recordLog(tag: string, content: string) {\n    }\n\n    /**\n     * 打开新人红包\n     */\n    OpenNewBirdRed(callback?: Function) {\n        cc.log('模拟打开新人红包');\n        if (callback) {\n            callback();\n        }\n    }\n\n    /**\n     * 消除时打开游戏内红包\n     * @param type (\"1 全屏广告3秒关闭 2 激励视频 看完可关闭 3 不看广告\")\n     * @param adid 全屏广告或激励视频的广告id\n     */\n    OpenGameRed(type: number, adid: number, callback?: Function) {\n        cc.log('模拟打开游戏内红包');\n        if (callback) {\n            callback();\n        }\n    }\n\n    /**\n     * 打开余额弹窗\n     * @param callback \n     */\n    OpenBalanceDialog(callback?: Function) {\n        cc.log('模拟打开余额弹窗');\n        if (callback) {\n            callback();\n        }\n    }\n\n    /**\n     * 获取用户余额\n     * @param callback \n     */\n    ReqBalance(callback: Function) {\n        var obj = { \"coin\": 0, \"coinRemain\": 0, \"earnAgain\": \"100\", \"remain\": \"0\", \"type\": 1, \"withdrawLimited\": \"100\" };\n        callback(obj);\n    }\n\n    /**\n     * 获取用户信息\n     */\n    ReqUserInfo(callback: Function) {\n        var obj = { \"awarDtime\": 0, \"awardCoin\": 0, \"balance\": 0.01, \"coinRate\": 10000, \"doubleBusinessType\": 0, \"isNewUser\": 0, \"newUserCoin\": 0, \"userCoin\": { \"coin\": 12546, \"todayCoin\": 37, \"totalAdd\": 12546 } };\n        callback(obj);\n    }\n\n    /** \n     * 展示通用弹窗\n     */\n    OpenGeneralDialog(coin: number, multiple: number, callback?: Function) {\n        //cc.log('模拟展示通用弹窗');\n        if (callback) {\n            callback();\n        }\n    }\n    /**\n     * 震动\n     * @param time 时长\n     */\n    setVibrator(time: number, callback?: Function) {\n        //cc.log('模拟已震动');\n        if (callback) {\n            callback();\n        }\n    }\n\n    /**\n    * 提交埋点\n    * @param obj 神策参数\n    * @param callback 回调\n    */\n    track(obj: any, callback?: Function) {\n        //console.log('模拟统计上报');\n        //console.log(obj);\n        if (callback) {\n            callback();\n        }\n    }\n    /**\n     * 提交预置属性\n     * @param obj 神策参数\n     * @param callback 回调\n     */\n    trackUserProperties(obj: any, callback?: Function) {\n        //cc.log('模拟统计上报');\n        //cc.log(obj);\n        if (callback) {\n            callback();\n        }\n    }\n    /**\n    * 消除启动黑屏\n    */\n    finishCocosLaunch() {\n        cc.log('模拟消除启动黑屏');\n    }\n\n    /**\n     * 更新当前无尽等级\n     * @param current_level 等级\n     * @param callback 回调\n     */\n    updateCurrentLevel(current_level: number, callback?: Function) {\n        cc.log('模拟更新当前无尽等级');\n        var obj = {\n            'current_level': current_level\n        }\n        cc.log(obj);\n        if (callback) {\n            callback();\n        }\n    }\n\n    /**\n     * 更新当前闯关等级\n     * @param current_pass_level 过关等级\n     * @param callback 回调\n     */\n    updateCurrentPassLevel(current_pass_level: number, callback?: Function) {\n        cc.log('模拟更新当前闯关等级');\n        var obj = {\n            'current_pass_level': current_pass_level\n        }\n        cc.log(obj);\n        if (callback) {\n            callback();\n        }\n    }\n    /**\n     * 获取刘海高度\n     */\n    getLiuHaiHeight() {\n        cc.log('获取刘海高度');\n        let result = 0;\n        if (PxTransUtils.getScreenHeight() / PxTransUtils.getScreenWidth() > 1.78) {\n            result = 50;\n        }\n\n        return String(result);\n    }\n    /**\n     * 获取刘海高度\n     */\n    exitGame() {\n        console.log('模拟退出游戏');\n    }\n    /**\n     * 设置是否监听虚拟键点击事件\n     */\n    enableOnBackpressed(enable: boolean) {\n        cc.log('模拟设置监听虚拟键-' + enable);\n    }\n    /**\n     * 获取网络状态\n     * @returns {boolean} false无网络\n     */\n    isNetworkConnected() {\n        return navigator.onLine;\n    }\n    notifyConfig() { }\n\n    showCustomerService() {\n\n    }\n\n    cancelAccount(){\n        \n    }\n\n    downloadNewVersionApk() {\n\n    }\n\n    hasNewVersionReward() {\n\n    }\n\n    resetNewVersionReward() {\n\n    }\n\n    getNewVersionName() {\n\n    }\n\n    isNotificationEnabled() {\n\n    }\n\n    startNotificationSetting() {\n\n    }\n}"]}