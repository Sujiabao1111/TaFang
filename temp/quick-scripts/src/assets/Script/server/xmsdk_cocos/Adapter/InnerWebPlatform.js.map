{"version":3,"sources":["assets\\Script\\server\\xmsdk_cocos\\Adapter\\InnerWebPlatform.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import IPlatform from \"./Base/IPlatform\";\nimport * as JsBridge from './Bridge/JsBridge';\nimport CommonSettingType from \"./Type/CommonSettingType\";\nimport LaunchSdkPageType from \"./Type/LaunchSdkPageType\";\nimport AdConfigType from \"./Type/AdConfigType\";\nimport {LoadAdViewConfigType, ShowAdViewConfigType} from \"./Type/AdViewConfig\";\nimport { AppInfo } from \"../Config/AppInfo\";\nimport mock from \"../mock1\";\n\n/**\n * 应用内的浏览器\n */\nexport default class InnerWebPlatform implements IPlatform {\n\n    /**\n     * 与SDK交互通信\n     * @param funcName 方法名\n     * @param params 参数\n     * @param callback 回调\n     */\n    call(funcName: string, params?: any, callback?: Function) {\n        return JsBridge.call('call', {'methodName':funcName, 'args': params}, callback);\n    }\n\n    // 调用方法\n    static jsCall(methodName, args?, cb?):any{\n        return JsBridge.call('call', {'methodName':methodName, 'args': args}, cb);\n    }\n\n    static getQueryString(name): string {\n        var reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\");\n        var r = window.location.search.substr(1).match(reg);\n        if (r != null) return unescape(r[2]);\n        return null;\n    }\n\n    getAdheadString(): string {\n        let adHead = InnerWebPlatform.jsCall('createRequestHeaderStr', {});\n        if (!adHead || adHead == \"\") {\n            let adHead = InnerWebPlatform.getQueryString(\"adhead\");\n            if (adHead) {\n                console.warn(\"链接上带adhead参数\");\n            } else {\n                console.warn(\"交互方法拿不到adhead --- 链接上没有带adhead参数\");\n            }\n        }\n        return adHead;\n    }\n\n    getPheadString(): string {\n        if(AppInfo.isLocal){\n            return mock.PHEAD;\n        }\n        return InnerWebPlatform.jsCall(\"getPheadString\", {});\n    }\n\n    enableOnResumeOnPause(args: CommonSettingType) {\n        InnerWebPlatform.jsCall('enableOnResumeOnPause', args);\n    }\n\n    hideAdView(adConfig: AdConfigType) {\n        InnerWebPlatform.jsCall('hideAdView', adConfig);\n    }\n\n    loadAdView(adConfig: LoadAdViewConfigType, callback?: Function) {\n        InnerWebPlatform.jsCall('loadAdView', adConfig);\n    }\n\n    showAdView(adConfig: ShowAdViewConfigType) {\n        InnerWebPlatform.jsCall('showAdView', adConfig);\n    }\n\n    loadAdSdk(adConfig: AdConfigType) {\n        InnerWebPlatform.jsCall('loadAdSdk', adConfig, () => {});\n    }\n\n    showAd(adConfig: AdConfigType) {\n        InnerWebPlatform.jsCall('showAd', adConfig);\n    }\n\n    enableUploadAdSdkStatistic(args: CommonSettingType) {\n        InnerWebPlatform.jsCall('enableUploadAdSdkStatistic', args);\n    }\n\n    launchSceneSdkPage(args: LaunchSdkPageType) {\n        InnerWebPlatform.jsCall('launchSceneSdkPage', args);\n    }\n\n    signRequestBody(args: string, callback: Function) {\n        // cc.log(\"args : \" + args)\n        InnerWebPlatform.jsCall(\"signRequestBody\", {data : args}, (result)=>{\n            callback(JSON.parse(result).data);\n        });\n    }\n\n    getNetworkState(callback: Function) {\n        InnerWebPlatform.jsCall(\"getNetworkState\", {}, (state)=>{\n            callback(state);\n        });\n    }\n\n    //todo 要改\n    isDebug(): boolean {\n        return true;\n    }\n\n    //todo 要改\n    isTestServer(): boolean {\n        return false;\n    }\n\n    recordLog(tag: string, content: string) {\n    }\n\n    /**\n     * 打开新人红包\n     */\n    OpenNewBirdRed(callback?: Function){\n        InnerWebPlatform.jsCall('OpenNewBirdRed');\n    }\n\n    /**\n     * 消除时打开游戏内红包\n     * @param type (\"1 全屏广告3秒关闭 2 激励视频 看完可关闭 3 不看广告\")\n     * @param adid 全屏广告或激励视频的广告id\n     */\n    OpenGameRed(type: number, adid: number, callback?: Function){\n        var obj = {\n            'type': type,\n            'adid': adid,\n        }\n        InnerWebPlatform.jsCall('OpenGameRed', obj);\n    }\n\n    /**\n     * 打开余额弹窗\n     * @param callback \n     */\n    OpenBalanceDialog(callback: Function){\n        InnerWebPlatform.jsCall('OpenBalanceDialog', {}, callback);\n    }\n\n    /**\n     * 获取用户余额\n     * @param callback\n     */\n    ReqBalance(callback: Function){\n        InnerWebPlatform.jsCall('ReqBalance', {}, callback);\n    }\n\n    /**\n     * 获取用户信息\n     */\n    ReqUserInfo(callback: Function){\n        InnerWebPlatform.jsCall('ReqUserInfo', {}, callback);\n    }\n\n    /** \n     * 展示通用弹窗\n     */\n    OpenGeneralDialog(coin: number, multiple: number, callback?: Function){\n        var obj: any = {\n            'coin': coin,\n            'multiple': multiple,\n        };\n\n        if (coin >= 200){\n             obj.exchangeMoney = coin / 10000.0;\n        }\n        \n        InnerWebPlatform.jsCall('ReqUserInfo', obj, callback);\n    }\n\n    /**\n     * 震动\n     * @param time 时长\n     */\n    setVibrator(time: number, callback?: Function){\n        var obj = {\n            'time': time,\n        }\n        InnerWebPlatform.jsCall('setVibrator', obj, callback);\n    }\n\n    /**\n     * 提交埋点\n     * @param obj 神策参数\n     * @param callback 回调\n     */\n    track(obj:any, callback?: Function){\n        InnerWebPlatform.jsCall('track', obj, callback);\n    }\n    /**\n     * 提交预置属性\n     * @param obj 神策参数\n     * @param callback 回调\n     */\n    trackUserProperties(obj:any, callback?: Function){\n        InnerWebPlatform.jsCall('trackUserProperties', obj, callback);\n    }\n\n    /**\n     * 消除启动黑屏\n     */\n    finishCocosLaunch(){\n        InnerWebPlatform.jsCall('finishCocosLaunch');\n    }\n\n    /**\n     * 更新当前无尽等级\n     * @param current_level 等级\n     * @param callback 回调\n     */\n    updateCurrentLevel(current_level: number, callback?: Function){\n        var obj = {\n            'current_level': current_level\n        }\n        InnerWebPlatform.jsCall('updateCurrentLevel', obj, callback);\n    }\n\n    /**\n     * 更新当前闯关等级\n     * @param current_pass_level 过关等级\n     * @param callback 回调\n     */\n    updateCurrentPassLevel(current_pass_level:number, callback?: Function){\n        var obj = {\n            'current_pass_level': current_pass_level\n        }\n        InnerWebPlatform.jsCall('updateCurrentPassLevel', obj, callback);\n    }\n    /*\n     * 获取刘海高度\n     */\n    getLiuHaiHeight(): string {\n        return InnerWebPlatform.jsCall(\"getLiuHaiHeight\", {});\n    }\n    /**\n     * 退出游戏\n     */\n    exitGame() {\n        InnerWebPlatform.jsCall(\"exitGame\", {});\n    }\n    /**\n     * 设置是否监听虚拟键点击事件\n     */\n    enableOnBackpressed(enable: boolean) {\n        var obj = {\n            'enable': enable\n        }\n        InnerWebPlatform.jsCall('enableOnBackpressed', obj, null);\n    }\n    /**\n     * 获取网络状态\n     * @returns {boolean} false无网络\n     */\n    isNetworkConnected(){\n        return InnerWebPlatform.jsCall(\"isNetworkConnected\", {});\n    }\n    notifyConfig(){}\n}"]}