{"version":3,"sources":["assets\\Script\\server\\xmsdk_cocos\\AD\\AdController.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["/*\n * @Descripttion: \n * @version: \n * @Author: mies\n * @Date: 2021-01-27 11:50:30\n * @LastEditors: mies\n * @LastEditTime: 2021-02-08 10:23:26\n */\nimport { AdPosition } from \"../../../common/AdPosition\";\nimport NameTs from \"../../../common/NameTs\";\nimport pageTs from \"../../../common/pageTs\";\nimport util from \"../../../util/util\";\nimport XMSDK from \"../XMSDK\";\nimport { AdUtil } from \"./AdUtil\";\nimport { AdviewUtil } from \"./AdviewUtil\";\n\nexport default class AdController {\n\n    static AD_CODE = {\n        LOAD_SUCCESS: 1,//加载成功\n        LOAD_FAIL: 2,//加载失败\n        CLICK_AD: 3,//点击成功\n        SHOW_SUCCESS: 4,//显示成功\n        SHOW_FAIL: 5,//显示失败\n        CLOSE_AD: 6,//关闭\n        REWARD_SUCCESS: 9,//奖励成功\n    }\n\n    //普通广告\n    static loadAd(position: number, callback: Function, failback?: Function) {\n        console.log(position,'播放视频')\n        if (true) {\n            callback && callback()\n            return\n        }\n        cc.game.emit(NameTs.Game_Pop_Open, pageTs.pageName.GameAdLoading);\n        AdUtil.loadAd(position, (res) => {            \n            console.log(\"检查\", JSON.stringify(res), position)\n            if (AdUtil.isViewFinished(res) && res.position == position) {\n                setTimeout(() => {\n                    console.log(\"播放视频广告成功\");\n                    util.advertising_num++;\n                    XMSDK.trackUserProperties({\n                        coin_balance: util.advertising_num,\n                    });\n                    cc.game.emit(NameTs.Game_SavingPost_AddCoin);\n                    callback && callback()\n                }, 200);\n            }\n            else if(res.status == AdController.AD_CODE.LOAD_FAIL){                \n                failback && failback();\n            }\n        })\n    }\n    static loadInsertAd(position: number, callback: Function) {\n        if (true) {\n            callback && callback()\n            return\n        }\n        cc.game.emit(NameTs.Game_Pop_Open, pageTs.pageName.GameAdLoading);\n        AdUtil.loadAd(position, (res) => {\n            // console.log(\"接收loadAd\", res)\n            setTimeout(() => {\n                console.log(\"检查\", res, position)\n                if (AdUtil.isViewFinished(res, true) && res.position == position) {\n                    console.log(\"播放插屏广告成功\")\n                    callback && callback()\n                }\n            }, 200);\n\n        })\n    }\n    static loadInfoAd(position: number, adBoxWidth: number, adBox: cc.Node, isGdtMinAd = false) {\n        console.log(\"asfasfas11\"+position)\n        if (true) {\n            return\n        }\n        console.log(\"调用loadInfoad:\" + position)\n        // cc.game.emit(NameTs.Game_Pop_Open, pageTs.pageName.GameAdLoading);\n        AdviewUtil.loadAd(position, adBoxWidth, adBox, isGdtMinAd)\n    }\n    static hideInfoAd(position) {\n        AdviewUtil.hideAd(position)\n    }\n    static showAd(position: number) {\n        AdUtil.showAd(position)\n    }\n    /**预加载视频或者插屏 */\n    static preVideoAd(position: number) {\n        AdUtil.loadAdVideo(position)\n    }\n    /**预加载信息流 */\n    static preViewAd(position: number) {\n        let adBoxWidth:number = 636 // 一般固定为636\n        AdviewUtil.loadPreAd(position,adBoxWidth)\n        console.log(\"asfasfas22\"+position)\n    }\n\n}\n"]}