{"version":3,"sources":["assets\\Script\\server\\xmsdk_cocos\\AD\\AdUtil.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { AdPosition } from '../../../common/AdPosition';\nimport NameTs from '../../../common/NameTs';\nimport { UrlConst } from '../../UrlConst';\nimport PlatformFactory from '../Adapter/PlatformFactory';\nimport { FeedAdStatus, VideoAdStatus } from '../Adapter/Type/AdStatus';\nimport PxTransUtils from '../Utils/PxTransUtils';\nimport XMSDK from '../XMSDK';\nimport { AdviewUtil } from './AdviewUtil';\n\n/**\n * 激励视频广告工具库\n */\nexport namespace AdUtil {\n    export let hasInit: Boolean = false;\n\n    export let adLoad: object = {};              //存放load过的广告的组\n\n    export let adReady: object = {};             //广告是否准备好的组\n\n    export let adLoading: object = {};           // 广告是否在加载中\n\n    export let adloadPre: object = {};           //是否为预加载\n\n    export let adListener: object = {};          //存放广告监听回调的组\n\n    export let currentPosition: number = 0;      //当前播放的广告位\n\n    export let inserAdIsPlay:object = {};       //提前检查插屏广告是否播放\n\n    export let takeOverAd: object = {};\n    export let isPreAd: object = {};\n\n    export interface RES {\n        position: any,\n        currentPosition: number,\n        status: number,\n    };\n    export const AD_CODE = {\n        LOAD_SUCCESS: 1,//加载成功\n        LOAD_FAIL: 2,//加载失败\n        CLICK_AD: 3,//点击成功\n        SHOW_SUCCESS: 4,//显示成功\n        SHOW_FAIL: 5,//显示失败\n        CLOSE_AD: 6,//关闭\n        REWARD_SUCCESS: 9,//奖励成功\n    }\n    export function init() {\n        if (AdUtil.hasInit) {\n            return;\n        }\n        PlatformFactory.Ins.enableUploadAdSdkStatistic({ enable: true });\n        window[\"sdkAdListener\"] = (res: AdUtil.RES) => {\n            if (AdUtil.takeOverAd[res.position]) {\n                typeof AdUtil.adListener[res.position] == 'function' && AdUtil.adListener[res.position](res);\n                return;\n            }\n            res.position = +res.position;\n            res.currentPosition = +res.position;\n\n            console.log(\"广告状态\", res.status);\n\n            //广告加载成功了--1, 加载失败了--2, 广告点击了--3, 广告展示--4, 展示失败--5, 广告关闭了--6, 可以获取奖励了--9\n            switch (res.status) {\n                case 1:\n                    AdUtil.adReady[res.position] = true;\n                    AdUtil.adLoading[res.position] = false;\n                    console.log(\"加载广告成功\" + res.position)\n                    if (!AdUtil.adloadPre[res.position]) {\n                        AdUtil.showAd(+res.position);\n                    } else {\n                        if (AdUtil.isPreAd[res.position]) {\n                            AdUtil.showAd(+res.position);\n                        }\n                        AdUtil.isPreAd[res.position] = false\n                    }\n\n                    break;\n                case 2:\n                    console.log(\"加载广告失败\" + res.position)\n                    AdUtil.adReady[res.position] = false;\n                    AdUtil.adLoading[res.position] = false;                    \n                    if (AdPosition && AdPosition.AppExposure[res.position]) {\n                        //统计广告展示失败\n                        let AppExposurePostion = AdPosition.AppExposure[res.position];\n                        // XMSDK.track({\n                        //     eventName: SAConst.AppSceneAdResult,\n                        //     props: {\n                        //         cs_app_ad_type: AppExposurePostion,\n                        //         app_adstatus: 0\n                        //     }\n                        // });\n                    }                    \n                    break;\n                case 6:\n                    AdUtil.adLoading[res.position] = false;\n                    // 解决插屏广告关闭之后调起虚拟按键\n                    // CMbridge.cocosFinishAdClose();\n                    break;\n                case 5:\n                case 4:\n                    if (AdPosition && AdPosition.AppExposure[res.position]) {\n                        let AppExposurePostion = AdPosition.AppExposure[res.position];\n                        // XMSDK.track({\n                        //     eventName: SAConst.AppSceneAdResult,\n                        //     props: {\n                        //         cs_app_ad_type: AppExposurePostion,\n                        //         app_adstatus: 1\n                        //     }\n                        // });\n\n                    }\n                case 3:\n                    if (AdPosition && AdPosition.AppExposure[res.position]) {\n                        //统计广告点击\n                        // XMSDK.track({\n                        //     eventName: SAConst.AppExposureClick,\n                        //     props: {\n                        //         app_exposure_address: AdPosition[\"AppExposure\"][res.position]\n                        //     }\n                        // });\n                    }\n\n                case 9:\n\n                    AdUtil.adLoading[res.position] = false;\n                    break;\n                default:\n\n                    break;\n            }\n            cc.game.emit(NameTs.Close_AdLoading);\n\n            let tempRes = JSON.stringify(res);\n            // let parseRes = JSON.parse(tempRes);\n            // AdUtil.adListener[parseRes.position] && AdUtil.adListener[parseRes.position](parseRes);\n            setTimeout(() => {\n                let parseRes = JSON.parse(tempRes);\n                typeof AdUtil.adListener[parseRes.position] == 'function' && AdUtil.adListener[parseRes.position](parseRes);\n            }, 200);\n        }\n\n        if (cc.sys.isNative) {                        \n            window[\"SystemInterface\"].sdkAdListener = (res) => {                        \n                window[\"sdkAdListener\"](JSON.parse(res));\n            }\n        }\n\n\n        AdUtil.hasInit = true;\n    }\n\n    /**\n     * @msg: 加载激励视频\n     * @param position 广告位\n     * @param callback 广告监听回调\n     * @param force 是否强制加载广告\n     */\n    export function loadAd(position: number, callback?: any, force = true, isTakeOver = false) {\n        if (AdUtil.adLoading[position]) {\n            return false;\n        }\n        // setTimeout(() => {\n        console.log(\"开始加载广告\" + position)\n        if (position > 0 && (force || !AdUtil.adLoad[position])) {\n            AdUtil.adLoading[position] = true;\n            AdUtil.adLoad[position] = true;\n            AdUtil.takeOverAd[position] = isTakeOver;\n            callback && (AdUtil.adListener[position] = callback);\n            if (AdUtil.adloadPre[position]) {\n                if (AdUtil.adReady[position] == true) {//已准备\n                    AdUtil.showAd(position);\n                    delete AdUtil.adloadPre[position];\n                    console.log(\"播放预加载广告成功\" + position)\n                } else if (AdUtil.adReady[position] == false) {\n                    console.log(\"播放预加载广告失败转普通加载\" + position)\n                    delete AdUtil.adloadPre[position];\n                    PlatformFactory.Ins.loadAdSdk({\n                        position: position,\n                        status: VideoAdStatus.LOAD_SUCCESS,\n                    });\n                } else {\n                    AdUtil.isPreAd[position] = true;\n                    console.log(\"预加载广告尚未加载\", AdUtil.isPreAd[position])\n                }\n            } else {\n                console.log(\"普通加载广告\" + position)\n                PlatformFactory.Ins.loadAdSdk({\n                    position: position,\n                    status: VideoAdStatus.LOAD_SUCCESS,\n                });\n            }\n\n        }\n        // }, 100);\n\n    }\n\n    /**\n     * @msg: 显示广告\n     * @param {number} position 广告位\n     */\n    export function showAd(position: number) {\n        if (AdUtil.adReady[position]) {\n            delete AdUtil.adReady[position];\n            console.log(\"展示广告,准备状态重置\" + position)\n            AdUtil.currentPosition = position;\n            let showAdTips = false//红包特殊处理\n            console.log(\"播放广告时tip\", showAdTips)\n            PlatformFactory.Ins.showAd({\n                position: position,\n                status: FeedAdStatus.ON_SHOW,\n                showAdTips: showAdTips,\n                adTips: \"观看完整视频领取奖励\"\n            });\n        }\n    }\n    export function isViewFinished(res: AdUtil.RES, isClose: boolean = false) {\n        // 获取到奖励的关闭\n        let result = res.status == AD_CODE.REWARD_SUCCESS;\n        if (result) {\n            console.log(\"统计接口，上报后台广告观看完毕\", res.status);\n           \n        }\n        if (!window['advertising_num']) {\n            window['advertising_num'] = 1;\n        } else {\n            window['advertising_num'] += 1;\n        }\n        XMSDK.trackUserProperties({\n            advertising_num: window['advertising_num'] + '',\n            advertis_num: window['advertising_num']\n        })\n        return result;\n    }\n    export function isViewError(res: AdUtil.RES) {\n        return res.status == AD_CODE.LOAD_FAIL || res.status == AD_CODE.SHOW_FAIL\n    }\n    /**\n     * 全屏广告加载完成，包括加载成功或失败。\n     * @param res \n     */\n    export function finishFullVideo(res: AdUtil.RES) {\n        return res.status == AD_CODE.LOAD_FAIL || res.status == AD_CODE.SHOW_FAIL || res.status == AD_CODE.CLOSE_AD\n    }\n    /**\n     * 预加载视频广告\n     */\n    export function loadAdVideo(position: number) {\n        console.log(\"预加载广告\" + position)\n        AdUtil.isPreAd[position] = false;\n        AdUtil.adloadPre[position] = true;\n        PlatformFactory.Ins.loadAdSdk({\n            position: position,\n            status: VideoAdStatus.LOAD_SUCCESS\n        });\n    }\n    \n}"]}