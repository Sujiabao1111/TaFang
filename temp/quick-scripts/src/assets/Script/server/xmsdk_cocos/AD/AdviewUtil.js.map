{"version":3,"sources":["assets\\Script\\server\\xmsdk_cocos\\AD\\AdviewUtil.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import PxTransUtils from \"./../Utils/PxTransUtils\";\nimport { ShowAdViewConfigType } from \"./../Adapter/Type/AdViewConfig\";\nimport PlatformFactory from '../Adapter/PlatformFactory';\nimport { FeedAdStatus } from \"../Adapter/Type/AdStatus\";\nimport NameTs from \"../../../common/NameTs\";\nimport { AssistCtr } from \"../../../Assist/AssistCtr\";\nexport namespace AdviewUtil {\n    export let hasInit: Boolean = false;\n\n    export let retry = 3;\n\n    export let defHeight = 220;              // 应客户端要求，广点通广告获取不到高度，给默认值，小的90，大的220\n\n    export let adBoxSet: object = {};        // 存放对应广告的容器的组\n\n    export let adBoxWidthSet: object = {};   // 存放对应广告位的容器的宽度\n\n    export let adSet: object = {};           // 存放对应广告返回值RES\n\n    export let adHideSet: object = {};       // 存放是否点击隐藏信息流\n\n    export let adStatusSet: object = {};      //存放状态码\n\n    export let adloadPre: object = {};        //存放是否广告缓存\n    export let StatusCode = {\n        loading: 1,//没有好\n        loadSucc: 2,//加载成功\n        loadFail: 3,//加载失败\n        confirmHeight: 4,//高度确定了\n    }\n    export interface RES {\n        position: any,    //返回的广告位\n        status: number,   //返回的广告状态\n        width: number,    //返回的广告宽度，客户端原生\n        height: number,   //返回的广告高度，客户端原生\n    };\n\n    export function init() {\n        if (AdviewUtil.hasInit) {\n            return;\n        }\n        window[\"adViewListener\"] = (res: AdviewUtil.RES) => {\n            console.info('adViewUtil:' + JSON.stringify(res));\n            //广告加载成功了--1,加载失败了--2,广告点击了--3,广告展示--4,广告关闭了--6,高度确认了--9\n            switch (res.status) {\n                case 1:\n                    console.log(\"信息流加载成功\", res.position)\n                    AdviewUtil.retry = 3;\n                    AdviewUtil.adStatusSet[res.position] = StatusCode.loadSucc\n                    break;\n                case 2:\n                    console.log(\"信息流加载失败\", res.position)\n                    AdviewUtil.adStatusSet[res.position] = StatusCode.loadFail\n                    if (!AdviewUtil.adloadPre[res.position] && AdviewUtil.retry >= 0) {\n                        setTimeout(() => {\n                            AdviewUtil.loadAd(res.position, AdviewUtil.adBoxWidthSet[res.position], AdviewUtil.adBoxSet[res.position]);\n                            --AdviewUtil.retry;\n                        }, 1000);\n                    }\n                    break;\n                case 6:\n                    // MessageCenter.sendMessage('FAD_CLOSE_RES', res);\n                    AdviewUtil.hideAd(res.position);\n                    break;\n                case 9:\n                    console.log(\"信息流高度确定\", res.position, AdviewUtil.adBoxSet)\n                    //信息流的高度确定了\n                    AdviewUtil.adSet[res.position] = res;\n                    AdviewUtil.adStatusSet[res.position] = StatusCode.confirmHeight\n                    //这里先发出一个通知吧\n                    // MessageCenter.sendMessage('FAD_HEIGHT_OK', res);\n                    if (!AdviewUtil.adloadPre[res.position]) {\n                        AdviewUtil.showAd(res.position, AdviewUtil.adBoxSet[res.position]);\n                    }\n                    break;\n                default:\n                    break;\n            }\n            cc.game.emit(NameTs.Close_AdLoading);\n        }\n\n\n\n        if (cc.sys.isNative) {\n            window[\"SystemInterface\"].adViewListener = (res) => {\n                window[\"adViewListener\"](JSON.parse(res));\n            }\n        }\n\n        AdviewUtil.hasInit = true;\n    }\n\n    export function adViewEnable() {\n        return true;\n        // const adHead = getAdHead() ? typeof getAdHead() == 'string' ? JSON.parse(getAdHead()) : getAdHead() : {};\n        // return (utils.bIsAndroid() && adHead.versionCode >= 222) || (utils.bIsIOS() && adHead.versionCode >= 15);\n    }\n\n    export function adViewHeight(position: number) {\n        // 应客户端要求，广点通广告获取不到高度，给默认值，小的90，大的220\n        let defHeight = AdviewUtil.defHeight;\n        return AdviewUtil.adSet[position] && AdviewUtil.adSet[position].show ? (AdviewUtil.adSet[position].height || defHeight) : 0;\n    }\n\n    /**\n     * @msg: 加载信息流\n     * @param {number} position 信息流广告位id\n     * @param {number} adBoxWidth 广告位容器的宽度\n     * @param {cc.Node} adBox 广告位容器\n     * @param {boolean} isGdtMinAd 是否为广点通广告（true为大的220，false为小的90）\n     */\n    export function loadAd(position: number, adBoxWidth: number, adBox: cc.Node, isGdtMinAd = false) {\n        \n        if (true) {\n            return\n        }\n        if (isGdtMinAd) {\n            AdviewUtil.defHeight = 90;\n        }\n\n        if (position > 0) {\n            AdviewUtil.adBoxWidthSet[position] = adBoxWidth;\n            AdviewUtil.adBoxSet[position] = adBox;\n            AdviewUtil.adHideSet[position] = false;\n            console.log(\"宽度\", position, adBoxWidth)\n            if (AdviewUtil.adloadPre[position]) {\n                AdviewUtil.adloadPre[position] = false\n                if (AdviewUtil.adStatusSet[position] == StatusCode.loading || AdviewUtil.adStatusSet[position] == StatusCode.loadSucc) {\n                    console.log(\"预加载信息流，未确定高度\", position)\n                } else if (AdviewUtil.adStatusSet[position] == StatusCode.loadFail) {\n                    console.log(\"预加载信息流失败转普通加载\", position)\n                    AdviewUtil.adStatusSet[position] = StatusCode.loading\n                    adBoxWidth && PlatformFactory.Ins.loadAdView({\n                        position: position,\n                        width: PxTransUtils.localToNative(adBoxWidth),\n                    });\n                } else if (AdviewUtil.adStatusSet[position] == StatusCode.confirmHeight) {\n                    console.log(\"预加载信息流，已确定高度，直接播放\", position)\n                    AdviewUtil.showAd(position, AdviewUtil.adBoxSet[position], true);\n                }\n            } else {\n                console.log(\"普通加载信息流\", position)\n                AdviewUtil.adStatusSet[position] = StatusCode.loading\n                adBoxWidth && PlatformFactory.Ins.loadAdView({\n                    position: position,\n                    width: PxTransUtils.localToNative(adBoxWidth),\n                });\n            }\n        }\n    }\n    export function loadPreAd(position: number, adBoxWidth: number) {\n        console.log(\"开始预加载信息流\", position)\n        if(AdviewUtil.adloadPre[position]){\n            console.log(\"已经有预加载好的信息流\")\n            return\n        }\n        if(AdviewUtil.adStatusSet[position] == StatusCode.loading){\n            console.log(\"提前调用了加载信息流方法\")\n            return\n        }\n        AdviewUtil.adloadPre[position] = true\n        AdviewUtil.adStatusSet[position] == StatusCode.loading\n        adBoxWidth && PlatformFactory.Ins.loadAdView({\n            position: position,\n            width: PxTransUtils.localToNative(adBoxWidth),\n        });\n    }\n    export function preShowAd(position: number) {\n        let res = AdviewUtil.adSet[position];\n        res && (res.show = true);\n    }\n\n    /**\n     *  改进了\n     * @param position 广告位\n     * @param adBox 广告的容器\n     * @returns {boolean}\n     */\n    export function showAd(position: number, adBox: any, isPre: boolean = false): boolean {\n        console.log(\"展现信息流1\"+position);\n        if (AdviewUtil.adHideSet[position]) {\n            AdviewUtil.adSet[position] = null;\n            return false;\n        }\n        console.log(\"展现信息流2\"+position);\n        let defHeight = AdviewUtil.defHeight;\n        let res = AdviewUtil.adSet[position];\n\n        if (res && adBox) {\n            let height = res.height ? res.height : defHeight;\n            let localHeight = PxTransUtils.nativeToLocal(height);\n\n            try {\n                //这里延迟一下，有可能有的节点上面修改了高度，还没反应过来\n                let delayTime = isPre ? 800 : 200 // 预加载延迟久点\n                adBox && (adBox.height = localHeight);\n                adBox && adBox.parent && adBox.parent.getComponent(cc.Layout) && (adBox.parent.getComponent(cc.Layout).updateLayout())\n                console.log(\"信息流高度，适配前\" + adBox.y, position)\n                setTimeout(() => {\n                    try {\n                        adBox && adBox.parent && adBox.parent.getComponent(cc.Layout) && (adBox.parent.getComponent(cc.Layout).updateLayout())\n                        let vec2 = adBox.convertToWorldSpace(cc.v2(0, 0));\n                        let nativeY = cc.view.getFrameSize().height - height - PxTransUtils.localToNative(vec2.y);\n                        console.log(\"信息流高度，适配后\" + adBox.y, position)\n                        let param: ShowAdViewConfigType = {\n                            position: res.position,\n                            width: res.width,\n                            x: (AdviewUtil.getDeviceWidth() - res.width) / 2,\n                            y: nativeY\n                        };\n\n                        console.info('adViewUtil:showAd_param:' + JSON.stringify(param));\n                        PlatformFactory.Ins.showAdView(param);\n                        res.show = true;\n                    } catch (error) {\n                        console.log(\"转盘世界坐标\", JSON.stringify(error))\n                    }\n\n                }, delayTime);\n\n            } catch (e) {\n\n            }\n            return true;\n        }\n\n        return false;\n    }\n\n    /**\n     * @msg: 隐藏信息流\n     */\n    export function hideAd(position: number) {\n        if (position > 0) {\n            if (AdviewUtil.adBoxSet[position]) {\n                AdviewUtil.adBoxSet[position].height = 0;\n            }\n            AdviewUtil.adHideSet[position] = true;\n            AdviewUtil.adSet[position] = null;\n            AdviewUtil.adBoxSet[position] = null;\n            PlatformFactory.Ins.hideAdView({ position: position, status: FeedAdStatus.ON_CLOSE })\n        }\n        \n    }\n\n    export function updateElementHeight(node, height) {\n        try {\n            if (cc.sys.isNative) {\n                node && (node.height = height);\n            } else {\n                node && (node.height = height * 2);\n            }\n        } catch (ignore) { }\n    }\n\n    export function getDeviceWidth() {\n        return cc.view.getFrameSize().width || window.innerWidth || window.outerWidth || 360;\n    }\n\n    export function getDeviceHeight() {\n        return cc.view.getFrameSize().height || window.innerHeight || window.outerHeight || 677;\n    }\n}"]}