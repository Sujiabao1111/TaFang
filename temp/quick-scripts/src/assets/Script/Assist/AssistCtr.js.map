{"version":3,"sources":["assets\\Script\\Assist\\AssistCtr.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { AdPosition } from \"../common/AdPosition\";\nimport NameTs from \"../common/NameTs\";\nimport { POINT, PROPS, REWARD_TYPE } from \"../common/PropConst\";\nimport turret from \"../game/turret/turret\";\nimport { UrlConst } from \"../server/UrlConst\";\nimport AdController from \"../server/xmsdk_cocos/AD/AdController\";\nimport { AdUtil } from \"../server/xmsdk_cocos/AD/AdUtil\";\nimport { getPhead } from \"../server/xmsdk_cocos/Config/AppInfo\";\nimport XMSDK from \"../server/xmsdk_cocos/XMSDK\";\nimport util from \"../util/util\";\n\nexport const AssistCtr = {\n\n    cloneObject(obj) {//使用json作深度拷贝\n        var cache = [];\n        var str = JSON.stringify(obj, function (key, value) {\n            if (typeof value === 'object' && value !== null) {\n                if (cache.indexOf(value) !== -1) {\n                    // 移除\n                    return;\n                }\n                // 收集所有的值\n                cache.push(value);\n            }\n            return value;\n        });\n        cache = null; // 清空变量，便于垃圾回收机制回收\n        return JSON.parse(str)\n    },\n\n    nodeToWorld(pos: cc.Vec2, node: cc.Node) {\n        return node.convertToWorldSpaceAR(pos)\n    },\n    worldToNode(worldPos: cc.Vec2, node: cc.Node) {\n        return node.convertToNodeSpaceAR(worldPos)\n    },\n\n    formatDate(date) {\n        var date: any = new Date(date);\n        var YY = date.getFullYear() + '-';\n        var MM = (date.getMonth() + 1 < 10 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1) + '-';\n        var DD = (date.getDate() < 10 ? '0' + (date.getDate()) : date.getDate());\n        var hh = (date.getHours() < 10 ? '0' + date.getHours() : date.getHours()) + ':';\n        var mm = (date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes()) + ':';\n        var ss = (date.getSeconds() < 10 ? '0' + date.getSeconds() : date.getSeconds());\n        return YY + MM + DD + \" \" + hh + mm + ss;\n    },\n\n    /**\n     * \n     * @param value 秒\n     */\n    formatSeconds(value):string {\n        let result = parseInt(value);\n        let h = Math.floor(result / 3600) < 10 ? '0' + Math.floor(result / 3600) : Math.floor(result / 3600);\n        let m = Math.floor((result / 60 % 60)) < 10 ? '0' + Math.floor((result / 60 % 60)) : Math.floor((result / 60 % 60));\n        let s = Math.floor((result % 60)) < 10 ? '0' + Math.floor((result % 60)) : Math.floor((result % 60));\n\n        let res = '';\n        //res += `${h}:`;\n        res += `${m}:`;\n        res += `${s}`;\n        return res;     \n    },\n\n    //距离24点还有多久\n    formatData24():string{        \n        var date: any = new Date();        \n        let temphh = 23 - date.getHours();\n        let tempMinutes = 59 - date.getMinutes();\n        let tempSeconds = 59 - date.getSeconds();\n\n        var hh = (temphh < 10 ? '0' + temphh : temphh) + ':';\n        var mm = (tempMinutes < 10 ? '0' + tempMinutes : tempMinutes) + ':';\n        var ss = (tempSeconds < 10 ? '0' + tempSeconds : tempSeconds);\n        return hh + mm + ss;\n    },\n\n    convertNumber(num = 0) {\n        if (typeof num != 'number') {\n            num = Number(num);\n        }\n        if (isNaN(num)) {\n            num = 0;\n        }\n        if(num >= 10000){\n            return  (num / 10000).toFixed(1) + 'w';\n        }\n        else if(num >= 1000){\n            return  (num / 1000).toFixed(1) + 'k';\n        }\n        return num;\n    },\n\n    findPropSprite(type, keyId, sucCall, errCall?) {\n        if (type == REWARD_TYPE.PROPS) {\n            if (PROPS[keyId]) {\n                cc.resources.load(`ActivyResource/Image/Prop/${PROPS[keyId].icon}`, cc.SpriteFrame, function (err, spriteFrame) {\n                    if (err) {\n                        if (errCall) errCall\n                    };\n                    if (sucCall) sucCall(spriteFrame);\n                });\n            }\n        } else {\n            if (POINT[keyId]) {\n                cc.resources.load(`ActivyResource/Image/Point/${POINT[keyId].name}`, cc.SpriteFrame, function (err, spriteFrame) {\n                    if (err) {\n                        if (errCall) errCall\n                    };\n                    if (sucCall) sucCall(spriteFrame);\n                });\n            }\n\n        }\n        return null\n    },\n    removeEleFromArray(ele: any, arr: Array<any>) {\n        let index = arr.indexOf(ele)\n        if (index >= 0) {\n            arr.splice(index, 1)\n        }\n        return arr\n    },\n    hasEleInArray(ele: any, arr: Array<any>) {\n        return arr.indexOf(ele) > -1\n    },\n    findArrInArr(arr1, arr2) {//返回arr2和arr1中同时存在的值\n        let arr = []\n        for (let m in arr2) {\n            if (arr2[m] && arr1.indexOf(arr2[m]) > -1) {\n                arr.push(arr2[m])\n            }\n        }\n        return arr\n    },\n    findArrNoArr(arr1, arr2) {//返回arr2中除去arr1的值\n        let arr = []\n        for (let m in arr2) {\n            if (arr2[m] && arr1.indexOf(arr2[m]) == -1) {\n                arr.push(arr2[m])\n            }\n        }\n        return arr\n    },\n    playAnimate(spriteFrame, startNode, target, callback) {\n        let canvasNode = cc.director.getScene().getChildByName('Canvas');\n        let startPos = canvasNode.convertToNodeSpaceAR(startNode.convertToWorldSpaceAR(cc.v2(0, 0)));\n        let endPos = canvasNode.convertToNodeSpaceAR(target.convertToWorldSpaceAR(cc.v2(0, 0)));\n\n        let node = new cc.Node();\n        //node.setContentSize(136, 136);\n        node.zIndex = 2001;\n        node.setPosition(startPos);\n        let sprite = node.addComponent(cc.Sprite);\n        sprite.spriteFrame = spriteFrame;\n        sprite.type = cc.Sprite.Type.SIMPLE;\n        sprite.sizeMode = cc.Sprite.SizeMode.RAW;\n        sprite.trim = false;\n        node.scale = 1;\n        node.parent = canvasNode;\n        let actions = [];\n        let midPos = cc.v2(startPos.x + 150, startPos.y - 150);\n        let bezier = [startPos, midPos, endPos];\n        let bezierTo = cc.bezierTo(0.5, bezier);\n        let scaleTo = cc.scaleTo(0.5, 0.3, 0.3)\n        actions.push(cc.delayTime(0.3));\n        actions.push(cc.spawn(scaleTo, bezierTo));\n        actions.push(cc.fadeOut(0.2))\n        actions.push(cc.callFunc(() => {\n            node.destroy();\n            callback && callback(target);\n        }))\n\n        node.runAction(cc.sequence(actions));\n    },\n\n    showToastTip(msg: string) {\n        if (this.isShowMsg) return\n        this.isShowMsg = true\n        setTimeout(() => {\n            this.isShowMsg = false\n        }, 1500);\n\n        cc.director.emit(NameTs.Show_Toast, msg);\n    },\n\n    //检查插屏概率\n    checkIsOpenInserAd(id, isLoad = true) {\n        let random = Math.random();\n        let isPlay = false;\n        AdUtil.inserAdIsPlay[`inserAd${id}`] = true;\n\n        if (id == AdPosition.SignAwardInsert) {\n            if (id == AdPosition.SignAwardInsert && !util.userData.newUser) {\n                if (random <= 0.5) {\n                    isPlay = true;\n                }\n            }\n        }\n        AdUtil.inserAdIsPlay[`inserAd${id}`] = isPlay;\n\n        if (AdUtil.inserAdIsPlay[`inserAd${id}`] == true && isLoad) {\n            AdUtil.loadAdVideo(id);\n            console.log(`预加载广告id${id}预加载了`);\n        }\n        console.log(`预加载广告id${id},是否要预加载了${isLoad},随机到的概率${random}`);\n    },\n\n    //加载插屏视频\n    loadAdInsertVideo(adPosition: number, suc = () => { }) {\n        if (AdUtil.inserAdIsPlay[`inserAd${adPosition}`]) {\n            AdController.loadAd(AdPosition.SignAwardInsert, suc);\n        }\n    },\n\n    //特殊图鉴处理\n    checkTuJian(level) {\n        let tempTuJian = [5, 9, 11, 17, 22, 25, 30, 34, 29, 28, 38];\n        for (let i = 0; i < tempTuJian.length; i++) {\n            if (tempTuJian[i] == level) {\n                return true;\n            }\n        }\n        return false;\n    },\n\n    //检查当前等级替换的地图\n    checkLvBg(curLv: number) {\n        let mapData = [\n            { mapId: 1, minLv: 1, maxLv: 15, color: \"#BB420E\" },\n            { mapId: 2, minLv: 16, maxLv: 42, color: \"#BB420E\" },\n            { mapId: 1, minLv: 43, maxLv: 69, color: \"#BB420E\" },\n            { mapId: 1, minLv: 70, maxLv: 9999, color: \"#1C83BC\" },         \n        ]\n\n        for (let i = 0; i < mapData.length; i++) {\n            if (curLv >= mapData[i].minLv && curLv <= mapData[i].maxLv) {\n                return mapData[i];\n            }\n        }\n        return mapData[mapData.length - 1];\n    },  \n\n    //排序\n    sortArray(sortArray, compareProperty:string, targetArray){\n        targetArray.sort((a, b)=>{\n            let aScore = 100;\n            let bScore = 100;\n            for(let i = 0; i < sortArray.length; i++){\n                if(a[compareProperty] != null && b[compareProperty] != null){\n                    if(a[compareProperty] == sortArray[i]){\n                        aScore = aScore * i;\n                    }\n                    if(b[compareProperty] == sortArray[i]){\n                        bScore = bScore * i;\n                    }\n                }\n            }\n            return aScore - bScore;\n        })\n    },\n\n    isATest() {//是否为AB中的A用户\n        return getPhead().ab_user_type == \"A\"\n    },\n\n}"]}