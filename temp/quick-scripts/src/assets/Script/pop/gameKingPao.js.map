{"version":3,"sources":["assets\\Script\\pop\\gameKingPao.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { AssistCtr } from \"../Assist/AssistCtr\";\r\nimport baseTs from \"../base/baseTs\";\r\nimport NameTs from \"../common/NameTs\";\r\nimport pageTs from \"../common/pageTs\";\r\nimport Marquee from \"../model/Marquee\";\r\nimport { UrlConst } from \"../server/UrlConst\";\r\nimport XMSDK from \"../server/xmsdk_cocos/XMSDK\";\r\nimport TrackMgr from \"../TrackMgr/TrackMgr\";\r\nimport util from \"../util/util\";\r\n\r\nexport interface kingPaoTask {\r\n    achieve: number\t                    //0:未完成 1:完成\r\n    id: number                          //主键\r\n    process: number                     //进度情况        \r\n    processTarget: number\t            //进度目标\r\n    status: number\t                    //任务状态：0：无状态；1：签到任务；2：通关任务；3：看视频任务\r\n    type: number\t                    //任务类型： 0：炮王进度任务 1：炮王合成任务 2：炮王200兑换任务\r\n    title: string\r\n}\r\n\r\nexport interface marquee{\r\n    msg:string,\r\n    time:number\r\n}\r\n\r\nexport interface kingPaoData {\r\n    taskList:Array<kingPaoTask>\r\n    turretKingRedEnvelopeDetailDTO:{\r\n        bonusPerCapita:number,\r\n        createDate:string,\r\n        todayReceive:number,\r\n        total:number,\r\n        yesterdayRedEnvelope:number\r\n    }\r\n    marquee:Array<marquee>\r\n}\r\n\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class gameKingPao extends baseTs {\r\n\r\n    @property(cc.Node)\r\n    ruleNode:cc.Node = null;\r\n\r\n    @property(Marquee)\r\n    marquee:Marquee = null;\r\n\r\n    @property(cc.Label)\r\n    lable_shareMoney:cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    lable_dayMoney:cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    lable_dayNum:cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    lable_goNum:cc.Label = null;    \r\n\r\n    @property(cc.Node)\r\n    kingTaskContent:cc.Node = null;        \r\n\r\n    @property(cc.Node)\r\n    KingTaskItem:cc.Node = null;\r\n\r\n    private kingPaoData:kingPaoData = null;    \r\n\r\n    onLoad(){\r\n        cc.game.on(NameTs.Game_KingPaoTask_Update, this.updateData, this);\r\n    }\r\n\r\n    onEnable(){\r\n        TrackMgr.artillery_bonus({\r\n            activity_state:`「百万分红」页面展示`\r\n        })\r\n    }\r\n\r\n    start () {\r\n\r\n    }\r\n\r\n    init(data:kingPaoData){\r\n        this.kingPaoData = data;        \r\n        this.setData();  \r\n        this.marquee.updateMarqueeList(data.marquee); \r\n    }\r\n\r\n    setData(){\r\n        let data = this.kingPaoData;        \r\n        if(data){\r\n            this.lable_shareMoney.string = data.turretKingRedEnvelopeDetailDTO.yesterdayRedEnvelope + \"\";\r\n            this.lable_dayMoney.string = data.turretKingRedEnvelopeDetailDTO.bonusPerCapita + \"\";\r\n            this.lable_dayNum.string = data.turretKingRedEnvelopeDetailDTO.total + \"\";\r\n            this.lable_goNum.string = data.turretKingRedEnvelopeDetailDTO.todayReceive + \"\";   \r\n        }     \r\n\r\n        let kingTask = data.taskList;\r\n        let childAll = this.kingTaskContent.children;\r\n        let addNum = kingTask.length - childAll.length;\r\n        if(addNum > 0){\r\n            for(let i = 0; i < addNum; i++){\r\n                let itemNode = cc.instantiate(this.KingTaskItem);\r\n                itemNode.x = childAll[0].x;\r\n                itemNode.y = childAll[0].y;\r\n                itemNode.parent = this.kingTaskContent;\r\n                itemNode.active = true;\r\n            }\r\n        }\r\n\r\n        for(let i = 0; i < childAll.length; i++){\r\n            let item = childAll[i];\r\n            item.name = `${i}`;\r\n            if(kingTask[i] && item){\r\n                if(kingTask[i].achieve == 1){\r\n                    item.getChildByName(\"btnNode\").getChildByName(\"lable\").getComponent(cc.Label).string = `兑换`;\r\n                }\r\n                else if(kingTask[i].achieve == 2){\r\n                    item.getChildByName(\"btnNode\").getChildByName(\"lable\").getComponent(cc.Label).string = `已兑换`;\r\n                }\r\n\r\n                if(i == 0){\r\n                    let strNum = (kingTask[i].process/kingTask[i].processTarget) * 100;                    \r\n                    var y = String(strNum).indexOf(\".\") + 1;//获取小数点的位置                    \r\n                    if(y > 0) {\r\n                        strNum = Number(strNum.toFixed(2));\r\n                    }\r\n\r\n                    item.getChildByName(`lable_kindProgress`).getComponent(cc.RichText).string = `<color=#FFFFFF>${kingTask[i].title}:</c><color=#FCFF15>${strNum}%</color>`;                    \r\n                    item.getChildByName(\"btnNode\").getChildByName(\"lable\").getComponent(cc.Label).string = `加${30}%`;\r\n\r\n\r\n                    XMSDK.getdataStr({\r\n                        url: UrlConst.kingPaoProgress,\r\n                        onSuccess: res => {\r\n                            if (res.code === 0) {\r\n                                if(!this.isValid){\r\n                                    return;\r\n                                }\r\n\r\n                                if(res.data){\r\n                                    item.getChildByName(\"btnNode\").getChildByName(\"lable\").getComponent(cc.Label).string = `加${res.data.percent}%`;\r\n                                }                                       \r\n                            }\r\n                            else {\r\n                                if(res){\r\n                                    AssistCtr.showToastTip(res.message);\r\n                                }       \r\n                            }\r\n                        },\r\n                        onFail: err => {\r\n            \r\n                        }\r\n                    })           \r\n                }                  \r\n                else{\r\n                    if(kingTask[i].type == 2){\r\n                        item.getChildByName(`lable_kindProgress`).getComponent(cc.RichText).string = `<color=#FFFFFF>${kingTask[i].title}:</c><color=#FCFF15>${Math.floor(kingTask[i].process / util.userData.exchangeRate)}</color><color=#FFFFFF>/${Math.floor(kingTask[i].processTarget / util.userData.exchangeRate)}</color>`;\r\n                    }\r\n                    else{\r\n                        item.getChildByName(`lable_kindProgress`).getComponent(cc.RichText).string = `<color=#FFFFFF>${kingTask[i].title}:</c><color=#FCFF15>${kingTask[i].process}</color><color=#FFFFFF>/${kingTask[i].processTarget}</color>`;\r\n                    }                    \r\n                }                         \r\n                let process = (kingTask[i].process/kingTask[i].processTarget);\r\n                if(process >= 1){\r\n                    process = 1;\r\n                }\r\n                let proGressWidth = (item.getChildByName(`rectNode`).width - 7) * process;\r\n                if(proGressWidth > 1 && proGressWidth < 25){\r\n                    proGressWidth = 25;\r\n                }                \r\n                item.getChildByName(`rectNode`).getChildByName(`progressNode`).width = proGressWidth;                     \r\n            }               \r\n        }\r\n    }\r\n\r\n    clickGet(){\r\n        TrackMgr.artillery_bonus({\r\n            activity_state:`点击「领现金」按钮`\r\n        })\r\n\r\n        if(this.kingPaoData && this.kingPaoData.taskList){\r\n            if(this.kingPaoData.taskList[0] && (this.kingPaoData.taskList[0].processTarget == this.kingPaoData.taskList[0].process)){\r\n                AssistCtr.showToastTip(`人工审核中`)\r\n            }\r\n        }\r\n        AssistCtr.showToastTip(`获得炮王可每日领取分红`)\r\n    }\r\n\r\n    updateData(){\r\n        XMSDK.getdataStr({\r\n            url: UrlConst.kingPaoTaskData,\r\n            onSuccess: res => {\r\n                if (res.code === 0 && res.data) {\r\n                    if(!this.isValid){\r\n                        return;\r\n                    }\r\n\r\n                    this.init(res.data);\r\n                }\r\n                else {\r\n\r\n                }\r\n            },\r\n            onFail: err => {\r\n\r\n            }\r\n        })\r\n    }\r\n\r\n    clickTaskGo(e){\r\n        let clickIndex = parseInt(e.target.parent.name);\r\n\r\n        if(this.kingPaoData && this.kingPaoData.taskList){\r\n            if(this.kingPaoData.taskList[clickIndex] && this.kingPaoData.taskList[clickIndex].achieve == 1){                \r\n                XMSDK.post({\r\n                    url: UrlConst.kingPaoGet,\r\n                    data: {\r\n                        id: this.kingPaoData.taskList[clickIndex].id\r\n                    },\r\n                    onSuccess: res => {\r\n                        if (res.code === 0) {\r\n                            if(!this.isValid){\r\n                                return;\r\n                            }\r\n\r\n                            AssistCtr.showToastTip(`兑换成功，人工审核中`);\r\n                            this.updateData();\r\n                        }\r\n                        else {\r\n                            if(res){\r\n                                AssistCtr.showToastTip(res.message);\r\n                            }       \r\n                        }\r\n                    },\r\n                    onFail: err => {\r\n        \r\n                    }\r\n                })     \r\n                return;      \r\n            }\r\n            else if(this.kingPaoData.taskList[clickIndex] && this.kingPaoData.taskList[clickIndex].achieve == 2){\r\n                AssistCtr.showToastTip(`已兑换`);\r\n                return;\r\n            }            \r\n        } \r\n\r\n        if(clickIndex == 0){                       \r\n            cc.game.emit(NameTs.Game_Pop_Open, {\r\n                name:pageTs.pageName.GameKingPaoProgress,\r\n                data: {\r\n                    clickTarget:0,\r\n                    progress:`${this.kingPaoData.taskList[clickIndex].process}/${this.kingPaoData.taskList[clickIndex].processTarget}`\r\n                },                \r\n            });\r\n        }\r\n        else{\r\n            if(this.kingPaoData && this.kingPaoData.taskList){\r\n                if(this.kingPaoData.taskList[clickIndex]){\r\n                    TrackMgr.artillery_bonus({\r\n                        activity_state:`${this.kingPaoData.taskList[clickIndex].title}`,\r\n                        button_hcdg:`${this.kingPaoData.taskList[clickIndex].title}按钮`,\r\n                        task_progress:`${this.kingPaoData.taskList[clickIndex].process}/${this.kingPaoData.taskList[clickIndex].processTarget}`\r\n                    })\r\n                }\r\n            } \r\n            this.closePage();\r\n        }\r\n    }\r\n\r\n    clickClose(){\r\n        TrackMgr.AppDialogClick_hcdg({                \r\n            dialog_name_hcdg: `百万分红`,\r\n            ck_module: `返回`\r\n        })  \r\n\r\n        this.closePage();\r\n    }\r\n\r\n    clickOpenProgress(){\r\n        cc.game.emit(NameTs.Game_Pop_Open, pageTs.pageName.GameKingPaoProgress);\r\n    }\r\n\r\n    clickCloseRule(){\r\n        this.ruleNode.active = false;\r\n    }\r\n\r\n    clickOpenRule(e, index){\r\n        if(index == 0){\r\n            TrackMgr.artillery_bonus({\r\n                activity_state:`「玩家说明」点击`\r\n            })\r\n        }\r\n        else if(index == 1){\r\n            TrackMgr.artillery_bonus({\r\n                activity_state:`「获得分红炮王说明」点击`\r\n            })\r\n        }\r\n        this.ruleNode.active = true;\r\n    }\r\n}\r\n"]}