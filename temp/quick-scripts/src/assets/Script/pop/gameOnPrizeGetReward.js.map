{"version":3,"sources":["assets\\Script\\pop\\gameOnPrizeGetReward.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport { AssistCtr } from \"../Assist/AssistCtr\";\r\nimport baseTs from \"../base/baseTs\";\r\nimport { AdPosition } from \"../common/AdPosition\";\r\nimport NameTs from \"../common/NameTs\";\r\nimport { onPrizeRedItemData } from \"../onPrizeGet/OnPrizeGet\";\r\nimport { UrlConst } from \"../server/UrlConst\";\r\nimport AdController from \"../server/xmsdk_cocos/AD/AdController\";\r\nimport XMSDK from \"../server/xmsdk_cocos/XMSDK\";\r\nimport TrackMgr from \"../TrackMgr/TrackMgr\";\r\nimport util from \"../util/util\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class NewClass extends baseTs {\r\n\r\n    @property(cc.RichText)\r\n    lable_prizeNum: cc.RichText = null;\r\n\r\n    @property(cc.Node)\r\n    btn_closeNode: cc.Node = null;\r\n\r\n    @property(cc.Label)\r\n    lable_goldNum: cc.Label = null;\r\n\r\n    @property(cc.Node)\r\n    feed_node: cc.Node = null;\r\n    \r\n    @property({type:cc.Node,displayName:\"倍数\"})\r\n    private multipleNode:cc.Node = null;\r\n    \r\n    @property({type:cc.Label,displayName:\"倍数字\"})\r\n    private multipleLabel:cc.Label = null;\r\n\r\n    initData: onPrizeRedItemData = null;\r\n\r\n    isClick = false;\r\n\r\n    start() {\r\n\r\n    }\r\n\r\n    init(data: onPrizeRedItemData) {\r\n        if (data) {\r\n            this.initData = data;\r\n            this.lable_prizeNum.string = `<color=#FFFFFF><outline color=#D25400 width=4><color=#FFFC00>${data.doubleAmount}</color>`\r\n            this.lable_goldNum.string = `+${this.initData.amount}`;\r\n\r\n            this.multipleLabel.string = parseInt(String(data.doubleAmount/this.initData.amount))+\"倍\";\r\n\r\n            this.btn_closeNode.active = false;\r\n            this.scheduleOnce(() => {\r\n                this.btn_closeNode.active = true;\r\n            }, 3)\r\n\r\n            TrackMgr.Online_rewards({\r\n                activity_state: \"奖励弹窗展示\",\r\n                reward_state: `${this.initData.waitTime / 60}分钟`,\r\n            })\r\n        }\r\n        \r\n        cc.tween(this.multipleNode).repeatForever(\r\n            cc.tween().to(.3,{angle:10}).to(.2,{angle:0})\r\n        ).start();\r\n    }\r\n\r\n    clickGet() {\r\n        if (!this.initData) {\r\n            return;\r\n        }\r\n        if(this.isClick){\r\n            return;\r\n        }\r\n        this.isClick = true;\r\n\r\n        TrackMgr.Online_rewards({\r\n            activity_state: \"奖励弹窗点击\",\r\n            button_name_hcdg: `直接领取`,\r\n            reward_state: `${this.initData.waitTime / 60}分钟`,\r\n        })\r\n        TrackMgr.Online_rewards({\r\n            activity_state: \"领取完毕\",\r\n            collection_completed: `直接领取成功`,\r\n        })\r\n        XMSDK.getdataStr({\r\n            url: UrlConst.onPrizeGetRewardGet,\r\n            onSuccess: res => {\r\n                if (!this.isValid) {\r\n                    return;\r\n                }\r\n                if (res.code === 0) {\r\n                    cc.game.emit(NameTs.Game_Effect_coin, { value: this.initData.amount, num: 5, parent: cc.director.getScene().getChildByName('Canvas') });\r\n                    util.addTermCoin(this.initData.amount);\r\n                    this.closePage();\r\n                } else {\r\n                    this.closePage();\r\n                    XMSDK.toast(res.message || '网络出错~', 2.5, 1);\r\n                }\r\n\r\n                this.isClick = false;\r\n            },\r\n            onFail: res => {\r\n                this.closePage();\r\n                this.isClick = false;\r\n            }\r\n        })\r\n    }\r\n\r\n    clickDoubleGet() {\r\n        if (!this.initData||(this.initData&&!this.initData.doubleAmount)) {\r\n            return;\r\n        }\r\n        if(this.isClick){\r\n            return;\r\n        }\r\n        this.isClick = true;\r\n\r\n        TrackMgr.Online_rewards({\r\n            activity_state: \"奖励弹窗点击\",\r\n            button_name_hcdg: `翻倍领${this.initData.doubleAmount}`,\r\n            reward_state: `${this.initData.waitTime / 60}分钟`,\r\n        })\r\n\r\n        AdController.loadAd(AdPosition.OnPrizeGet, (res) => {\r\n            XMSDK.getdataStr({\r\n                url: UrlConst.onPrizeGetRewardGet,\r\n                onSuccess: res => {\r\n                    if (res.code === 0) {\r\n                        if (!this.isValid) {\r\n                            return;\r\n                        }\r\n\r\n                        TrackMgr.Online_rewards({\r\n                            activity_state: \"领取完毕\",\r\n                            collection_completed: `视频领取成功`,\r\n                        })\r\n\r\n\r\n                        cc.game.emit(NameTs.Game_Effect_coin, { value: this.initData.doubleAmount, num: 5, parent: cc.director.getScene().getChildByName('Canvas') });\r\n                        util.addTermCoin(this.initData.doubleAmount);\r\n\r\n                        this.closePage();\r\n                    } else {\r\n                        this.closePage();\r\n                        XMSDK.toast(res.message || '网络出错~', 2.5, 1);\r\n                    }\r\n\r\n                    this.isClick = false;\r\n                },\r\n                onFail: res => {                    \r\n                    this.closePage();                    \r\n                    this.isClick = false;\r\n                }\r\n            })\r\n        }, () => {\r\n            TrackMgr.Online_rewards({\r\n                activity_state: \"领取完毕\",\r\n                collection_completed: `视频领取失败`,\r\n            })            \r\n            this.closePage();\r\n            this.isClick = false;\r\n            AssistCtr.showToastTip(\"加载视频失败，请稍后！\");\r\n            \r\n        })\r\n    }\r\n\r\n    onEnable() {\r\n        AdController.loadInfoAd(AdPosition.onPrizeGetView, 636, this.feed_node);//636:feedNode信息流容器节点的宽度\r\n    }\r\n\r\n\r\n    onDisable() {\r\n        AdController.hideInfoAd(AdPosition.onPrizeGetView);\r\n        cc.game.emit(NameTs.onPrizeGetUpdate);\r\n    }\r\n}\r\n"]}