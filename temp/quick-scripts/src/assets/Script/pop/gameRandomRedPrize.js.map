{"version":3,"sources":["assets\\Script\\pop\\gameRandomRedPrize.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { AssistCtr } from \"../Assist/AssistCtr\";\r\nimport baseTs from \"../base/baseTs\";\r\nimport { AdPosition } from \"../common/AdPosition\";\r\nimport NameTs from \"../common/NameTs\";\r\nimport turret from \"../game/turret/turret\";\r\nimport { UrlConst } from \"../server/UrlConst\";\r\nimport AdController from \"../server/xmsdk_cocos/AD/AdController\";\r\nimport XMSDK from \"../server/xmsdk_cocos/XMSDK\";\r\nimport TrackMgr from \"../TrackMgr/TrackMgr\";\r\nimport util from \"../util/util\";\r\n\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class gameRandomRedPrize extends baseTs {\r\n\r\n\r\n    @property(cc.RichText)\r\n    lable_prizeNum: cc.RichText = null;\r\n\r\n    @property(cc.Node)\r\n    btn_closeNode: cc.Node = null;\r\n\r\n    @property(cc.Label)\r\n    lable_goldNum:cc.Label = null;\r\n\r\n    @property(cc.Node)\r\n    feed_node1: cc.Node = null;\r\n\r\n\r\n    \r\n    @property({type:cc.Node,displayName:\"倍数\"})\r\n    private multipleNode:cc.Node = null;\r\n\r\n    private redAmountNum = 200;\r\n    private power = 3;\r\n\r\n    private coinItem:cc.Node = null;\r\n\r\n    start() {\r\n\r\n        cc.tween(this.multipleNode).repeatForever(\r\n            cc.tween().to(.3,{angle:10}).to(.2,{angle:0})\r\n        ).start();\r\n\r\n        \r\n        this.coinItem = util.GlobalMap.get(\"RandomRed\")||this.node;\r\n\r\n        console.log(this.coinItem.x,this.coinItem.y,'asfasfasf12412=================')\r\n    }\r\n\r\n    onEnable() {\r\n        TrackMgr.AppBuyProductDialog_hcdg({\r\n            dialog_name_hcdg: \"福利红包弹窗展示\"\r\n        })\r\n        AdController.loadInfoAd(AdPosition.randomRedPrizeView, 636, this.feed_node1);//636:feedNode信息流容器节点的宽度\r\n    }\r\n\r\n\r\n    onDisable() {        \r\n        AdController.hideInfoAd(AdPosition.randomRedPrizeView);\r\n\r\n    }\r\n\r\n    init(data) {\r\n\r\n        TrackMgr.welfare_red_envelope({\r\n            activity_state:\"福利红包弹窗展示\"\r\n        })\r\n\r\n\r\n        this.lable_goldNum.string = `+${this.redAmountNum}`;\r\n        this.lable_prizeNum.string = `<outline color=#D25400 width=4><color=#FFFC00>${this.redAmountNum * this.power}</color>`\r\n\r\n        this.btn_closeNode.active = false;\r\n        this.scheduleOnce(() => {\r\n            this.btn_closeNode.active = true;\r\n        }, 3);\r\n    }\r\n\r\n    clickGet() {\r\n        TrackMgr.welfare_red_envelope({\r\n            activity_state:\"福利红包弹窗点击\",\r\n            button_name_hcdg:\"直接领取\"\r\n        })\r\n\r\n        TrackMgr.welfare_red_envelope({\r\n            activity_state:\"领取成功\",\r\n            collection_completed:\"直接领取成功\"\r\n        })\r\n\r\n        TrackMgr.AppDialogClick_hcdg({\r\n            dialog_name_hcdg: '福利红包弹窗展示',\r\n            ck_module: '直接领取'\r\n        })\r\n\r\n        XMSDK.getdataStr({\r\n            url: UrlConst.btnRandomRedGet,\r\n            onSuccess: res => {\r\n                if (res.code === 0) {\r\n                    if(!this.isValid){\r\n                        return;\r\n                    }\r\n                    console.log(\"普通领取！\")\r\n                    cc.game.emit(NameTs.Game_Effect_coin, {node:this.coinItem, value: this.redAmountNum,num:10 });\r\n                    util.addTermCoin(this.redAmountNum);\r\n                    AssistCtr.showToastTip(\"获得\"+(this.redAmountNum)+\"红包币\");\r\n                    cc.game.emit(NameTs.randomRedUpdate);\r\n                    this.closePage();\r\n                } else {\r\n                    AssistCtr.showToastTip(res.message || '网络出错~');\r\n                    cc.game.emit(NameTs.randomRedUpdate);\r\n                    this.closePage();\r\n                }\r\n            },\r\n            onFail: res => {\r\n                AssistCtr.showToastTip(\"网络出错~\");\r\n                cc.game.emit(NameTs.randomRedUpdate);\r\n                this.closePage();\r\n            }\r\n        })\r\n        cc.game.emit(NameTs.Game_Task_updata);\r\n    }\r\n\r\n    clickDoubleGet() {\r\n        TrackMgr.welfare_red_envelope({\r\n            activity_state:\"福利红包弹窗点击\",\r\n            button_name_hcdg:\"领取600红包币\"\r\n        })\r\n\r\n        TrackMgr.AppDialogClick_hcdg({\r\n            dialog_name_hcdg: '福利红包弹窗展示',\r\n            ck_module: '领取600红包币',\r\n            active_ad_hcdg:\"激励视频\"\r\n        })\r\n        AdController.loadAd(AdPosition.randomRedPrize, (res) => {\r\n            \r\n            // TrackMgr.AppBuyProductDialog_hcdg({\r\n            //     dialog_name_hcdg: \"福利红包翻倍成功弹窗展示\"\r\n            // })\r\n\r\n            TrackMgr.welfare_red_envelope({\r\n                activity_state:\"领取成功\",\r\n                collection_completed:\"视频领取成功\"\r\n            })\r\n\r\n            XMSDK.getdataStr({\r\n                url: UrlConst.btnRandomRedGet,\r\n                onSuccess: res => {\r\n                    if (res.code === 0) {\r\n                        if(!this.isValid){\r\n                            return;\r\n                        }\r\n                        console.log(\"翻倍领取！\")\r\n                        cc.game.emit(NameTs.randomRedUpdate);\r\n                        cc.game.emit(NameTs.Game_Effect_coin, { node:this.coinItem,value: this.redAmountNum * this.power,num:10});\r\n                        util.addTermCoin(this.redAmountNum * this.power);\r\n                        AssistCtr.showToastTip(\"获得\"+(this.redAmountNum * this.power)+\"红包币\");\r\n                        this.closePage();\r\n                    } else {\r\n                        XMSDK.toast(res.message || '网络出错~', 2.5, 1);\r\n                        cc.game.emit(NameTs.randomRedUpdate);\r\n                        this.closePage();\r\n                    }\r\n                },\r\n                onFail: res => {\r\n                    AssistCtr.showToastTip(\"网络出错~\");\r\n                    cc.game.emit(NameTs.randomRedUpdate);\r\n                    this.closePage();\r\n                }\r\n            })\r\n        }, () => {\r\n            cc.game.emit(NameTs.randomRedUpdate);\r\n            this.closePage();\r\n            AssistCtr.showToastTip(\"加载视频失败，请稍后！\");\r\n            \r\n        })\r\n    }\r\n\r\n    clickDoubleGet2() {\r\n        TrackMgr.welfare_red_envelope({\r\n            activity_state:\"领取成功\",\r\n            collection_completed:\"视频领取成功\"\r\n        })\r\n\r\n        TrackMgr.AppDialogClick_hcdg({\r\n            dialog_name_hcdg: '福利红包翻倍成功弹窗展示',\r\n            ck_module: '开心收下'\r\n        })\r\n\r\n        XMSDK.getdataStr({\r\n            url: UrlConst.btnRandomRedGet,\r\n            onSuccess: res => {\r\n                if (res.code === 0) {\r\n                    if(!this.isValid){\r\n                        return;\r\n                    }\r\n                    console.log(\"翻倍领取！\")\r\n                    cc.game.emit(NameTs.Game_Effect_coin, {node:this.coinItem, value: this.redAmountNum * this.power,num:10});\r\n                    util.addTermCoin(this.redAmountNum * this.power);\r\n                    AssistCtr.showToastTip(\"获得\"+(this.redAmountNum * this.power)+\"红包币\");\r\n                } else {\r\n                    XMSDK.toast(res.message || '网络出错~', 2.5, 1);\r\n                }\r\n            },\r\n            onFail: res => {\r\n\r\n            }\r\n        })\r\n        this.closePage();\r\n        cc.game.emit(NameTs.Game_Task_updata);\r\n    }\r\n\r\n\r\n\r\n}\r\n"]}