{"version":3,"sources":["assets\\Script\\pop\\gameOnLinePrize.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { AssistCtr } from \"../Assist/AssistCtr\";\r\nimport baseTs from \"../base/baseTs\";\r\nimport { AdPosition } from \"../common/AdPosition\";\r\nimport NameTs from \"../common/NameTs\";\r\nimport AdController from \"../server/xmsdk_cocos/AD/AdController\";\r\nimport TrackMgr from \"../TrackMgr/TrackMgr\";\r\nimport util from \"../util/util\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class gameOnLinePrize extends baseTs {\r\n\r\n    @property(cc.Node)\r\n    node_gold:cc.Node = null;\r\n\r\n    @property(cc.Label)\r\n    lable_addGold:cc.Label = null;\r\n\r\n    @property(cc.Node)\r\n    feed_node: cc.Node = null;\r\n\r\n    @property(cc.Sprite)\r\n    private titleSpr:cc.Sprite = null;\r\n\r\n    @property(cc.SpriteFrame)\r\n    private titleSprFrame:Array<cc.SpriteFrame> = [];\r\n\r\n    @property(cc.Node)\r\n    btnCommon:cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    btnNode:cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    btn_get:cc.Node = null;\r\n\r\n    @property({type:cc.Label,displayName:\"倍数金币\"})\r\n    private lable_addGold2:cc.Label = null;\r\n    \r\n    @property({type:cc.Node,displayName:\"倍数\"})\r\n    private multipleNode:cc.Node = null;\r\n\r\n    private addGold = 0;        \r\n\r\n    private isClickGet = false;    //是否点击了领取\r\n\r\n    onLoad(){\r\n        \r\n        cc.tween(this.multipleNode).repeatForever(\r\n            cc.tween().to(.3,{angle:10}).to(.2,{angle:0})\r\n        ).start();\r\n    }\r\n\r\n    clickDouble(){\r\n        if(this.isClickGet){\r\n            return;\r\n        }\r\n        this.isClickGet = true;\r\n        this.scheduleOnce(() => {\r\n            this.isClickGet = false;\r\n        }, 2);\r\n\r\n        TrackMgr.AppDialogClick_hcdg({\r\n            dialog_name_hcdg: \"在线时长弹窗\",\r\n            ck_module:\"双倍领取\",\r\n            active_ad_hcdg:\"激励视频\"\r\n        })\r\n\r\n        TrackMgr.AppBuyProductDialog_hcdg({\r\n            dialog_name_hcdg: \"在线时长翻倍成功弹窗\",\r\n        })\r\n\r\n        AdController.loadAd(AdPosition.VideoOnLinePrize, (res) => {\r\n            // if(this.addGold){\r\n                this.addGold = this.addGold * 2;\r\n            //     this.lable_addGold.string = \"+\"+this.addGold+\"红包币\";\r\n            // } \r\n\r\n            // this.showGetBtn();\r\n            // if(this.titleSprFrame&&this.titleSprFrame[1]){\r\n            //     this.titleSpr.spriteFrame = this.titleSprFrame[1];\r\n            // }\r\n\r\n            this.clickGet();\r\n        }, () => {\r\n            AssistCtr.showToastTip(\"加载视频失败，请稍后！\");\r\n        })               \r\n    }\r\n\r\n    clickCommon(){\r\n        if(this.isClickGet){\r\n            return;\r\n        }\r\n        this.isClickGet = true;\r\n        this.scheduleOnce(() => {\r\n            this.isClickGet = false;\r\n        }, 2);\r\n\r\n        TrackMgr.AppDialogClick_hcdg({\r\n            dialog_name_hcdg: \"在线时长弹窗\",\r\n            ck_module:\"普通领取\"\r\n        })        \r\n        this.clickGet();\r\n    }\r\n\r\n    clickGet(){\r\n        TrackMgr.AppDialogClick_hcdg({\r\n            dialog_name_hcdg: \"在线时长弹窗\",\r\n            ck_module:\"收下\"\r\n        })       \r\n\r\n        cc.game.emit(NameTs.Game_Effect_coin, { node: this.node_gold, value: this.addGold,num:10});\r\n        util.addTermCoin(this.addGold);\r\n        this.closePage();\r\n    }\r\n\r\n    init(data){\r\n        if(data){\r\n            this.lable_addGold.string = `+${data.point}`+\"红包币\";\r\n            this.addGold = data.point;\r\n            this.lable_addGold2.string = data.point*2+\"\";\r\n            \r\n        }    \r\n        else{\r\n            this.lable_addGold.string = \"\";\r\n            this.addGold = 0;\r\n        }    \r\n    }\r\n\r\n    showGetBtn(){    \r\n        if(this.btnNode){\r\n            this.btnNode.active = false;  \r\n        }   \r\n        if(this.btn_get){\r\n            this.btn_get.active = true;\r\n        }     \r\n    }\r\n\r\n    onEnable(){\r\n        AdController.loadInfoAd(AdPosition.InfoGameOnLinePrize, 636, this.feed_node);//636:feedNode信息流容器节点的宽度\r\n\r\n        TrackMgr.AppBuyProductDialog_hcdg({\r\n            dialog_name_hcdg:\"在线时长弹窗\"\r\n        })\r\n\r\n        this.titleSpr.spriteFrame = this.titleSprFrame[0];\r\n        if(this.btnNode){\r\n            this.btnNode.active = true;\r\n        }\r\n        this.btnCommon.active = false;\r\n        this.scheduleOnce(() => {\r\n            if(this.node) this.btnCommon.active = true;     \r\n        }, 3);\r\n\r\n        this.btn_get.active = false;                \r\n    }\r\n\r\n    onDisable(){    \r\n        AdController.hideInfoAd(AdPosition.InfoGameOnLinePrize);        \r\n    }\r\n\r\n}\r\n"]}