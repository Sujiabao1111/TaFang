{"version":3,"sources":["assets\\Script\\pop\\gameGuide.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import baseTs from \"../base/baseTs\";\nimport NameTs from \"../common/NameTs\";\nimport pageTs from \"../common/pageTs\";\nimport { UrlConst } from \"../server/UrlConst\";\nimport XMSDK from \"../server/xmsdk_cocos/XMSDK\";\nimport soundController from \"../soundController\";\nimport TrackMgr from \"../TrackMgr/TrackMgr\";\nimport util from \"../util/util\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class gameGuide extends baseTs {\n\n    @property({displayName:\"指导盒子\",type:cc.Node})\n    private content:cc.Node = null;\n    \n    @property({displayName:\"遮罩盒子\",type:cc.Node})\n    private maskBox:cc.Node = null;\n\n    @property({displayName:\"跳过页面\",type:cc.Node})\n    private skipNode:cc.Node = null;\n    \n    // @property({displayName:\"等级\",type:cc.RichText})\n    // private levelLabel:cc.RichText = null;\n\n    @property({displayName:\"app的名字\",type:cc.Label})\n    private appName:cc.Label = null;\n    // LIFE-CYCLE CALLBACKS:\n\n\n    onLoad () {\n\n        if(XMSDK.getAppName){\n            console.log(XMSDK.getAppName(),'XMSDK.getAppName()=============')\n        }else{\n            console.log(\"没有这个方法\")\n        }\n\n        let name:string = (XMSDK.getAppName&&XMSDK.getAppName())||\"塔防无敌\";\n        this.appName.string = \"欢迎您来到「\"+name+\"」\";\n        \n        util.setStorage(util.localDiary.noviceGuide,-1);\n\n        cc.game.on(NameTs.Game_Novice_Open,(res)=>{\n\n            this.setState(res);\n\n        },this);\n\n        cc.game.on(NameTs.Game_Novice_Close,()=>{\n\n            this.closePage();\n\n        },this);\n\n    }\n\n    /**\n     * 第几个\n     */\n    init(data){\n\n        this.setState(data||1)\n\n    }\n\n    start () {\n\n    }\n\n    /**\n     * 状态\n     * @param type 第几个\n     */\n    setState(type:number){\n\n        let str:any = {};\n        switch(type){\n            case 1:\n                str.activity_state =\"欢迎页\";\n                break;\n            case 2:\n                str.activity_state =\"指引购买炮塔页\";\n                break;\n            case 3:\n                str.activity_state =\"拖拽合成效果页\";\n                break;\n            case 4:\n                str.activity_state =\"全部红包可提现页\";\n                break;\n            case 5:\n                str.activity_state =\"开始赢钱页面展示\";\n                break;\n\n        }\n        if(str.activity_state){\n            TrackMgr.rookie_process_2(str);\n        }\n\n        util.userData.noviceGuide = type;\n\n        this.skipNode.active = type==1||type>3;\n\n        if(this.content && this.content.children){\n            this.content.children.forEach(item=>{\n                item.active = false;\n            });\n        }\n\n        if(this.maskBox && this.maskBox.children){\n            this.maskBox.children.forEach(item=>{\n                item.active = false;\n            });\n        }\n\n        if(this.content && this.content.children){\n            this.content.children[type-1].active = this.maskBox.children[type-1].active = true;\n        }        \n\n        let Widget:cc.Widget = this.maskBox.children[type-1].getComponent(cc.Widget);\n        if(Widget){\n            Widget.top += Number(util.iphoneXTop);\n        }\n\n\n        //存储本地\n        //util.setStorage(util.localDiary.noviceGuide,type);\n\n\n\n        if(type==2||type==3){\n            let hand:cc.Node = this.content.children[type-1].getChildByName(\"hand\");\n            this.handAni(hand,type==2?0:1);\n        }\n        \n    }\n\n    /**\n     * 跳过\n     */\n    skipBtn(){\n\n        soundController.singleton.clickAudio();\n\n        if(util.userData.noviceGuide==4){\n            TrackMgr.rookie_process_2({\n                activity_state :\"「全部红包可提现页」任意位置点击\",\n            });\n        }\n\n        if(util.userData.noviceGuide==5){\n            TrackMgr.rookie_process_2({\n                activity_state :\"开始赢钱按钮点击\",\n            });\n            cc.game.emit(NameTs.Game_Treasure_Show);\n            this.closePage();\n            TrackMgr.rookie_process_2({\n                activity_state :\"关卡开启\",\n            });\n            // this.showPage(pageTs.pageName.GameStart);\n            cc.game.emit(NameTs.Game_Start);\n            return\n        }\n        \n        let num:number = util.userData.noviceGuide+1;\n        \n\n        this.setState(num);\n    }\n\n\n    /**\n     * 手的动画\n     * @param node 节点\n     * @param type 类型 0点击 1拖拽\n     */\n    handAni(node:cc.Node,type:number){\n        // cc.tween(node.children[0]).repeatForever(cc.tween().to(0,{scale:0,opacity:255}).to(1,{scale:1}).to(.2,{opacity:0})).delay(.5).start();\n        // cc.tween(node.children[1]).repeatForever(cc.tween().to(0,{scale:0,opacity:255}).delay(.5).to(1,{scale:1}).to(.2,{opacity:0})).start();\n        if(type==0){\n            // cc.tween(node).repeatForever(cc.tween().by(.2,{y:-10}).by(.2,{y:10}).delay(.5)).start();\n        }else if(type==1){\n            cc.tween(node).repeatForever(cc.tween().by(.5,{x:120}).delay(.5).by(.3,{x:-120})).start();\n        }\n    }\n\n    // update (dt) {}\n}\n"]}