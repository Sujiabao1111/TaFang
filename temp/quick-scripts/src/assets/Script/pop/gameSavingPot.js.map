{"version":3,"sources":["assets\\Script\\pop\\gameSavingPot.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { AssistCtr } from \"../Assist/AssistCtr\";\nimport baseTs from \"../base/baseTs\";\nimport { AdPosition } from \"../common/AdPosition\";\nimport { customsInfo, updateType } from \"../common/faceTs\";\nimport NameTs from \"../common/NameTs\";\nimport pageTs from \"../common/pageTs\";\nimport { UrlConst } from \"../server/UrlConst\";\nimport AdController from \"../server/xmsdk_cocos/AD/AdController\";\nimport soundController from \"../soundController\";\nimport TrackMgr from \"../TrackMgr/TrackMgr\";\nimport tool from \"../util/tool\";\nimport util from \"../util/util\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class gameSavingPot extends baseTs {\n\n    @property({type:cc.Label,displayName:\"金币\"})\n    private coinLabel:cc.Label = null;\n    \n    @property({type:cc.Label,displayName:\"倒计时\"})\n    private timeLabel:cc.Label = null;\n\n    @property({type:cc.Node,displayName:\"领取按钮\"})\n    private getBtnNode:cc.Node = null;\n    \n    @property({type:cc.Node,displayName:\"明日按钮\"})\n    private tomorrowBtnNode:cc.Node = null;\n    \n    @property({type:cc.Widget,displayName:\"提现按钮widget\"})\n    walletBtnWidget:cc.Widget = null; //提现按钮\n\n    @property({type:cc.Label,displayName:\"钱包金币\"})\n    private walletLabel:cc.Label = null;\n\n    private coin:number = 0;//随机金币\n    \n    onLoad(){\n\n        //数据更新\n        cc.game.on(NameTs.Game_View_UserDataUpdata,(res)=>{\n\n            if(res==updateType.coin){\n                let userData = util.userData;\n                this.walletLabel.string = String(userData.coin);\n            }\n\n        },this);\n\n        cc.game.emit(NameTs.Game_View_UserDataUpdata,updateType.coin);\n        \n        this.walletBtnWidget.top += Number(util.iphoneXTop);\n\n        TrackMgr.AppBuyProductDialog_hcdg({\n            dialog_name_hcdg: \"存钱罐弹窗\",\n        });\n        \n    }\n\n    start () {\n\n    }\n\n    /**初始化 */\n    init(){\n\n        util.post({\n            url:UrlConst.savingPotIndex,\n            success:(data)=>{\n                let state:number = 0;\n                if(data){\n                    this.coin = data.point;\n                    state = data.status;\n                }\n                if(state==0){\n                    cc.game.emit(NameTs.Game_SavingPost_Icon);\n                }\n                this.tomorrowBtnNode&&(this.tomorrowBtnNode.active = state==0?true:false);\n                this.getBtnNode&&(this.getBtnNode.active = state==1?true:false);\n                this.setState();\n            },\n            fail:()=>{\n                this.tomorrowBtnNode&&(this.tomorrowBtnNode.active = true);\n                this.getBtnNode&&(this.getBtnNode.active = false);\n                this.setState();\n                AssistCtr.showToastTip(\"网络问题，请稍后！\");\n            }\n        })\n\n        \n        \n        \n    }\n\n    /**设置东西 */\n    setState(){\n        this.coinLabel.string = this.coin+\"红包币\";\n        this.getBtnNode.stopAllActions();\n        if(this.getBtnNode.active){\n            cc.tween(this.getBtnNode).repeatForever(\n                cc.tween().to(.5,{scale:1.1}).to(.5,{scale:1})\n            ).start();\n        }\n\n        if(this.tomorrowBtnNode.active){\n            this.unscheduleAllCallbacks();\n            this.timeLabel.string =\"倒计时 \"+tool.formatData(5);\n            this.schedule(()=>{\n                this.timeLabel.string =\"倒计时 \"+ tool.formatData(5);\n                if(tool.formatData(5)==\"00:00:00\"){\n                    this.init();\n                }\n            },1);\n        }\n    }\n\n    getBtn(){\n\n        soundController.singleton.clickAudio();\n\n        util.post({\n            url:UrlConst.savingPotReceive,\n            success:()=>{\n                TrackMgr.AppBuyProductDialog_hcdg({\n                    dialog_name_hcdg: \"存钱罐弹窗\",\n                    dialog_enter: \"领取\"\n                });\n                let savingPotIcon:cc.Node = util.GlobalMap.get(\"savingPot\")||this.node;\n                cc.game.emit(NameTs.Game_Effect_coin,{node:savingPotIcon,value:this.coin,num:10});\n                cc.game.emit(NameTs.Game_SavingPost_Icon);\n                this.tomorrowBtnNode.active = true;\n                this.getBtnNode.active = false;\n                this.setState();\n                AssistCtr.showToastTip(\"获取\"+this.coin+\"红包币\");\n                this.closePage();\n            },\n            fail:()=>{\n                AssistCtr.showToastTip(\"网络问题，请稍后！\");\n            }\n        })\n\n    }\n\n    /**\n     * 关闭页面\n     */\n    closeBtn(){\n        soundController.singleton.clickAudio();\n        TrackMgr.AppBuyProductDialog_hcdg({\n            dialog_name_hcdg: \"存钱罐弹窗\",\n            dialog_enter: \"关闭\"\n        });\n        this.closePage();\n    }\n\n    \n    /**提现 */\n    walletBtn(){\n        TrackMgr.AppClick({\n            app_page_title: \"转盘\",\n            app_ck_module: \"提现\",\n            app_exposure_type: \"icon\",\n        })\n        soundController.singleton.clickAudio();\n        cc.game.emit(NameTs.Game_Pop_Open,pageTs.pageName.GameWallet);\n    }\n\n    // update (dt) {}\n}\n"]}