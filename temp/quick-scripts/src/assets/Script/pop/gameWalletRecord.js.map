{"version":3,"sources":["assets\\Script\\pop\\gameWalletRecord.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,yCAAoC;AACpC,sDAAiD;AACjD,+CAA8C;AAC9C,qDAAgD;AAChD,sDAAiD;AAE3C,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAU5C;IAA8C,oCAAM;IAApD;QAAA,qEAkEC;QA/DG,oBAAc,GAAY,IAAI,CAAC;QAG/B,kBAAY,GAAY,IAAI,CAAC;QAG7B,qBAAe,GAAc,IAAI,CAAC;QAGlC,mBAAa,GAAY,IAAI,CAAC;;IAsDlC,CAAC;IApDG,wBAAwB;IAExB,mCAAQ,GAAR;QAAA,iBA4CC;QA3CG,eAAK,CAAC,IAAI,CAAC;YACP,GAAG,EAAE,mBAAQ,CAAC,aAAa;YAC3B,SAAS,EAAE,UAAA,GAAG;gBACV,IAAG,CAAC,KAAI,CAAC,OAAO,EAAC;oBACb,OAAO;iBACV;gBAED,IAAI,GAAG,CAAC,IAAI,KAAK,CAAC,EAAE;oBAChB,IAAI,UAAU,GAA4B,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC;oBACxD,IAAI,WAAW,GAAG,KAAI,CAAC,aAAa,CAAC,QAAQ,CAAC;oBAC9C,IAAI,MAAM,GAAG,CAAC,CAAC,CAAS,iBAAiB;oBACzC,IAAI,WAAW,CAAC,MAAM,GAAG,UAAU,CAAC,MAAM,EAAE;wBACxC,MAAM,GAAG,UAAU,CAAC,MAAM,GAAG,WAAW,CAAC,MAAM,CAAC;qBACnD;oBACD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,EAAE,CAAC,EAAE,EAAE;wBAC7B,IAAI,UAAU,GAAG,EAAE,CAAC,WAAW,CAAC,KAAI,CAAC,eAAe,CAAC,CAAC;wBACtD,UAAU,CAAC,MAAM,GAAG,KAAI,CAAC,aAAa,CAAC;wBACvC,UAAU,CAAC,MAAM,GAAG,IAAI,CAAC;qBAC5B;oBAED,IAAI,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE;wBACvB,KAAI,CAAC,YAAY,CAAC,MAAM,GAAG,KAAK,CAAC;wBACjC,KAAI,CAAC,cAAc,CAAC,MAAM,GAAG,IAAI,CAAC;wBAElC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;4BACxC,IAAI,WAAW,CAAC,CAAC,CAAC,EAAE;gCAChB,WAAW,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,sBAAY,CAAC,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;6BACvE;yBACJ;qBACJ;yBACI;wBACD,KAAI,CAAC,YAAY,CAAC,MAAM,GAAG,IAAI,CAAC;wBAChC,KAAI,CAAC,cAAc,CAAC,MAAM,GAAG,KAAK,CAAC;qBACtC;iBACJ;qBACI;iBAEJ;YACL,CAAC;YACD,MAAM,EAAE,UAAA,GAAG;YAEX,CAAC;SACJ,CAAC,CAAA;IACN,CAAC;IAED,qCAAU,GAAV;QACI,yBAAe,CAAC,SAAS,CAAC,UAAU,EAAE,CAAC;QACvC,IAAI,CAAC,SAAS,EAAE,CAAC;IACrB,CAAC;IA9DD;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;4DACa;IAG/B;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;0DACW;IAG7B;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;6DACc;IAGlC;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;2DACY;IAZb,gBAAgB;QADpC,OAAO;OACa,gBAAgB,CAkEpC;IAAD,uBAAC;CAlED,AAkEC,CAlE6C,gBAAM,GAkEnD;kBAlEoB,gBAAgB","file":"","sourceRoot":"/","sourcesContent":["import baseTs from \"../base/baseTs\";\nimport WalletRecord from \"../model/WalletRecord\";\nimport { UrlConst } from \"../server/UrlConst\";\nimport XMSDK from \"../server/xmsdk_cocos/XMSDK\";\nimport soundController from \"../soundController\";\n\nconst { ccclass, property } = cc._decorator;\n\nexport interface walletRecordData {\n    amount: string\t    //现金（元）\n    createTime: number\t//提现时间\n    remark: string\t    //备注\n    state: number       //状态: 0-审核中 2-审核不通过 3-已转账\n}\n\n@ccclass\nexport default class gameWalletRecord extends baseTs {\n\n    @property(cc.Node)\n    haveRecordNode: cc.Node = null;\n\n    @property(cc.Node)\n    noRecordNode: cc.Node = null;\n\n    @property(cc.Prefab)\n    walletRecordPre: cc.Prefab = null;\n\n    @property(cc.Node)\n    recordContent: cc.Node = null;\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onEnable() {\n        XMSDK.post({\n            url: UrlConst.wallet_record,\n            onSuccess: res => {\n                if(!this.isValid){\n                    return;\n                }\n\n                if (res.code === 0) {\n                    let recordData: Array<walletRecordData> = res.data.list;\n                    let recordChild = this.recordContent.children;\n                    let addNum = 0;         //需要添加的recordItem\n                    if (recordChild.length < recordData.length) {\n                        addNum = recordData.length - recordChild.length;\n                    }\n                    for (let i = 0; i < addNum; i++) {\n                        let recordItem = cc.instantiate(this.walletRecordPre);\n                        recordItem.parent = this.recordContent;\n                        recordItem.active = true;\n                    }\n\n                    if (recordData.length > 0) {\n                        this.noRecordNode.active = false;\n                        this.haveRecordNode.active = true;\n\n                        for (let i = 0; i < recordData.length; i++) {\n                            if (recordChild[i]) {\n                                recordChild[i].getComponent(WalletRecord).updateData(recordData[i]);\n                            }\n                        }\n                    }\n                    else {\n                        this.noRecordNode.active = true;\n                        this.haveRecordNode.active = false;\n                    }\n                }\n                else {\n\n                }\n            },\n            onFail: err => {\n\n            }\n        })\n    }\n\n    clickClose() {\n        soundController.singleton.clickAudio();\n        this.closePage();\n    }\n}\n"]}