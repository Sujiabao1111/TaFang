{"version":3,"sources":["assets\\Script\\pop\\gameKingPaoProgress.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { AssistCtr } from \"../Assist/AssistCtr\";\r\nimport baseTs from \"../base/baseTs\";\r\nimport { AdPosition } from \"../common/AdPosition\";\r\nimport NameTs from \"../common/NameTs\";\r\nimport pageTs from \"../common/pageTs\";\r\nimport PageManage from \"../PageManage\";\r\nimport { UrlConst } from \"../server/UrlConst\";\r\nimport AdController from \"../server/xmsdk_cocos/AD/AdController\";\r\nimport XMSDK from \"../server/xmsdk_cocos/XMSDK\";\r\nimport TrackMgr from \"../TrackMgr/TrackMgr\";\r\n\r\nexport interface kingPaoPressData {\r\n    percent: number,                //进度百分比\r\n    process: number,                //任务进度\r\n    processTarget: number,          //任务总目标\r\n    status:number,                  //任务状态：0：无状态；1：打卡任务；2:签到任务；3：通关任务；4：看视频任务\r\n    sign:boolean,                   //当是打卡任务的时候适用，是否打卡\r\n}\r\n\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class gameKingPaoProgress extends baseTs {\r\n\r\n    @property(cc.Node)\r\n    img_videoIcon: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    lable_btnType: cc.Node = null;\r\n\r\n    @property(cc.RichText)\r\n    lable_progress: cc.RichText = null;\r\n\r\n    @property(cc.RichText)\r\n    lable_progressTip: cc.RichText = null;\r\n\r\n    kingPaoPressData:kingPaoPressData = null;            \r\n\r\n    start() {\r\n\r\n    }\r\n\r\n    onEnable(){\r\n        TrackMgr.AppBuyProductDialog_hcdg({\r\n            dialog_name_hcdg: `百万分红`\r\n        })\r\n    }\r\n\r\n    init(data:kingPaoPressData) {\r\n        this.kingPaoPressData = data;        \r\n        this.img_videoIcon.active = false;\r\n        this.lable_btnType.x = 0;\r\n\r\n        if(data.status == 1){\r\n            this.lable_progress.string = `<color=#BB420E>累计打卡${data.processTarget}天(</c><color=#669E00>${data.process}</color><color=#BB420E>/${data.processTarget})</color>`\r\n            this.img_videoIcon.active = true;\r\n            this.lable_btnType.x = 29;\r\n            this.lable_btnType.getComponent(cc.Label).string = `打卡`;\r\n\r\n            TrackMgr.AppBuyProductDialog_hcdg({\r\n                dialog_name_hcdg: \"打卡任务弹窗\"\r\n            })\r\n        }        \r\n        else if(data.status == 2){\r\n            this.lable_progress.string = `<color=#BB420E>累计签到${data.processTarget}天(</c><color=#669E00>${data.process}</color><color=#BB420E>/${data.processTarget})</color>`;\r\n            this.lable_btnType.getComponent(cc.Label).string = `去签到`;\r\n\r\n            TrackMgr.AppBuyProductDialog_hcdg({\r\n                dialog_name_hcdg: \"签到任务弹窗\"\r\n            })\r\n        }\r\n        else if(data.status == 3){\r\n            this.lable_progress.string = `<color=#BB420E>通过${data.processTarget}关(</c><color=#669E00>${data.process}</color><color=#BB420E>/${data.processTarget})</color>`;\r\n            this.lable_btnType.getComponent(cc.Label).string = `去闯关`;\r\n\r\n            TrackMgr.AppBuyProductDialog_hcdg({\r\n                dialog_name_hcdg: \"通关任务弹窗\"\r\n            })\r\n        }\r\n        else if(data.status == 4){\r\n            this.lable_progress.string = `<color=#BB420E>累计观看视频${data.processTarget}个(</c><color=#669E00>${data.process}</color><color=#BB420E>/${data.processTarget})</color>`\r\n            this.lable_btnType.getComponent(cc.Label).string = `去完成`;\r\n\r\n            TrackMgr.AppBuyProductDialog_hcdg({\r\n                dialog_name_hcdg: `看${data.processTarget}个视频任务弹窗`\r\n            })\r\n        }\r\n        else{\r\n            this.closePage();\r\n            return;\r\n        }\r\n        this.lable_progressTip.string = `<color=#D26C41>即可增加</c><color=#F92222>${data.percent}%</color><color=#D26C41>进度</color>`\r\n    }\r\n\r\n    updateData(){\r\n        XMSDK.getdataStr({\r\n            url: UrlConst.kingPaoProgress,\r\n            onSuccess: res => {\r\n                if (res.code === 0 && res.data) {\r\n                    if(!this.isValid){\r\n                        return;\r\n                    }\r\n\r\n                    this.init(res.data);\r\n                }\r\n                else {\r\n                    if(res){\r\n                        AssistCtr.showToastTip(res.message);\r\n                    }       \r\n                }\r\n            },\r\n            onFail: err => {\r\n\r\n            }\r\n        })           \r\n    }\r\n\r\n    clickOk(){\r\n        if(this.kingPaoPressData){\r\n            if(this.kingPaoPressData.status != 4){\r\n                TrackMgr.AppDialogClick_hcdg({                \r\n                    dialog_name_hcdg: `${this.lable_btnType.getComponent(cc.Label).string}任务弹窗`,\r\n                    ck_module: `${this.lable_btnType.getComponent(cc.Label).string}`\r\n                })    \r\n            }\r\n            else{\r\n                TrackMgr.AppDialogClick_hcdg({                \r\n                    dialog_name_hcdg: `看500视频任务弹窗弹窗`,\r\n                    ck_module: `去完成`\r\n                })    \r\n            }\r\n\r\n            \r\n\r\n            if(this.kingPaoPressData.status == 1){                \r\n                AdController.loadAd(AdPosition.kingTaskSign, (res) => {\r\n                    if(this && this.kingPaoPressData){\r\n                        XMSDK.post({\r\n                            url: UrlConst.kingPaoOpen,\r\n                            data: {\r\n                                status: this.kingPaoPressData.status\r\n                            },\r\n                            onSuccess: res => {\r\n                                if (res.code === 0) {\r\n                                    if(!this.isValid){\r\n                                        return;\r\n                                    }\r\n\r\n                                    AssistCtr.showToastTip(`今日打卡成功!明日再来哦~`);\r\n                                    this.closePage();     \r\n                                    cc.game.emit(NameTs.Game_KingPaoTask_Update);\r\n                                }\r\n                                else {\r\n                                    if(res){\r\n                                        AssistCtr.showToastTip(res.message);\r\n                                    }   \r\n                                }\r\n                            },\r\n                            onFail: err => {\r\n                \r\n                            }\r\n                        }\r\n                        )\r\n                    }\r\n                }, () => {\r\n                    AssistCtr.showToastTip(\"加载视频失败，请稍后！\");\r\n                })     \r\n                TrackMgr.AppDialogClick_hcdg({\r\n                    dialog_name_hcdg: \"打卡任务弹窗\",\r\n                    ck_module:\"打卡\",\r\n                    active_ad_hcdg:\"激励视频\"\r\n                });\r\n            }\r\n            else if(this.kingPaoPressData.status == 2){\r\n                cc.game.emit(NameTs.Game_Pop_Open, pageTs.pageName.GameSign);\r\n                this.closePage();\r\n            }\r\n            else{\r\n                this.closePage();\r\n                if(PageManage.singleton.findPage(pageTs.pageName.GameKingPao)){\r\n                    PageManage.singleton.closePage(pageTs.pageName.GameKingPao, false);\r\n                }                              \r\n            }\r\n        }\r\n    }\r\n\r\n    clickClose() {\r\n        if(this.kingPaoPressData.status != 4){\r\n            TrackMgr.AppDialogClick_hcdg({                \r\n                dialog_name_hcdg: `${this.lable_btnType.getComponent(cc.Label).string}任务弹窗`,\r\n                ck_module: \"关闭\"\r\n            })\r\n    \r\n        }\r\n        else{\r\n            TrackMgr.AppDialogClick_hcdg({                \r\n                dialog_name_hcdg: `看500视频任务弹窗弹窗`,\r\n                ck_module: `关闭`\r\n            }) \r\n        }\r\n\r\n        this.closePage();\r\n    }\r\n}\r\n"]}