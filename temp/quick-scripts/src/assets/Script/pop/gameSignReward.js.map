{"version":3,"sources":["assets\\Script\\pop\\gameSignReward.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { AssistCtr } from \"../Assist/AssistCtr\";\nimport baseTs from \"../base/baseTs\";\nimport { AdPosition } from \"../common/AdPosition\";\nimport { gameNumerical } from \"../common/faceTs\";\nimport NameTs from \"../common/NameTs\";\nimport { UrlConst } from \"../server/UrlConst\";\nimport AdController from \"../server/xmsdk_cocos/AD/AdController\";\nimport XMSDK from \"../server/xmsdk_cocos/XMSDK\";\nimport soundController from \"../soundController\";\nimport TrackMgr from \"../TrackMgr/TrackMgr\";\nimport util from \"../util/util\";\nimport gameSign, { signItemData, signRewardData } from \"./gameSign\";\n\nexport const SignDayRedpack = [0, 0, 1, 0, 0, 0, 1]\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class PannelReward extends baseTs {\n    @property(cc.Node)\n    viewport: cc.Node = null;\n\n    @property(cc.Node)\n    passView: cc.Node = null;\n\n    @property(cc.Node)\n    doubleGoldNode: cc.Node = null;\n\n    @property(cc.Label)\n    lable_redAddNum: cc.Label = null;\n\n    @property(cc.Label)\n    lable_changNum: cc.Label = null;\n\n    @property(cc.Label)\n    lable_rewardListTipGold: cc.Label = null;\n\n    @property(cc.Node)\n    feed_node: cc.Node = null;\n    \n    @property(cc.Node)\n    doubleBtnNode: cc.Node = null;\n    \n    @property(cc.Node)\n    closeBtnNode: cc.Node = null;\n\n    @property(cc.Node)\n    getBtnNode: cc.Node = null;\n\n\n    //---------------过度页------------------------\n    @property(cc.Sprite)\n    img_prize: cc.Sprite = null;\n\n    @property(cc.Label)\n    lable_prize: cc.Label = null;\n\n    @property(cc.SpriteFrame)\n    img_goldIcon: cc.SpriteFrame = null;\n\n    @property(cc.SpriteFrame)\n    img_redIcon: cc.SpriteFrame = null;\n    @property({type:cc.Node,displayName:\"倍数\"})\n    private multipleNode:cc.Node = null;\n    \n    @property({type:cc.Label,displayName:\"倍数金币\"})\n    private lable_addGold2:cc.Label = null;\n    \n\n    data = null;\n    gaintype = null;\n    rewardList: Array<signRewardData> = null;\n    rewardNodeList = null;\n\n\n    tempNode = null;\n    isRedpack = null;\n    addGold = null;   \n    /**签到天数 */\n    signDays:number = 1;\n\n    /**是否改变了 */\n    isChange:boolean = false;\n\n    onEnable() {\n        // UIFunc.openUI(ActivityPannelName.PannelTempNode, (node, script) => {\n        //     this.tempNode = node;\n        // })        \n        AssistCtr.checkIsOpenInserAd(AdPosition.SignAwardInsert)\n\n        \n        this.scheduleOnce(()=>{\n\n            this.closeBtnNode.active = true;\n\n        },gameNumerical.closeTime);\n        cc.tween(this.multipleNode).repeatForever(\n            cc.tween().to(.3,{angle:10}).to(.2,{angle:0})\n        ).start();\n    }\n\n    onDisable() {\n        // if (this.tempNode) {\n        //     UIFunc.closeUI(ActivityPannelName.PannelTempNode);\n        //     this.tempNode = null;\n        // }\n        AdController.hideInfoAd(AdPosition.InfoSignRewardView);\n\n        if(util.adPreObj[AdPosition.InfoSignRewardView]){\n            util.preloadAd(AdPosition.InfoSignRewardView,true);\n        }\n\n        if(this.data && this.data[`callBack`]){\n            this.data[`callBack`]();\n        }\n\n        util.isOkSign = true;\n        cc.game.emit(NameTs.Game_KingPaoTask_Update);\n    }\n\n    init(signAwardData) {\n        this.isChange = false;\n        let data = signAwardData.list;\n        let index = signAwardData.currentDay;\n        let gaintype = signAwardData.type;\n        this.signDays = signAwardData.signDays;\n        if (gaintype == 1) {\n            this.viewport.active = true;\n            this.passView.active = false;\n            AdController.loadInfoAd(AdPosition.InfoSignRewardView, 636, this.feed_node);//636:feedNode信息流容器节点的宽度            \n        }\n        else {\n            this.viewport.active = false;\n            this.passView.active = true;\n\n            AdController.loadAd(AdPosition.VideoSignDouble, (res) => {\n                AdController.loadInfoAd(AdPosition.InfoSignRewardView, 636, this.feed_node);//636:feedNode信息流容器节点的宽度  \n                if(util.adPreObj[AdPosition.VideoSignDouble]){\n                    util.preloadAd(AdPosition.VideoSignDouble);\n                }\n            }, () => {\n                AssistCtr.showToastTip(\"加载视频失败，请稍后！\");\n            })\n\n            setTimeout(() => {\n                this.viewport&&(this.viewport.active = true);\n                this.passView&&(this.passView.active = false); \n            }, 10000);\n        }\n\n        this.data = signAwardData;\n        this.gaintype = gaintype;\n        this.viewport.opacity = 255;\n        this.rewardList = data.rewardList;\n        this.isRedpack = SignDayRedpack[index];\n        let item = this.rewardList[0];\n        let change = util.userData.exchangeRate;\n        let gold = 0;\n\n        this.doubleBtnNode.active = this.gaintype==1;\n\n        this.getBtnNode.active = this.gaintype==2;\n\n        if (item) {\n            gold = this.gaintype == 1 ? item.rewardValue : this.gaintype == 2 ? item.rewardPlusValue : item.rewardPlusValue - item.rewardValue\n            this.lable_redAddNum.string = \"+\" + gold+\"红包币\";\n            this.lable_changNum.string = `红包${util.userData.coin + gold} ≈ ${((util.userData.coin + gold) / change).toFixed(2)}元`;\n            this.lable_rewardListTipGold.string = `${util.userData.coin + gold} ≈ ${((util.userData.coin + gold) / change).toFixed(2)}元`;\n\n            this.lable_addGold2.string = gold*2+\"\";\n        }\n\n        if (!this.isRedpack) {\n            this.img_prize.spriteFrame = this.img_goldIcon;\n            this.lable_prize.string = `+${gold}`+\"红包币\";\n        }\n        else {\n            this.img_prize.spriteFrame = this.img_redIcon;\n            this.lable_prize.string = `+${gold / util.userData.exchangeRate}元`;\n        }\n\n        this.addGold = gold;\n        //GameInfo.gainGold(gold);\n\n        if(this.gaintype==2){\n            TrackMgr.AppBuyProductDialog_hcdg({\n                dialog_name_hcdg:\"普通签到成功弹窗\"\n            })\n        }\n        \n    }\n\n    \n\n    finishAnimation() {        \n        this.closePage();\n    }\n\n    startAnimation() {\n        TrackMgr.AppDialogClick_hcdg({                \n            dialog_name_hcdg: `签到成功弹窗`,\n            ck_module: \"收下\"\n        })\n\n        soundController.singleton.clickAudio();\n        let callback = () => {\n            if (!this.isRedpack) {\n                for (let m in this.rewardList) {\n                    // AssistCtr.findPropSprite(this.rewardList[m].type, this.rewardList[m].keyId, (spriteFrame) => {\n                    //     if (this.rewardNodeList[m]) {\n                    //         let temp = this.tempNode.getComponent(PannelTempNode).getGoldNode();\n                    //         AssistCtr.playAnimate(spriteFrame, this.rewardNodeList[m], temp, () => {\n                    //             this.finishAnimation();\n                    //         });\n                    //     }\n\n                    // }, () => {\n                    //     cc.error(\"加载图片失败\", this.rewardList[m].type, this.rewardList[m].keyId);\n                    //     this.quit();\n                    // })\n                    //cc.game.emit(NameTs.Game_Effect_coin,{node:this.rewardNodeList[m], value:res.coin});\n                }\n                cc.game.emit(NameTs.Game_Effect_coin, { node: this.doubleGoldNode, value: this.addGold });\n                this.finishAnimation();\n            }\n            else {\n                cc.game.emit(NameTs.Game_Effect_coin, { node: this.doubleGoldNode, value: this.addGold });\n                this.finishAnimation();\n\n                // let temp = this.tempNode.getComponent(PannelTempNode).getGoldNode();\n                // AssistCtr.playAnimate(this.doubleGoldNode.getComponent(cc.Sprite).spriteFrame, this.doubleGoldNode, temp, () => {\n                //     this.finishAnimation();\n                // });\n            }\n            AssistCtr.loadAdInsertVideo(AdPosition.SignAwardInsert, ()=>{console.log(\"签到奖励插屏广告播放完成\")});\n        }\n        this.viewport.runAction(cc.sequence(cc.fadeOut(0.3), cc.callFunc(callback)))\n    }\n\n\n    /**双倍收下 */\n    doubleBtn(e,res){\n        soundController.singleton.clickAudio();\n        \n        \n        \n\n        let num = Number(res);\n\n        if(this.gaintype==2||this.isChange){\n            num = 1;\n        }\n\n        let url:string = num?UrlConst.sign_videoGet:UrlConst.sign_commonGet;\n\n        let day:string = `第${this.signDays}天`;\n\n        let coin:number = num?this.rewardList[0].rewardPlusValue:this.rewardList[0].rewardValue;\n\n        let successFn = ()=>{\n\t\t\t\n            XMSDK.getdataStr({\n                url,\n                onSuccess: res => {\n                    if (res.code === 0) {\n                        this.closePage();\n                        \n                        AssistCtr.loadAdInsertVideo(AdPosition.SignAwardInsert, ()=>{console.log(\"签到奖励插屏广告播放完成\")});\n                        cc.game.emit(NameTs.Game_Effect_coin, { node: this.doubleGoldNode, value: coin ,num:10});\n                    }\n                    else {\n                        TrackMgr.Signin_new({\n                            get_state: false,\n                            get_type: this.isChange||this.gaintype==2?\"双倍领取\":\"单倍直接领取\",                                                \n                            get_days: day,                        \n                        })\n                    }\n                },\n                onFail: err => {\n\t\t\t\t\t\n                }\n            })\n\t\t\t\t\t\tthis.closePage();\n                        \n                        //AssistCtr.loadAdInsertVideo(AdPosition.SignAwardInsert, ()=>{console.log(\"签到奖励插屏广告播放完成\")});\n                        //cc.game.emit(NameTs.Game_Effect_coin, { node: this.doubleGoldNode, value: coin ,num:10});\n\n        }\n\n        if(num==1&&this.gaintype==1&&!this.isChange){\n            this.viewport&&(this.viewport.active = false);\n            this.passView&&(this.passView.active = true);\n\n            this.lable_prize.string = \"+\" + coin+\"红包币\";\n            AdController.loadAd(AdPosition.VideoSignDouble, (res) => { \n                // successFn();\n                if(util.adPreObj[AdPosition.VideoSignDouble]){\n                    util.preloadAd(AdPosition.VideoSignDouble);\n                }\n                console.log(\"看视频\")\n                this.doubleBtnNode&&(this.doubleBtnNode.active = false);\n                this.getBtnNode&&(this.getBtnNode.active = true);\n                this.lable_redAddNum.string = \"+\" + coin+\"红包币\";\n                // this.gaintype = 2;\n                this.isChange = true;\n                AdController.loadInfoAd(AdPosition.InfoSignRewardView, 636, this.feed_node);//636:feedNode信息流容器节点的宽度  \n            }, () => {\n                AssistCtr.showToastTip(\"加载视频失败，请稍后！\");\n            });\n\n            AdController.hideInfoAd(AdPosition.InfoSignRewardView);\n            setTimeout(() => {\n                this.viewport&&(this.viewport.active = true);\n                this.passView&&(this.passView.active = false); \n            }, 10000);\n\n            TrackMgr.AppDialogClick_hcdg({            \n                dialog_name_hcdg: `普通签到成功弹窗`,\n                ck_module: \"翻倍领取\",             \n                active_ad_hcdg:\"激励视频\"   \n            })\n\n        }else{\n            successFn();\n            let text:string = this.isChange||this.gaintype==2?\"双倍领取\":\"单倍直接领取\";\n            TrackMgr.Signin_new({\n                get_state: true,\n                get_type: text,                                                \n                get_days: day,                        \n            })  \n            console.log(\"不看视频\")     \n            if(!this.isChange&&this.gaintype!==2){\n                TrackMgr.AppDialogClick_hcdg({            \n                    dialog_name_hcdg: `普通签到成功弹窗`,\n                    ck_module: \"直接领取\"\n                }) \n            }\n            TrackMgr.AppDialogClick_hcdg({                \n                dialog_name_hcdg: `签到成功弹窗`,\n                ck_module: \"收下\"\n            });\n        }\n\n        \n\n    }\n};\n"]}