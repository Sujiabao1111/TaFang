{"version":3,"sources":["assets\\Script\\pop\\gamePropBox.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import baseTs from \"../base/baseTs\";\nimport jsonSingleton from \"../base/jsonSingleton\";\nimport NameTs from \"../common/NameTs\";\nimport propItem from \"../prop/propItem\";\nimport { UrlConst } from \"../server/UrlConst\";\nimport util from \"../util/util\";\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class gamePropBox extends baseTs {\n\n    @property({type:cc.Node,displayName:\"layout框\"})\n    private layOutContent: cc.Node = null;\n\n    @property({type:cc.ScrollView,displayName:\"滚动条\"})\n    private ScrollView: cc.ScrollView = null;\n\n    private propData = new Map();\n\n    onLoad () {\n\n        /**道具 */\n        // let propData = jsonSingleton.singleton.getJson(NameTs.propData);\n        this.loadAny(\"prefab/prop/propItem2\",cc.Prefab,(pre:cc.Prefab)=>{\n            if(util && util.propData){\n                util.propData.forEach((value) => {\n                    let item:cc.Node = cc.instantiate(pre);\n                    item.setParent(this.layOutContent);\n                    let itemTs:propItem = item.getComponent(propItem);\n                    if(itemTs)itemTs.init&&itemTs.init(value);\n                    this.propData.set(\"prop_\"+value.propIssueDetailList[0].propsId,item);\n                });\n            }\n            cc.game.emit(NameTs.Game_PropItem_Update);\n            this.ScrollView.scrollToPercentHorizontal(.05,.2);\n        });\n\n        \n        cc.game.on(NameTs.Game_PropItem_Update,()=>{\n            this.checkUpDateProp();\n        }, this);\n    }\n    \n    start () {\n\n    }\n\n    onEnable(){\n        \n    }\n    /**\n     * \n     */\n    checkUpDateProp(){\n        let num:number = 0;//道具大于0的有几个\n        for(let i = 0;i<util.userData.prop.length;i++){\n            let item:cc.Node = this.propData.get(\"prop_\"+util.userData.prop[i].type);\n            console.log(util.userData.prop[i].num,'util.userData.prop[i].num');\n            if(item){\n                item.active = util.userData.prop[i].num > 0;\n            }\n            if(util.userData.prop[i].num > 0){\n                num++;\n            }\n        }\n\n        if(num==1){\n            this.node.width = 120;\n        }else if(num == 2){\n            this.node.width = 200;\n        }else{\n            this.node.width = 255;\n        }\n        this.node.height = num==0?0:90;\n    }\n\n\n    // update (dt) {}\n}\n"]}