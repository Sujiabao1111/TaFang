{"version":3,"sources":["assets\\Script\\pop\\gameEarnPro.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { AssistCtr } from \"../Assist/AssistCtr\";\nimport baseTs from \"../base/baseTs\";\nimport { AdPosition } from \"../common/AdPosition\";\nimport NameTs from \"../common/NameTs\";\nimport turret from \"../game/turret/turret\";\nimport { UrlConst } from \"../server/UrlConst\";\nimport AdController from \"../server/xmsdk_cocos/AD/AdController\";\nimport XMSDK from \"../server/xmsdk_cocos/XMSDK\";\nimport soundController from \"../soundController\";\nimport TrackMgr from \"../TrackMgr/TrackMgr\";\nimport util from \"../util/util\";\n\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class gameEarnPro extends baseTs {\n\n    @property(cc.Label)\n    lable_redAddNum:cc.Label = null;\n\n    @property(cc.Label)\n    lable_goldNum:cc.Label = null;\n\n    @property(cc.Node)\n    feed_node: cc.Node = null;\n    \n    @property({type:cc.Node,displayName:\"倍数\"})\n    private multipleNode:cc.Node = null;\n\n    private redAmountNum = 500;\n\n    private coinItem:cc.Node = null;\n\n    start() {\n\n        cc.tween(this.multipleNode).repeatForever(\n            cc.tween().to(.3,{angle:10}).to(.2,{angle:0})\n        ).start();\n\n        \n\n    }\n\n    onEnable() {\n        AdController.loadInfoAd(AdPosition.randomRedPrizeView, 636, this.feed_node);//636:feedNode信息流容器节点的宽度\n    }\n\n\n    onDisable() {        \n        AdController.hideInfoAd(AdPosition.randomRedPrizeView);\n    }\n\n    init(data) {\n\n        this.redAmountNum = data.coin;\n        this.lable_goldNum.string = \"+\"+this.redAmountNum;\n        this.lable_redAddNum.string = this.redAmountNum*3+\"\";\n        \n        this.coinItem = util.GlobalMap.get(\"earnProgress\")||this.node;\n\n        \n        TrackMgr.luckybag_task({\n            activity_state: \"红包任务奖励弹窗\",\n        });\n    }\n\n    clickGet(e,src) {\n        soundController.singleton.clickAudio();\n        let isVideo:boolean = src==1?true:false;\n\n        let successFn = ()=>{\n\n            let coin:number = this.redAmountNum*(isVideo?3:1);\n            util.getdataStr({\n                url: UrlConst.earnProgressReceive,\n                success: res => {\n                    cc.game.emit(NameTs.Game_Effect_coin, {node:this.coinItem, value: coin,num:10 });\n                    if(isVideo){\n                        util.addTermCoin(this.redAmountNum*2);\n                    }\n                    cc.game.emit(NameTs.Game_EarnProgress_Updata);\n                    AssistCtr.showToastTip(\"获得\"+coin+\"红包币\");\n                    this.closePage();\n                },\n                fail: res => {\n                    AssistCtr.showToastTip(\"网络出错~\");\n                    this.closePage();\n                }\n            })\n        }\n        if(isVideo){\n            AdController.loadAd(AdPosition.earnProgressVideo, () => {\n                successFn();\n                TrackMgr.luckybag_task({\n                    activity_state: \"红包任务奖励弹窗\",\n                    button_name:\"多倍领取\"\n                });\n            }, () => {\n                AssistCtr.showToastTip(\"加载视频失败，请稍后！\");\n            });\n        }else{\n            TrackMgr.luckybag_task({\n                activity_state: \"红包任务奖励弹窗\",\n                button_name:\"普通领取\"\n            });\n            successFn();\n        }\n        \n    }\n\n    \n\n}\n"]}