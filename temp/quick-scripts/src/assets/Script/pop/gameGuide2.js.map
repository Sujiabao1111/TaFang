{"version":3,"sources":["assets\\Script\\pop\\gameGuide2.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import baseTs from \"../base/baseTs\";\nimport NameTs from \"../common/NameTs\";\nimport pageTs from \"../common/pageTs\";\nimport { UrlConst } from \"../server/UrlConst\";\nimport XMSDK from \"../server/xmsdk_cocos/XMSDK\";\nimport soundController from \"../soundController\";\nimport TrackMgr from \"../TrackMgr/TrackMgr\";\nimport util from \"../util/util\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class gameGuide2 extends baseTs {\n\n    @property({displayName:\"指导盒子\",type:cc.Node})\n    private content:cc.Node = null;\n    \n    @property({displayName:\"遮罩盒子\",type:cc.Node})\n    private maskBox:cc.Node = null;\n\n    @property({displayName:\"跳过页面\",type:cc.Node})\n    private skipNode:cc.Node = null;\n    \n    @property({displayName:\"等级\",type:cc.RichText})\n    private levelLabel:cc.RichText = null;\n    \n    @property({displayName:\"app的名字\",type:cc.Label})\n    private appName:cc.Label = null;\n\n    // LIFE-CYCLE CALLBACKS:\n\n    private data = [\n    ];\n\n    onLoad () {   \n\n        let name:string = (XMSDK.getAppName&&XMSDK.getAppName())||\"塔防无敌\";\n\n        this.appName.string = \"欢迎来到「\"+name+\"」\";\n        \n        util.setStorage(util.localDiary.noviceGuide,-1);\n\n        cc.game.on(NameTs.Game_Novice_Open,(res)=>{\n\n            this.setState(res);\n\n        },this);\n\n        cc.game.on(NameTs.Game_Novice_Close,()=>{\n\n            this.closePage();\n\n        },this);\n\n        util.getdataStr({\n            url: UrlConst.wallet_main2,\n            success: res => {\n\n                // for(let i =0 ;i<res.cashOutList.length;i++){\n\n                //     let item = res.cashOutList[i];\n\n                //     if(item.required>0){\n\n                //         this.data.push({\n                //             amount:item.amount,\n                //             level:item.required\n                //         })\n\n                //     }\n\n\n                // }\n                if(!this.isValid){\n                    return;\n                }\n\n                this.data = [];\n                for(let key in res.cashOutMap){\n                    let cashOutMapItem = res.cashOutMap[key];\n                    for(let j = 0;j<cashOutMapItem.length;j++){\n                        if(cashOutMapItem[j].rules){\n                            for(let k = 0;k<cashOutMapItem[j].rules.length;k++){\n                                let item = cashOutMapItem[j].rules[k];\n                                if(item.type==1&&this.data.push){\n                                    this.data.push({\n                                        amount:cashOutMapItem[j].amount,\n                                        level:item.demand\n                                    })\n                                }\n                            }\n                        }\n                        \n                    }\n                }\n                let newerLevel:number = (this.data[0]&&this.data[0].level)||18;\n                this.levelLabel.string =\"<color=#BB420E>合成到</c><color=#F92222>\"+newerLevel+\"级</c><color=#BB420E>炮塔\\n可立即提现哦！</c>\";\n\n            },\n        });\n\n    }\n\n    /**\n     * 第几个\n     */\n    init(data){\n\n        this.setState(data||1)\n\n    }\n\n    start () {\n\n    }\n\n    /**\n     * 状态\n     * @param type 第几个\n     */\n    setState(type:number){\n\n        let str:any = {};\n        switch(type){\n            case 2:\n                str.activity_state =\"欢迎页\";\n                str.click_event = \"点击\";\n                break;\n            case 4:\n                str.activity_state =\"提现金额到账\";\n                str.click_event = \"点击\";\n                break;\n            case 5:\n                str.activity_state =\"合成10级提现提示\";\n                str.click_event = \"点击\";\n                break;\n\n        }\n        if(str.activity_state){\n            TrackMgr.rookie_process(str);\n        }\n\n        util.userData.noviceGuide = type;\n\n        this.skipNode.active = type>2;\n\n        console.log(this.skipNode,type,'asfasfasfasf');\n\n        if(this.content && this.content.children){\n            this.content.children.forEach(item=>{\n                item.active = false;\n            });\n        }\n\n        if(this.maskBox && this.maskBox.children){\n            this.maskBox.children.forEach(item=>{\n                item.active = false;\n            });\n        }\n\n        if(this.content && this.content.children){\n            this.content.children[type-1].active = this.maskBox.children[type-1].active = true;\n        }        \n\n        let Widget:cc.Widget = this.maskBox.children[type-1].getComponent(cc.Widget);\n        if(Widget){\n            Widget.top += Number(util.iphoneXTop);\n        }\n\n\n        //存储本地\n        //util.setStorage(util.localDiary.noviceGuide,type);\n\n\n\n        if(type==1||type==2||type==6){\n            let hand:cc.Node = this.content.children[type-1].getChildByName(\"hand\");\n            this.handAni(hand,type==2?1:0);\n        }\n        \n    }\n\n    /**\n     * 跳过\n     */\n    skipBtn(){\n\n        soundController.singleton.clickAudio();\n\n        if(util.userData.noviceGuide==5){\n            TrackMgr.rookie_process({\n                activity_state :\"怪兽们出来了\",\n                click_event: \"点击\"\n            });\n            cc.game.emit(NameTs.Game_Treasure_Show);\n            this.closePage();\n            // this.showPage(pageTs.pageName.GameStart);\n            cc.game.emit(NameTs.Game_Start);\n            return\n        }\n        \n        let num:number = util.userData.noviceGuide+1;\n        \n\n        this.setState(num);\n    }\n\n\n    /**\n     * 手的动画\n     * @param node 节点\n     * @param type 类型 0点击 1拖拽\n     */\n    handAni(node:cc.Node,type:number){\n        // cc.tween(node.children[0]).repeatForever(cc.tween().to(0,{scale:0,opacity:255}).to(1,{scale:1}).to(.2,{opacity:0})).delay(.5).start();\n        // cc.tween(node.children[1]).repeatForever(cc.tween().to(0,{scale:0,opacity:255}).delay(.5).to(1,{scale:1}).to(.2,{opacity:0})).start();\n        if(type==0){\n            // cc.tween(node).repeatForever(cc.tween().by(.2,{y:-10}).by(.2,{y:10}).delay(.5)).start();\n        }else if(type==1){\n            cc.tween(node).repeatForever(cc.tween().by(.5,{x:120}).delay(.5).by(.3,{x:-120})).start();\n        }\n    }\n\n    // update (dt) {}\n}\n"]}