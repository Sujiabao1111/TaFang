{"version":3,"sources":["assets\\Script\\pop\\gameTaskReward.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { AssistCtr } from \"../Assist/AssistCtr\";\nimport baseTs from \"../base/baseTs\";\nimport { AdPosition } from \"../common/AdPosition\";\nimport { gameNumerical } from \"../common/faceTs\";\nimport NameTs from \"../common/NameTs\";\nimport pageTs from \"../common/pageTs\";\nimport PageManage from \"../PageManage\";\nimport { UrlConst } from \"../server/UrlConst\";\nimport AdController from \"../server/xmsdk_cocos/AD/AdController\";\nimport soundController from \"../soundController\";\nimport TrackMgr from \"../TrackMgr/TrackMgr\";\nimport util from \"../util/util\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class gameTaskReward extends baseTs {\n\n    @property({type:cc.Label,displayName:\"文字\"})\n    private rewardLabel:cc.Label = null;\n    \n    // @property({type:cc.Node,displayName:\"光\"})\n    // private light:cc.Node = null;\n    \n    @property({type:cc.Node,displayName:\"放弃领取\"})\n    private closeBtnNode:cc.Node = null;\n    \n    // @property({type:cc.Node,displayName:\"视频icon\"})\n    // private videoIcon:cc.Node = null;\n    \n    @property({type:cc.Node,displayName:\"信息流\"})\n    private feed_node:cc.Node = null;\n\n    //多少个金币\n    private coin:number = null;\n    //\n    private initData:any;\n\n\n\n    onLoad () {\n\n        // cc.tween(this.light).repeatForever(\n        //     cc.tween().to(1,{scale:1}).to(1,{scale:1.1})\n        // ).start();\n\n        this.scheduleOnce(()=>{\n\n            this.closeBtnNode.active = true;\n\n        },gameNumerical.closeTime);\n    }\n\n\n    /**\n     * \n     * @param data 数据\n     */\n    init(data){\n        this.coin  = data.coin;\n        if(this.rewardLabel){\n            this.rewardLabel.string = \"+\"+ this.coin+\"红包币\";\n        }\n        this.initData = data;\n        if(!util.adPreObj[AdPosition.TaskDayDoubleGet]){\n            util.preloadAd(AdPosition.TaskDayDoubleGet);\n        }\n\n        TrackMgr.AppBuyProductDialog_hcdg({\n            dialog_name_hcdg: (this.initData.typeTask==0?\"日常任务\":\"成就任务\")+ `红包待领取弹窗`,\n        })\n\n        \n        console.log(this.initData,'this.initData')\n        \n    }\n\n    start () {\n\n    }\n\n    /**\n     * 获取\n     */\n    getBtn(e,res){\n        \n        soundController.singleton.clickAudio();\n\n        TrackMgr.AppDialogClick_hcdg({                \n            dialog_name_hcdg:(this.initData.typeTask==0?\"日常任务\":\"成就任务\")+ `红包待领取弹窗`,\n            ck_module: \"领取\",\n            active_ad_hcdg:\"激励视频\"\n        })\n        if(this.initData&&this.initData.taskTitle){\n            AdController.loadAd(AdPosition.TaskDayDoubleGet,()=>{\n                if(this.initData){\n                    util.getdataStr({\n                        url:this.initData.url||(this.initData.typeTask==0?UrlConst.task_day_commonGet:UrlConst.achievement_commonGet),\n                        data:this.initData.data,\n                        success:()=>{\n                            if(!this.isValid){\n                                return;\n                            }\n\n                            cc.game.emit(NameTs.Game_Task_updata);\n                            TrackMgr.finish_task({\n                                mission_name: this.initData.taskTitle,\n                                mission_type: this.initData.typeTask==0?\"日常任务\":\"成就任务\",\n                                mission_coin: this.coin\n                            });\n                            TrackMgr.AppDialogClick_hcdg({                \n                                dialog_name_hcdg: (this.initData.typeTask==0?\"日常任务\":\"成就任务\")+ `红包领取成功弹窗`,\n                                ck_module: \"领取\",\n                            })\n                            TrackMgr.AppBuyProductDialog_hcdg({\n                                dialog_name_hcdg: (this.initData.typeTask==0?\"日常任务\":\"成就任务\")+ `红包领取成功弹窗`,\n                            })\n                            PageManage.singleton.showPage(pageTs.pageName.GameCoinReward,{coin:this.coin});\n                            this.closePage();\n                        },\n                        fail:()=>{\n                            AssistCtr.showToastTip(\"领取失败\");\n                        }\n                    })\n                }\n                if(util.adPreObj[AdPosition.TaskDayDoubleGet]){\n                    util.preloadAd(AdPosition.TaskDayDoubleGet);\n                }\n            }, () => {\n                AssistCtr.showToastTip(\"加载视频失败，请稍后！\");\n            });\n        }else{\n            AssistCtr.showToastTip(\"领取失败\");\n            this.closeBtn();\n        }\n        \n    }\n\n    /**\n     * 关闭\n     */\n    closeBtn(){\n        soundController.singleton.clickAudio();\n        this.closePage();\n        // this.SendPost();\n        PageManage.singleton.showPage(pageTs.pageName.GameTask);\n        // TrackMgr.MissionPriceClick({\n        //     mission_name: this.initData.taskTitle,\n        //     mission_type: this.initData.typeTask==0?\"日常任务\":\"成就任务\",\n        //     mission_button: \"放弃领取\",\n        //     mission_coin: this.coin\n        // })\n        TrackMgr.AppDialogClick_hcdg({                \n            dialog_name_hcdg: (this.initData.typeTask==0?\"日常任务\":\"成就任务\")+ `红包待领取弹窗`,\n            ck_module: \"关闭\"\n        })\n    }\n    \n    onEnable() {   \n        AdController.loadInfoAd(AdPosition.TaskRewardView, 636, this.feed_node);//636:feedNode信息流容器节点的宽度\n        \n        if(util.adPreObj[AdPosition.TaskRewardView]){\n            util.preloadAd(AdPosition.TaskRewardView,true);\n        } \n    }\n\n\n    onDisable() {\n        AdController.hideInfoAd(AdPosition.TaskRewardView);\n        //预加载金币信息流\n        if(!util.adPreObj[AdPosition.TaskRewardView]&&util.getHeavenPool()>0){\n            util.preloadAd(AdPosition.TaskRewardView,true);\n        }\n    }\n\n    // update (dt) {}\n}\n"]}