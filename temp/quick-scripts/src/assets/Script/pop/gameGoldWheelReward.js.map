{"version":3,"sources":["assets\\Script\\pop\\gameGoldWheelReward.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["/*\n * @Descripttion: \n * @version: \n * @Author: mies\n * @Date: 2021-02-24 17:41:47\n * @LastEditors: mies\n * @LastEditTime: 2021-02-26 14:50:55\n */\nimport { AssistCtr } from \"../Assist/AssistCtr\";\nimport baseTs from \"../base/baseTs\";\nimport { AdPosition } from \"../common/AdPosition\";\nimport { gameNumerical, updateType } from \"../common/faceTs\";\nimport NameTs from \"../common/NameTs\";\nimport pageTs from \"../common/pageTs\";\nimport RewardController from \"../controlelr/RewardController\";\nimport PageManage from \"../PageManage\";\nimport { UrlConst } from \"../server/UrlConst\";\nimport AdController from \"../server/xmsdk_cocos/AD/AdController\";\nimport XMSDK from \"../server/xmsdk_cocos/XMSDK\";\nimport soundController from \"../soundController\";\nimport TrackMgr from \"../TrackMgr/TrackMgr\";\nimport util from \"../util/util\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class gameGoldWheelReward extends baseTs {\n\n    @property({ type: cc.Label, displayName: \"文字\" })\n    private rewardLabel: cc.Label = null;\n\n    // @property({ type: cc.Node, displayName: \"光\" })\n    // private light: cc.Node = null;\n\n    @property({ type: cc.Node, displayName: \"放弃领取\" })\n    private closeBtnNode: cc.Node = null;\n\n    @property(cc.Sprite)\n    private rewardSprite: cc.Sprite = null;\n\n    // @property({type:cc.Node,displayName:\"视频icon\"})\n    // private videoIcon:cc.Node = null;\n\n    @property({ type: cc.Node, displayName: \"信息流\" })\n    private feed_node: cc.Node = null;\n\n    //多少个金币\n    private coin: number = null;\n    //\n    private initData: any;\n    closeCall: any;\n    isClickGetPrize: boolean = false;\n\n    /**\n     * \n     * @param data 数据\n     */\n    init(data, closeCall?) {\n        this.coin = data.reward.value;\n        this.closeCall = closeCall;\n        this.rewardLabel.string = \"+\" + this.coin;\n        this.rewardSprite.spriteFrame = data.reward.type == 1 ? RewardController.instance.findPointBigSprite(2) : RewardController.instance.findPointBigSprite(1)\n        this.initData = data;\n        this.isClickGetPrize = true\n    }\n\n    start() {\n\n    }\n\n    /**\n     * 获取\n     */\n    getBtn(e, res) {\n        this.getPrize();\n    }\n\n    /**\n     * 关闭\n     */\n    closeBtn() {\n        soundController.singleton.clickAudio();\n        this.node.active = false;\n        // this.SendPost();\n    }\n    getPrize() {\n        let self = this;\n        if (self.isClickGetPrize) {\n            self.isClickGetPrize = false;\n\n            soundController.singleton.clickAudio();\n\n            XMSDK.getdataStr({\n                url: UrlConst.goldWheel_checkIn,\n                data: {\n                    id: this.initData.id\n                },\n                onSuccess: res => {\n                    if(!this.isValid){\n                        return;\n                    }\n\n                    if (res.code === 0) {\n                        TrackMgr.AppDialogClick_hcdg({\n                            dialog_name_hcdg: \"金币转盘获得奖励弹窗\",\n                            ck_module: \"收下\",\n                            dialog_enter: \"首页金币转盘\",\n                        })\n                        // XMSDK.track({\n                        //     eventName: SAConst.AppDialogClick,\n                        //     props: {\n                        //         dialog_name2: \"金币转盘获得奖励弹窗\",\n                        //         ck_module: \"收下\",\n                        //         dialog_enter: this.isMain ? \"首页金币转盘\" : \"限时礼包收下跳转\",\n                        //     }\n                        // });\n                        self.startAnimation();\n                        // if (self.initData.reward.type == updateType.hongbao) {\n                        //     util.userData.coin += Number(self.initData.reward.value)\n                        // } else if (self.initData.reward.type == updateType.product) {\n                        //     util.userData.product += Number(self.initData.reward.value)\n                        // }\n                    }\n                    else {\n                        XMSDK.toast(res.message || '网络出错~', 2.5, 1);\n                        self.isClickGetPrize = true;\n                    }\n                },\n                onFail: err => {\n                    XMSDK.toast('网络出错~', 2.5, 1);\n                    self.isClickGetPrize = true;\n                }\n            })\n        }\n    }\n    startAnimation() {\n        let self = this;\n        self.isClickGetPrize = true;\n        self.closeCall && self.closeCall();\n        self.node.active = false;\n        if (this.initData.reward.type == 2) {\n            // util.addTermCoin(this.coin)\n            cc.game.emit(NameTs.Game_Effect_coin, { node: this.rewardSprite.node, value: this.coin,num:10,parent:cc.director.getScene().getChildByName('Canvas')});\n            AssistCtr.showToastTip(\"获取\"+this.coin+\"红包币\");\n        } else if (this.initData.reward.type == 1) {\n            util.productTurret(this.coin);\n            cc.game.emit(NameTs.Game_Effect_turret, { node: this.rewardSprite.node, num: this.coin ,parent:cc.director.getScene().getChildByName('Canvas')});\n            AssistCtr.showToastTip(\"获得\"+this.coin+\"个炮塔！\");\n        }\n    }\n\n    onEnable() {\n        AdController.loadInfoAd(AdPosition.goldWheelInfo, 636, this.feed_node);//636:feedNode信息流容器节点的宽度\n\n        // if(util.adPreObj[AdPosition.TaskRewardView]){\n        //     util.preloadAd(AdPosition.TaskRewardView,true);\n        // } \n        // cc.tween(this.light).repeatForever(\n        //     cc.tween().to(1, { scale: 1 }).to(1, { scale: 1.1 })\n        // ).start();\n    }\n\n\n    onDisable() {\n        AdController.hideInfoAd(AdPosition.goldWheelInfo);\n        // //预加载金币信息流\n        // if(!util.adPreObj[AdPosition.TaskRewardView]&&util.getHeavenPool()>0){\n        //     util.preloadAd(AdPosition.TaskRewardView,true);\n        // }\n    }\n\n    // update (dt) {}\n}\n"]}