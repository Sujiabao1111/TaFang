{"version":3,"sources":["assets\\Script\\common\\scrollTs.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import pool from \"./pool\";\n\nexport default class scrollTs{\n\n    private parent:cc.Node; //在哪里生成\n    private scrollView:cc.ScrollView;//滚动\n    private prefabItem:cc.Node;//item的节点\n    private num:number;//默认只用20个\n    private data:any;//数据\n\n    private pool:pool;\n\n    private startNum:number;\n    private endNum:number;\n\n    constructor(parent:cc.Node,scrollView:cc.ScrollView,prefabItem:cc.Prefab,data:any,num:number = data.length){\n\n        this.parent = parent;\n        this.scrollView = scrollView;\n        this.prefabItem = cc.instantiate(prefabItem);\n        this.num = num;\n        this.pool = new pool(this.prefabItem,20);\n        this.data = data;\n        this.init();\n    }\n\n\n    init(){\n        this.endNum = this.num;\n        this.startNum = 0;\n        for(let i = 0;i<this.num;i++){\n            if(this.data[i]){\n                this.createItem(i,this.data[i]);\n            }            \n        }\n\n        // this.scrollView.node.on(\"scroll-to-bottom\",(res:cc.ScrollView)=>{\n\n        //     console.log(\"前减后加\");\n        //     this.createFn(8,false);\n\n        // },this);\n\n        // this.scrollView.node.on(\"scroll-to-top\",(res:cc.ScrollView)=>{\n\n        //     console.log(\"前加后减\");\n        //     this.createFn(8,true);\n\n        // },this);\n\n    }\n\n\n    createFn(num:number,before:boolean){\n\n        if(this.startNum-num<0&&before)return;\n        //减掉\n        for(let i = num;i>0;){\n            this.clearItem(this.parent.children[!before?0:this.parent.childrenCount]);\n            i--;\n        }\n        \n        //增加\n        for(let i = 0;i<num;i++){\n            let id:number = this.endNum+i;\n            if(before){\n                id = this.startNum-1-i;\n            }\n            this.createItem(id,this.data[id]);\n        }\n\n        let scrollY:number  = 0;\n        if(before){\n            this.startNum -=num;\n            this.endNum -=num;\n            scrollY = this.prefabItem.height*3+2*10;\n        }else{\n            this.startNum +=num;\n            this.endNum +=num;\n            scrollY = this.prefabItem.height*2+1*10;\n        }\n        this.scrollView.setContentPosition(cc.v2(0,scrollY));\n    }\n\n\n    /**\n     * 创建\n     * @param data 数据\n     */\n    createItem(i,data){\n        this.pool.createEnemy(this.parent,{id:i,data});\n    }\n\n    /**\n     * 回收\n     * @param node 节点\n     */\n    clearItem(node:cc.Node){\n\n        this.pool.onEnemyKilled(node);\n\n    }\n    \n}\n"]}