{"version":3,"sources":["assets\\Script\\controlelr\\RewardController.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["/*\n * @Descripttion: 用于控制奖励的收发\n * @version: \n * @Author: mies\n * @Date: 2021-02-24 10:28:56\n * @LastEditors: mies\n * @LastEditTime: 2021-02-25 10:41:27\n */\n// Learn TypeScript:\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\nimport { propType, updateType } from \"../common/faceTs\";\nimport util from \"../util/util\";\n\nconst { ccclass, property } = cc._decorator;\nconst PointName = [\n    \"金币\",\n    \"红包\",\n    \"炮台\"\n]\nconst PropName = [\"冰冻\", \"电击\", \"护罩\", \"清屏\", \"自动合成\", \"增能\"]\n@ccclass\nexport default class RewardController extends cc.Component {\n    public static instance: RewardController = null\n    @property([cc.SpriteFrame])\n    pointSprite: Array<cc.SpriteFrame> = []\n    @property([cc.SpriteFrame])\n    pointBigSprite: Array<cc.SpriteFrame> = []\n\n    @property([cc.SpriteFrame])\n    propSprite: Array<cc.SpriteFrame> = []\n\n    @property([cc.SpriteFrame])\n    phoneSprite: Array<cc.SpriteFrame> = []\n\n    onLoad() {\n        RewardController.instance = this\n    }\n    findPointSprite(pointId: number) {\n        return this.pointSprite[pointId] || this.pointSprite[0]\n    }\n    findPointBigSprite(pointId: number) {\n        return this.pointBigSprite[pointId] || this.pointBigSprite[0]\n    }\n\n    findPropSprite(propId: number) {\n        return this.propSprite[propId] || this.propSprite[0]\n    }\n\n    findPhoneSprite(propId: number) {\n        return this.phoneSprite[propId] || this.phoneSprite[0]\n    }\n    findPropName(propId: number) {\n        return PropName[propId]\n    }\n    findPointName(pointId: number) {\n        return PointName[pointId]\n    }\n    gainPoint(pointId: number, count: number) {\n        if (pointId == updateType.coin) {\n            util.addCoin(count)\n        } else if (pointId == updateType.product) {\n            util.addProduct(count)\n        }\n    }\n    gainProp(propId: number, count: number) {\n        let arr: Array<string> = Object.keys(propType)\n        util.userData.prop[arr[propId - 1]].num += count\n    }\n    /**\n     * 播放一个贝塞尔曲线的播放轨迹,用于金币，砖石，道具飞入背包\n     * @param spriteFrame \n     * @param startNode \n     * @param target \n     * @param callback \n     * @param scale \n     */\n    playAnimate(spriteFrame: cc.SpriteFrame, startNode: cc.Node, targetNode: cc.Node, callback: Function) {\n        let canvasNode = cc.director.getScene().getChildByName('Canvas');\n        let startPos = canvasNode.convertToNodeSpaceAR(startNode.convertToWorldSpaceAR(cc.v2(0, 0)));\n        let endPos = canvasNode.convertToNodeSpaceAR(targetNode.convertToWorldSpaceAR(cc.v2(0, 0)));\n\n        let node = new cc.Node();\n        node.setContentSize(136, 136);\n        node.zIndex = 2001;\n        node.setPosition(startPos);\n        let sprite = node.addComponent(cc.Sprite);\n        sprite.spriteFrame = spriteFrame;\n        sprite.type = cc.Sprite.Type.SIMPLE;\n        sprite.sizeMode = cc.Sprite.SizeMode.RAW;\n        sprite.trim = false;\n        node.parent = canvasNode;\n        let actions = [];\n        let midPos = cc.v2(startPos.x + 150, startPos.y - 150);\n        let bezier = [startPos, midPos, endPos];\n        let bezierTo = cc.bezierTo(0.5, bezier);\n        let scaleTo = cc.scaleTo(0.5, 0.3, 0.3)\n        actions.push(cc.delayTime(0.3));\n        actions.push(cc.spawn(scaleTo, bezierTo));\n        actions.push(cc.fadeOut(0.2))\n        actions.push(cc.callFunc(() => {\n            node.destroy();\n            callback && callback(targetNode);\n        }))\n\n        node.runAction(cc.sequence(actions));\n    }\n}\n"]}